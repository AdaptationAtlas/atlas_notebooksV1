<!doctype html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta charset="utf-8"><meta name="generator" content="quarto-1.8.26"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes"><title>DiscoverSolutions</title><style>code{white-space:pre-wrap}span.smallcaps{font-variant:small-caps}div.columns{display:flex;gap:min(4vw,1.5em)}div.column{flex:auto;overflow-x:auto}div.hanging-indent{margin-left:1.5em;text-indent:-1.5em}ul.task-list{list-style:none}ul.task-list li input[type=checkbox]{width:.8em;margin:0 .8em .2em -1em;vertical-align:middle}html{-webkit-text-size-adjust:100%}pre>code.sourceCode{white-space:pre;position:relative}pre>code.sourceCode>span{display:inline-block;line-height:1.25}pre>code.sourceCode>span:empty{height:1.2em}.sourceCode{overflow:visible}code.sourceCode>span{color:inherit;text-decoration:inherit}div.sourceCode{margin:1em 0}pre.sourceCode{margin:0}@media screen{div.sourceCode{overflow:auto}}@media print{pre>code.sourceCode{white-space:pre-wrap}pre>code.sourceCode>span{text-indent:-5em;padding-left:5em}}pre.numberSource code{counter-reset:source-line 0}pre.numberSource code>span{position:relative;left:-4em;counter-increment:source-line}pre.numberSource code>span>a:first-child::before{content:counter(source-line);position:relative;left:-1em;text-align:right;vertical-align:baseline;border:none;display:inline-block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 4px;width:4em}pre.numberSource{margin-left:3em;padding-left:4px}@media screen{pre>code.sourceCode>span>a:first-child::before{text-decoration:underline}}</style><script src="../../site_libs/quarto-nav/quarto-nav.js"></script><script src="../../site_libs/quarto-nav/headroom.min.js"></script><link href="../../images/atlas-icon.svg" rel="icon" type="image/svg+xml"><script src="../../site_libs/clipboard/clipboard.min.js"></script><script src="../../site_libs/quarto-html/quarto.js" type="module"></script><script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script><script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script><script src="../../site_libs/quarto-html/popper.min.js"></script><script src="../../site_libs/quarto-html/tippy.umd.min.js"></script><link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet"><link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><script src="../../site_libs/bootstrap/bootstrap.min.js"></script><link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet"><link href="../../site_libs/bootstrap/bootstrap-24171a1204817fc0b5d15ed74f465fc7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&amp;display=swap" rel="stylesheet"><script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script><link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet"><link rel="stylesheet" href="../../styles.css"></head><body class="nav-fixed fullcontent quarto-light"><div id="quarto-search-results"></div><header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg" data-bs-theme="dark"><div class="navbar-container container-fluid"><div class="navbar-brand-container mx-auto"><a href="https://adaptationatlas.cgiar.org" class="navbar-brand navbar-brand-logo"><img src="../../images/atlas-logo.svg" alt="The Africa Agriculture Adaptation Atlas" class="navbar-logo light-content"> <img src="../../images/atlas-logo.svg" alt="The Africa Agriculture Adaptation Atlas" class="navbar-logo dark-content"></a></div><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="window.quartoToggleHeadroom&&window.quartoToggleHeadroom()"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarCollapse"><ul class="navbar-nav navbar-nav-scroll ms-auto"><li class="nav-item"><a class="nav-link" href="../../docs/doc_index.html"><i class="bi bi-info-circle" role="img" aria-label="More Information"></i> <span class="menu-text">Documentation</span></a></li><li class="nav-item"><a class="nav-link" href="https://github.com/AdaptationAtlas/atlas_notebooks/issues/new"><span class="menu-text">Report an Issue</span></a></li><li class="nav-item compact"><a class="nav-link" href="https://github.com/AdaptationAtlas/atlas_notebooks"><i class="bi bi-github" role="img" aria-label="GitHub"></i> <span class="menu-text"></span></a></li></ul></div><div class="quarto-navbar-tools"></div></div></nav></header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar"><main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="12" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 11"><span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { heroImage } <span class="im">from</span> <span class="st">"/helpers/hero.js"</span><span class="op">;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>hero_url <span class="op">=</span> <span class="st">"./../../images/solution.webp"</span><span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>hero <span class="op">=</span> <span class="fu">heroImage</span>(nbTitle<span class="op">,</span> hero_url)<span class="op">;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`</span><span class="sc">${</span>hero<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-1-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-1-2" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-1-3" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-1-4" data-nodetype="expression"></div></div></div></div><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb2" data-startfrom="20" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 19"><span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { atlasTOC } <span class="im">from</span> <span class="st">'/helpers/toc.ojs'</span> </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">await</span> nbText <span class="co">// force wait/reload with nbText to load so headings have correct labels/languages</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">atlasTOC</span>({</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>      <span class="dt">heading</span><span class="op">:</span> <span class="vs">`&lt;b&gt;</span><span class="sc">${</span><span class="fu">_lang</span>({<span class="dt">en</span><span class="op">:</span><span class="st">"In this notebook"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span><span class="st">"Dans ce notebook"</span>})<span class="sc">}</span><span class="vs">&lt;/b&gt;`</span><span class="op">,</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>      <span class="dt">skip</span><span class="op">:</span> [nbTitle<span class="op">,</span> <span class="st">"Appendix"</span><span class="op">,</span> <span class="st">"source-code"</span>]</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-2-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-2-2" data-nodetype="expression"></div></div></div></div><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb3" data-startfrom="30" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 29"><span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>viewof prettyLanguageView <span class="op">=</span> {</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">bind</span>(</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">radio</span>(languages<span class="op">,</span> {</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>({<span class="dt">en</span><span class="op">:</span> <span class="st">"Language"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"Langue"</span>})<span class="op">,</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>      <span class="dt">format</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">label</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    viewof language</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-3" data-nodetype="declaration"></div></div></div><section id="overview" class="level1"><h1><span><span id="ojs-element-id-1"></span></span></h1><p><span><span id="ojs-element-id-2"></span></span></p></section><section id="interventions" class="level1"><h1><span><span id="ojs-element-id-3"></span></span></h1><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb4" data-startfrom="48" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 47"><span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>  <span class="co">// find total observations</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> raw <span class="op">=</span> d3<span class="op">.</span><span class="fu">sum</span>(</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    data_extendedTable2_total<span class="op">,</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>    (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">observations</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> formatted <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(raw <span class="op">/</span> <span class="dv">1000</span>) <span class="op">*</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> totalObs <span class="op">=</span> <span class="fu">formatNumStandard</span>(formatted<span class="op">,</span> {</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">locale</span><span class="op">:</span> language<span class="op">.</span><span class="at">locale</span></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langString <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">interventions</span><span class="op">.</span><span class="at">blocks</span><span class="op">.</span><span class="at">opener1</span>)<span class="op">;</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> formattedString <span class="op">=</span> langString<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>    Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(<span class="st">"totalObs"</span>)<span class="op">,</span></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    totalObs</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span>formattedString<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-4" data-nodetype="expression"></div></div></div><div class="cell"><details class="code-fold"><summary>View table code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" data-startfrom="73" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 72"><span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> data_extendedTable2_total<span class="op">;</span></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> colorFill <span class="op">=</span> <span class="st">"#216729"</span><span class="op">;</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langLook <span class="op">=</span> {</span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>    <span class="dt">obs</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>      <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> y <span class="op">=</span> (d) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d])<span class="op">;</span></span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>    width<span class="op">,</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">700</span><span class="op">,</span></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">190</span><span class="op">,</span></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tickFormat</span><span class="op">:</span> <span class="st">"s"</span><span class="op">,</span></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>      <span class="dt">axis</span><span class="op">:</span> <span class="st">"top"</span><span class="op">,</span></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> langLook<span class="op">.</span><span class="at">obs</span><span class="op">,</span></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span></span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span></span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelArrow</span><span class="op">:</span> <span class="st">"none"</span><span class="op">,</span></span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>      <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleX</span>([<span class="dv">0</span>])<span class="op">,</span></span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">barX</span>(data<span class="op">,</span> {</span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"observations"</span><span class="op">,</span></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">practice</span>)<span class="op">,</span></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>        <span class="dt">sort</span><span class="op">:</span> { <span class="dt">y</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span> }<span class="op">,</span></span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> colorFill</span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">textX</span>(</span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a>        data<span class="op">,</span></span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>          { <span class="dt">text</span><span class="op">:</span> (v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>d3<span class="op">.</span><span class="fu">format</span>(<span class="st">".2s"</span>)(d)<span class="sc">}</span><span class="vs"> obs.`</span>) }<span class="op">,</span></span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a>            <span class="dt">x</span><span class="op">:</span> <span class="st">"observations"</span><span class="op">,</span></span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a>            <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">practice</span>)<span class="op">,</span></span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a>            <span class="dt">text</span><span class="op">:</span> <span class="st">"observations"</span><span class="op">,</span></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a>            <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a>            <span class="dt">dx</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a>            <span class="dt">fill</span><span class="op">:</span> <span class="st">"#333"</span></span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></details><div class="cell-output cell-output-display"><div id="ojs-cell-5" data-nodetype="expression"></div></div></div></section><section id="practicalImpact" class="level1"><h1><span><span id="ojs-element-id-4"></span></span></h1><p><span><span id="ojs-element-id-5"></span></span></p><section id="cropDiff" class="level2"><h2 data-anchor-id="cropDiff"><span><span id="ojs-element-id-6"></span></span></h2><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb6" data-startfrom="136" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 135"><span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a>viewof selectCropMeanDiff_new <span class="op">=</span> {</span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> [<span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(data_meanDiff_practiceCrop_new<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Crop</span>))]</span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> { <span class="dt">field</span><span class="op">:</span> d<span class="op">,</span> <span class="dt">translation</span><span class="op">:</span> td<span class="op">.</span><span class="at">Crop</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d] }<span class="op">;</span></span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(a<span class="op">.</span><span class="at">translation</span>) <span class="op">&gt;</span> <span class="fu">_lang</span>(b<span class="op">.</span><span class="at">translation</span>))<span class="op">;</span></span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">select</span>(data<span class="op">,</span> {</span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Crop</span>)<span class="op">,</span></span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> data<span class="op">.</span><span class="fu">find</span>(x <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">field</span> <span class="op">==</span> <span class="st">'Maize'</span>)<span class="op">,</span></span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> (x) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(x<span class="op">.</span><span class="at">translation</span>)</span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a>viewof radioSortDotPlotCrop_new <span class="op">=</span> {</span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> [</span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a>      <span class="dt">key</span><span class="op">:</span> <span class="st">"mean"</span><span class="op">,</span></span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">radioSort</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">mean</span>)<span class="op">,</span></span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a>      <span class="dt">channel</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb6-155"><a href="#cb6-155" aria-hidden="true" tabindex="-1"></a>      <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-156"><a href="#cb6-156" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb6-157"><a href="#cb6-157" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-158"><a href="#cb6-158" aria-hidden="true" tabindex="-1"></a>      <span class="dt">key</span><span class="op">:</span> <span class="st">"observations"</span><span class="op">,</span></span>
<span id="cb6-159"><a href="#cb6-159" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">radioSort</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">observations</span>)<span class="op">,</span></span>
<span id="cb6-160"><a href="#cb6-160" aria-hidden="true" tabindex="-1"></a>      <span class="dt">channel</span><span class="op">:</span> <span class="st">"nObs"</span><span class="op">,</span></span>
<span id="cb6-161"><a href="#cb6-161" aria-hidden="true" tabindex="-1"></a>      <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-162"><a href="#cb6-162" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb6-163"><a href="#cb6-163" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-164"><a href="#cb6-164" aria-hidden="true" tabindex="-1"></a>      <span class="dt">key</span><span class="op">:</span> <span class="st">"alpha"</span><span class="op">,</span></span>
<span id="cb6-165"><a href="#cb6-165" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">radioSort</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">alpha</span>)<span class="op">,</span></span>
<span id="cb6-166"><a href="#cb6-166" aria-hidden="true" tabindex="-1"></a>      <span class="dt">channel</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb6-167"><a href="#cb6-167" aria-hidden="true" tabindex="-1"></a>      <span class="dt">reverse</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb6-168"><a href="#cb6-168" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb6-169"><a href="#cb6-169" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb6-170"><a href="#cb6-170" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">radio</span>(data<span class="op">,</span> { <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">sort</span>)<span class="op">,</span> <span class="dt">format</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">label</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> data<span class="op">.</span><span class="fu">find</span>(x <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">key</span> <span class="op">===</span> <span class="st">'mean'</span>) })<span class="op">;</span></span>
<span id="cb6-171"><a href="#cb6-171" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-172"><a href="#cb6-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-173"><a href="#cb6-173" aria-hidden="true" tabindex="-1"></a>viewof toggleCIsCrop_new <span class="op">=</span> {</span>
<span id="cb6-174"><a href="#cb6-174" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> [</span>
<span id="cb6-175"><a href="#cb6-175" aria-hidden="true" tabindex="-1"></a>    <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">toggleConfInt</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">visible</span>)</span>
<span id="cb6-176"><a href="#cb6-176" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb6-177"><a href="#cb6-177" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">checkbox</span>(data<span class="op">,</span> {</span>
<span id="cb6-178"><a href="#cb6-178" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">confidenceIntervals</span>)</span>
<span id="cb6-179"><a href="#cb6-179" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb6-180"><a href="#cb6-180" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-6-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-6-2" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-6-3" data-nodetype="declaration"></div></div></div></div><div class="cell"><details class="code-fold"><summary>View table code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" data-startfrom="186" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 185"><span id="cb7-186"><a href="#cb7-186" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb7-187"><a href="#cb7-187" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> plotData <span class="op">=</span> data_meanDiff_practiceCrop_new<span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb7-188"><a href="#cb7-188" aria-hidden="true" tabindex="-1"></a>    (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Crop</span> <span class="op">===</span> selectCropMeanDiff_new<span class="op">.</span><span class="at">field</span></span>
<span id="cb7-189"><a href="#cb7-189" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb7-190"><a href="#cb7-190" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginBottom <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-191"><a href="#cb7-191" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginTop <span class="op">=</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb7-192"><a href="#cb7-192" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yHeight <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb7-193"><a href="#cb7-193" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> height <span class="op">=</span></span>
<span id="cb7-194"><a href="#cb7-194" aria-hidden="true" tabindex="-1"></a>    marginTop <span class="op">+</span></span>
<span id="cb7-195"><a href="#cb7-195" aria-hidden="true" tabindex="-1"></a>    marginBottom <span class="op">+</span></span>
<span id="cb7-196"><a href="#cb7-196" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">group</span>(plotData<span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Practice</span>)<span class="op">.</span><span class="at">size</span> <span class="op">*</span> yHeight<span class="op">;</span></span>
<span id="cb7-197"><a href="#cb7-197" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> _formatNum <span class="op">=</span> formatNum<span class="op">;</span></span>
<span id="cb7-198"><a href="#cb7-198" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> _toggleCIs <span class="op">=</span> toggleCIsCrop_new<span class="op">;</span></span>
<span id="cb7-199"><a href="#cb7-199" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> _radioSort <span class="op">=</span> radioSortDotPlotCrop_new<span class="op">;</span></span>
<span id="cb7-200"><a href="#cb7-200" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langLookup <span class="op">=</span> {</span>
<span id="cb7-201"><a href="#cb7-201" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xLabel</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">xMeanDiff</span>)<span class="op">,</span></span>
<span id="cb7-202"><a href="#cb7-202" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tooltip</span><span class="op">:</span> {</span>
<span id="cb7-203"><a href="#cb7-203" aria-hidden="true" tabindex="-1"></a>      <span class="dt">aez</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">aez</span>)<span class="op">,</span></span>
<span id="cb7-204"><a href="#cb7-204" aria-hidden="true" tabindex="-1"></a>      <span class="dt">meanDiff</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">meanDiff</span>)<span class="op">,</span></span>
<span id="cb7-205"><a href="#cb7-205" aria-hidden="true" tabindex="-1"></a>      <span class="dt">meanControl</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">meanControl</span>)<span class="op">,</span></span>
<span id="cb7-206"><a href="#cb7-206" aria-hidden="true" tabindex="-1"></a>      <span class="dt">crop</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(<span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">crop</span><span class="op">.</span><span class="at">singular</span>))<span class="op">,</span></span>
<span id="cb7-207"><a href="#cb7-207" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ciLo</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">ciLower</span>)<span class="op">,</span></span>
<span id="cb7-208"><a href="#cb7-208" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ciHi</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">ciUpper</span>)<span class="op">,</span></span>
<span id="cb7-209"><a href="#cb7-209" aria-hidden="true" tabindex="-1"></a>      <span class="dt">obs</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(<span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>))<span class="op">,</span></span>
<span id="cb7-210"><a href="#cb7-210" aria-hidden="true" tabindex="-1"></a>      <span class="dt">practice</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(<span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">practice</span><span class="op">.</span><span class="at">singular</span>))</span>
<span id="cb7-211"><a href="#cb7-211" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-212"><a href="#cb7-212" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-213"><a href="#cb7-213" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> y <span class="op">=</span> (d) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d])<span class="op">;</span></span>
<span id="cb7-214"><a href="#cb7-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-215"><a href="#cb7-215" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb7-216"><a href="#cb7-216" aria-hidden="true" tabindex="-1"></a>    height<span class="op">,</span></span>
<span id="cb7-217"><a href="#cb7-217" aria-hidden="true" tabindex="-1"></a>    marginBottom<span class="op">,</span></span>
<span id="cb7-218"><a href="#cb7-218" aria-hidden="true" tabindex="-1"></a>    marginTop<span class="op">,</span></span>
<span id="cb7-219"><a href="#cb7-219" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb7-220"><a href="#cb7-220" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">70</span><span class="op">,</span></span>
<span id="cb7-221"><a href="#cb7-221" aria-hidden="true" tabindex="-1"></a>    width<span class="op">,</span></span>
<span id="cb7-222"><a href="#cb7-222" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb7-223"><a href="#cb7-223" aria-hidden="true" tabindex="-1"></a>      <span class="dt">axis</span><span class="op">:</span> <span class="st">"top"</span><span class="op">,</span></span>
<span id="cb7-224"><a href="#cb7-224" aria-hidden="true" tabindex="-1"></a>      <span class="dt">nice</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb7-225"><a href="#cb7-225" aria-hidden="true" tabindex="-1"></a>      <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb7-226"><a href="#cb7-226" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">xLabel</span><span class="op">,</span></span>
<span id="cb7-227"><a href="#cb7-227" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span></span>
<span id="cb7-228"><a href="#cb7-228" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span></span>
<span id="cb7-229"><a href="#cb7-229" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelArrow</span><span class="op">:</span> <span class="st">"none"</span></span>
<span id="cb7-230"><a href="#cb7-230" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb7-231"><a href="#cb7-231" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb7-232"><a href="#cb7-232" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb7-233"><a href="#cb7-233" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span></span>
<span id="cb7-234"><a href="#cb7-234" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb7-235"><a href="#cb7-235" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb7-236"><a href="#cb7-236" aria-hidden="true" tabindex="-1"></a>      <span class="dt">range</span><span class="op">:</span> colorYellowGreen</span>
<span id="cb7-237"><a href="#cb7-237" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb7-238"><a href="#cb7-238" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb7-239"><a href="#cb7-239" aria-hidden="true" tabindex="-1"></a>      <span class="co">// main y-axis</span></span>
<span id="cb7-240"><a href="#cb7-240" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">axisY</span>({</span>
<span id="cb7-241"><a href="#cb7-241" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb7-242"><a href="#cb7-242" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb7-243"><a href="#cb7-243" aria-hidden="true" tabindex="-1"></a>      <span class="co">// pointer white-out</span></span>
<span id="cb7-244"><a href="#cb7-244" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">axisY</span>(</span>
<span id="cb7-245"><a href="#cb7-245" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>({</span>
<span id="cb7-246"><a href="#cb7-246" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb7-247"><a href="#cb7-247" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textStroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb7-248"><a href="#cb7-248" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textStrokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb7-249"><a href="#cb7-249" aria-hidden="true" tabindex="-1"></a>          <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb7-250"><a href="#cb7-250" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb7-251"><a href="#cb7-251" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb7-252"><a href="#cb7-252" aria-hidden="true" tabindex="-1"></a>      <span class="co">// bold pointer</span></span>
<span id="cb7-253"><a href="#cb7-253" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">axisY</span>(</span>
<span id="cb7-254"><a href="#cb7-254" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>({</span>
<span id="cb7-255"><a href="#cb7-255" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span></span>
<span id="cb7-256"><a href="#cb7-256" aria-hidden="true" tabindex="-1"></a>          <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb7-257"><a href="#cb7-257" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb7-258"><a href="#cb7-258" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb7-259"><a href="#cb7-259" aria-hidden="true" tabindex="-1"></a>      <span class="co">// zero point</span></span>
<span id="cb7-260"><a href="#cb7-260" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleX</span>([<span class="dv">0</span>]<span class="op">,</span> { <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#333"</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> [<span class="dv">4</span>] })<span class="op">,</span></span>
<span id="cb7-261"><a href="#cb7-261" aria-hidden="true" tabindex="-1"></a>      <span class="co">// span lines: CI</span></span>
<span id="cb7-262"><a href="#cb7-262" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleY</span>(_toggleCIs<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> plotData <span class="op">:</span> []<span class="op">,</span> {</span>
<span id="cb7-263"><a href="#cb7-263" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb7-264"><a href="#cb7-264" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x1</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Lower</span><span class="op">,</span></span>
<span id="cb7-265"><a href="#cb7-265" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x2</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Upper</span><span class="op">,</span></span>
<span id="cb7-266"><a href="#cb7-266" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#333"</span></span>
<span id="cb7-267"><a href="#cb7-267" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb7-268"><a href="#cb7-268" aria-hidden="true" tabindex="-1"></a>      <span class="co">// mean diff dots</span></span>
<span id="cb7-269"><a href="#cb7-269" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(plotData<span class="op">,</span> {</span>
<span id="cb7-270"><a href="#cb7-270" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"Mean_Difference"</span><span class="op">,</span></span>
<span id="cb7-271"><a href="#cb7-271" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb7-272"><a href="#cb7-272" aria-hidden="true" tabindex="-1"></a>        <span class="dt">sort</span><span class="op">:</span> { <span class="dt">y</span><span class="op">:</span> _radioSort<span class="op">.</span><span class="at">channel</span><span class="op">,</span> <span class="dt">reverse</span><span class="op">:</span> _radioSort<span class="op">.</span><span class="at">reverse</span> }<span class="op">,</span></span>
<span id="cb7-273"><a href="#cb7-273" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Mean_Difference</span><span class="op">,</span></span>
<span id="cb7-274"><a href="#cb7-274" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span></span>
<span id="cb7-275"><a href="#cb7-275" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#fff"</span><span class="op">,</span></span>
<span id="cb7-276"><a href="#cb7-276" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">0.7</span><span class="op">,</span></span>
<span id="cb7-277"><a href="#cb7-277" aria-hidden="true" tabindex="-1"></a>        <span class="dt">channels</span><span class="op">:</span> {</span>
<span id="cb7-278"><a href="#cb7-278" aria-hidden="true" tabindex="-1"></a>          <span class="dt">nObs</span><span class="op">:</span> {</span>
<span id="cb7-279"><a href="#cb7-279" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"N_Obs"</span></span>
<span id="cb7-280"><a href="#cb7-280" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb7-281"><a href="#cb7-281" aria-hidden="true" tabindex="-1"></a>          <span class="dt">prac</span><span class="op">:</span> {</span>
<span id="cb7-282"><a href="#cb7-282" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb7-283"><a href="#cb7-283" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb7-284"><a href="#cb7-284" aria-hidden="true" tabindex="-1"></a>          <span class="dt">crop</span><span class="op">:</span> {</span>
<span id="cb7-285"><a href="#cb7-285" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"Crop"</span></span>
<span id="cb7-286"><a href="#cb7-286" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb7-287"><a href="#cb7-287" aria-hidden="true" tabindex="-1"></a>          <span class="dt">diff</span><span class="op">:</span> {</span>
<span id="cb7-288"><a href="#cb7-288" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">meanDiff</span><span class="op">,</span></span>
<span id="cb7-289"><a href="#cb7-289" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"Mean_Difference"</span></span>
<span id="cb7-290"><a href="#cb7-290" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb7-291"><a href="#cb7-291" aria-hidden="true" tabindex="-1"></a>          <span class="dt">control</span><span class="op">:</span> {</span>
<span id="cb7-292"><a href="#cb7-292" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">meanControl</span><span class="op">,</span></span>
<span id="cb7-293"><a href="#cb7-293" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">'Mean_Control'</span><span class="op">,</span></span>
<span id="cb7-294"><a href="#cb7-294" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb7-295"><a href="#cb7-295" aria-hidden="true" tabindex="-1"></a>          <span class="dt">ciLow</span><span class="op">:</span> {</span>
<span id="cb7-296"><a href="#cb7-296" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">ciLo</span><span class="op">,</span></span>
<span id="cb7-297"><a href="#cb7-297" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"Lower"</span></span>
<span id="cb7-298"><a href="#cb7-298" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb7-299"><a href="#cb7-299" aria-hidden="true" tabindex="-1"></a>          <span class="dt">ciHigh</span><span class="op">:</span> {</span>
<span id="cb7-300"><a href="#cb7-300" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">ciHi</span><span class="op">,</span></span>
<span id="cb7-301"><a href="#cb7-301" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"Upper"</span></span>
<span id="cb7-302"><a href="#cb7-302" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb7-303"><a href="#cb7-303" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb7-304"><a href="#cb7-304" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tip</span><span class="op">:</span> {</span>
<span id="cb7-305"><a href="#cb7-305" aria-hidden="true" tabindex="-1"></a>          <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb7-306"><a href="#cb7-306" aria-hidden="true" tabindex="-1"></a>            <span class="dt">x</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb7-307"><a href="#cb7-307" aria-hidden="true" tabindex="-1"></a>            <span class="dt">y</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb7-308"><a href="#cb7-308" aria-hidden="true" tabindex="-1"></a>            <span class="dt">fill</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb7-309"><a href="#cb7-309" aria-hidden="true" tabindex="-1"></a>            <span class="dt">prac</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb7-310"><a href="#cb7-310" aria-hidden="true" tabindex="-1"></a>            <span class="dt">crop</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb7-311"><a href="#cb7-311" aria-hidden="true" tabindex="-1"></a>            <span class="dt">nObs</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb7-312"><a href="#cb7-312" aria-hidden="true" tabindex="-1"></a>            <span class="dt">diff</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">_formatNum</span>(d)<span class="op">,</span></span>
<span id="cb7-313"><a href="#cb7-313" aria-hidden="true" tabindex="-1"></a>            <span class="dt">control</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">_formatNum</span>(d)<span class="op">,</span></span>
<span id="cb7-314"><a href="#cb7-314" aria-hidden="true" tabindex="-1"></a>            <span class="dt">ciLow</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">_formatNum</span>(d)<span class="op">,</span></span>
<span id="cb7-315"><a href="#cb7-315" aria-hidden="true" tabindex="-1"></a>            <span class="dt">ciHigh</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">_formatNum</span>(d)</span>
<span id="cb7-316"><a href="#cb7-316" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb7-317"><a href="#cb7-317" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb7-318"><a href="#cb7-318" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb7-319"><a href="#cb7-319" aria-hidden="true" tabindex="-1"></a>      <span class="co">// dot highlight on hover</span></span>
<span id="cb7-320"><a href="#cb7-320" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(plotData<span class="op">,</span> Plot<span class="op">.</span><span class="fu">pointer</span>({</span>
<span id="cb7-321"><a href="#cb7-321" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"Mean_Difference"</span><span class="op">,</span></span>
<span id="cb7-322"><a href="#cb7-322" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb7-323"><a href="#cb7-323" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span></span>
<span id="cb7-324"><a href="#cb7-324" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#333"</span><span class="op">,</span></span>
<span id="cb7-325"><a href="#cb7-325" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">0.7</span><span class="op">,</span></span>
<span id="cb7-326"><a href="#cb7-326" aria-hidden="true" tabindex="-1"></a>        <span class="dt">channels</span><span class="op">:</span> {</span>
<span id="cb7-327"><a href="#cb7-327" aria-hidden="true" tabindex="-1"></a>          <span class="dt">nObs</span><span class="op">:</span> {</span>
<span id="cb7-328"><a href="#cb7-328" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> <span class="st">"# Observations"</span><span class="op">,</span></span>
<span id="cb7-329"><a href="#cb7-329" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"N_Obs"</span></span>
<span id="cb7-330"><a href="#cb7-330" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb7-331"><a href="#cb7-331" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb7-332"><a href="#cb7-332" aria-hidden="true" tabindex="-1"></a>      }))<span class="op">,</span></span>
<span id="cb7-333"><a href="#cb7-333" aria-hidden="true" tabindex="-1"></a>      <span class="co">// observation counts</span></span>
<span id="cb7-334"><a href="#cb7-334" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">textY</span>(plotData<span class="op">,</span> {</span>
<span id="cb7-335"><a href="#cb7-335" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb7-336"><a href="#cb7-336" aria-hidden="true" tabindex="-1"></a>        <span class="dt">text</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">N_Obs</span> <span class="op">+</span> <span class="st">" obs."</span><span class="op">,</span></span>
<span id="cb7-337"><a href="#cb7-337" aria-hidden="true" tabindex="-1"></a>        <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span></span>
<span id="cb7-338"><a href="#cb7-338" aria-hidden="true" tabindex="-1"></a>        <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb7-339"><a href="#cb7-339" aria-hidden="true" tabindex="-1"></a>        <span class="dt">dx</span><span class="op">:</span> <span class="dv">16</span></span>
<span id="cb7-340"><a href="#cb7-340" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb7-341"><a href="#cb7-341" aria-hidden="true" tabindex="-1"></a>      <span class="co">// counts white-out</span></span>
<span id="cb7-342"><a href="#cb7-342" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb7-343"><a href="#cb7-343" aria-hidden="true" tabindex="-1"></a>        plotData<span class="op">,</span></span>
<span id="cb7-344"><a href="#cb7-344" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>({</span>
<span id="cb7-345"><a href="#cb7-345" aria-hidden="true" tabindex="-1"></a>          <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb7-346"><a href="#cb7-346" aria-hidden="true" tabindex="-1"></a>          <span class="dt">text</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">N_Obs</span> <span class="op">+</span> <span class="st">" obs."</span><span class="op">,</span></span>
<span id="cb7-347"><a href="#cb7-347" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb7-348"><a href="#cb7-348" aria-hidden="true" tabindex="-1"></a>          <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb7-349"><a href="#cb7-349" aria-hidden="true" tabindex="-1"></a>          <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb7-350"><a href="#cb7-350" aria-hidden="true" tabindex="-1"></a>          <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span></span>
<span id="cb7-351"><a href="#cb7-351" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb7-352"><a href="#cb7-352" aria-hidden="true" tabindex="-1"></a>          <span class="dt">dx</span><span class="op">:</span> <span class="dv">16</span></span>
<span id="cb7-353"><a href="#cb7-353" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb7-354"><a href="#cb7-354" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb7-355"><a href="#cb7-355" aria-hidden="true" tabindex="-1"></a>      <span class="co">// counts bold hover</span></span>
<span id="cb7-356"><a href="#cb7-356" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb7-357"><a href="#cb7-357" aria-hidden="true" tabindex="-1"></a>        plotData<span class="op">,</span></span>
<span id="cb7-358"><a href="#cb7-358" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>({</span>
<span id="cb7-359"><a href="#cb7-359" aria-hidden="true" tabindex="-1"></a>          <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb7-360"><a href="#cb7-360" aria-hidden="true" tabindex="-1"></a>          <span class="dt">text</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">N_Obs</span> <span class="op">+</span> <span class="st">" obs."</span><span class="op">,</span></span>
<span id="cb7-361"><a href="#cb7-361" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span></span>
<span id="cb7-362"><a href="#cb7-362" aria-hidden="true" tabindex="-1"></a>          <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span></span>
<span id="cb7-363"><a href="#cb7-363" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb7-364"><a href="#cb7-364" aria-hidden="true" tabindex="-1"></a>          <span class="dt">dx</span><span class="op">:</span> <span class="dv">16</span></span>
<span id="cb7-365"><a href="#cb7-365" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb7-366"><a href="#cb7-366" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb7-367"><a href="#cb7-367" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb7-368"><a href="#cb7-368" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb7-369"><a href="#cb7-369" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></details><div class="cell-output cell-output-display"><div id="ojs-cell-7" data-nodetype="expression"></div></div></div><section id="quickinsight" class="level3"><h3 data-anchor-id="quickinsight"><span><span id="ojs-element-id-7"></span></span></h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb8" data-startfrom="375" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 374"><span id="cb8-375"><a href="#cb8-375" aria-hidden="true" tabindex="-1"></a><span class="co">// insights</span></span>
<span id="cb8-376"><a href="#cb8-376" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb8-377"><a href="#cb8-377" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langRoot <span class="op">=</span> nbText<span class="op">;</span></span>
<span id="cb8-378"><a href="#cb8-378" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langBasePath <span class="op">=</span> langRoot<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">meanCropDiff</span><span class="op">.</span><span class="at">insights</span><span class="op">;</span> <span class="co">// base path for language</span></span>
<span id="cb8-379"><a href="#cb8-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-380"><a href="#cb8-380" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> data_meanDiff_practiceCrop_new<span class="op">;</span></span>
<span id="cb8-381"><a href="#cb8-381" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> selection <span class="op">=</span> selectCropMeanDiff_new<span class="op">.</span><span class="at">field</span><span class="op">;</span></span>
<span id="cb8-382"><a href="#cb8-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-383"><a href="#cb8-383" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tl_crop <span class="op">=</span> (crop) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Crop</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[crop])<span class="op">;</span></span>
<span id="cb8-384"><a href="#cb8-384" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tl_crop_article <span class="op">=</span> (crop) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Crop_with_articles</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[crop])<span class="op">;</span></span>
<span id="cb8-385"><a href="#cb8-385" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tl_prac <span class="op">=</span> (prac) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[prac])<span class="op">;</span></span>
<span id="cb8-386"><a href="#cb8-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-387"><a href="#cb8-387" aria-hidden="true" tabindex="-1"></a>  <span class="co">// top 5 crops by unique practices</span></span>
<span id="cb8-388"><a href="#cb8-388" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> top5CropsByPractices <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb8-389"><a href="#cb8-389" aria-hidden="true" tabindex="-1"></a>    data<span class="op">,</span></span>
<span id="cb8-390"><a href="#cb8-390" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">count</span>([<span class="st">"Crop"</span>])<span class="op">,</span></span>
<span id="cb8-391"><a href="#cb8-391" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">arrange</span>(T<span class="op">.</span><span class="fu">desc</span>(<span class="st">"n"</span>))<span class="op">,</span></span>
<span id="cb8-392"><a href="#cb8-392" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">sliceHead</span>(<span class="dv">5</span>)</span>
<span id="cb8-393"><a href="#cb8-393" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb8-394"><a href="#cb8-394" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> top5CropsByPracticesString <span class="op">=</span> top5CropsByPractices</span>
<span id="cb8-395"><a href="#cb8-395" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((d<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb8-396"><a href="#cb8-396" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (i <span class="op">==</span> top5CropsByPractices<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>) <span class="cf">return</span> <span class="vs">`and **</span><span class="sc">${</span><span class="fu">tl_crop</span>(d<span class="op">.</span><span class="at">Crop</span>)<span class="sc">}</span><span class="vs">**`</span><span class="op">;</span></span>
<span id="cb8-397"><a href="#cb8-397" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="vs">`**</span><span class="sc">${</span><span class="fu">tl_crop</span>(d<span class="op">.</span><span class="at">Crop</span>)<span class="sc">}</span><span class="vs">**`</span><span class="op">;</span></span>
<span id="cb8-398"><a href="#cb8-398" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb8-399"><a href="#cb8-399" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">", "</span>)<span class="op">;</span></span>
<span id="cb8-400"><a href="#cb8-400" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langTop5 <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">top5</span>)<span class="op">;</span></span>
<span id="cb8-401"><a href="#cb8-401" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langTop5Format <span class="op">=</span> langTop5<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb8-402"><a href="#cb8-402" aria-hidden="true" tabindex="-1"></a>    Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(<span class="st">"top5CropsByPracticesString"</span>)<span class="op">,</span></span>
<span id="cb8-403"><a href="#cb8-403" aria-hidden="true" tabindex="-1"></a>    top5CropsByPracticesString</span>
<span id="cb8-404"><a href="#cb8-404" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb8-405"><a href="#cb8-405" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightTop5 <span class="op">=</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span>langTop5Format<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb8-406"><a href="#cb8-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-407"><a href="#cb8-407" aria-hidden="true" tabindex="-1"></a>  <span class="co">// crop selection</span></span>
<span id="cb8-408"><a href="#cb8-408" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> selectedCrop <span class="op">=</span> selection<span class="op">;</span></span>
<span id="cb8-409"><a href="#cb8-409" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dataCrop <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb8-410"><a href="#cb8-410" aria-hidden="true" tabindex="-1"></a>    data<span class="op">,</span></span>
<span id="cb8-411"><a href="#cb8-411" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Crop</span> <span class="op">==</span> selectedCrop)</span>
<span id="cb8-412"><a href="#cb8-412" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb8-413"><a href="#cb8-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-414"><a href="#cb8-414" aria-hidden="true" tabindex="-1"></a>  <span class="co">// crop overview</span></span>
<span id="cb8-415"><a href="#cb8-415" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> cropOverview <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb8-416"><a href="#cb8-416" aria-hidden="true" tabindex="-1"></a>    dataCrop<span class="op">,</span></span>
<span id="cb8-417"><a href="#cb8-417" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">summarize</span>({</span>
<span id="cb8-418"><a href="#cb8-418" aria-hidden="true" tabindex="-1"></a>      <span class="dt">totalObs</span><span class="op">:</span> T<span class="op">.</span><span class="fu">sum</span>(<span class="st">"N_Obs"</span>)<span class="op">,</span></span>
<span id="cb8-419"><a href="#cb8-419" aria-hidden="true" tabindex="-1"></a>      <span class="dt">totalPractices</span><span class="op">:</span> T<span class="op">.</span><span class="fu">n</span>()</span>
<span id="cb8-420"><a href="#cb8-420" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb8-421"><a href="#cb8-421" aria-hidden="true" tabindex="-1"></a>  )<span class="op">?.</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb8-422"><a href="#cb8-422" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langCropOverview <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">cropOverview</span>)<span class="op">;</span></span>
<span id="cb8-423"><a href="#cb8-423" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langCropOverviewItems <span class="op">=</span> [</span>
<span id="cb8-424"><a href="#cb8-424" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"selectedCrop"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(<span class="fu">tl_crop_article</span>(selectedCrop)) }<span class="op">,</span></span>
<span id="cb8-425"><a href="#cb8-425" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalObs"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(cropOverview<span class="op">.</span><span class="at">totalObs</span>) }<span class="op">,</span></span>
<span id="cb8-426"><a href="#cb8-426" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalPractices"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> cropOverview<span class="op">.</span><span class="at">totalPractices</span> }</span>
<span id="cb8-427"><a href="#cb8-427" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb8-428"><a href="#cb8-428" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightCropOverview <span class="op">=</span> langCropOverviewItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb8-429"><a href="#cb8-429" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb8-430"><a href="#cb8-430" aria-hidden="true" tabindex="-1"></a>      Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb8-431"><a href="#cb8-431" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">value</span></span>
<span id="cb8-432"><a href="#cb8-432" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb8-433"><a href="#cb8-433" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> langCropOverview)<span class="op">;</span></span>
<span id="cb8-434"><a href="#cb8-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-435"><a href="#cb8-435" aria-hidden="true" tabindex="-1"></a>  <span class="co">// positive yield</span></span>
<span id="cb8-436"><a href="#cb8-436" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> cropPositive <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb8-437"><a href="#cb8-437" aria-hidden="true" tabindex="-1"></a>    dataCrop<span class="op">,</span></span>
<span id="cb8-438"><a href="#cb8-438" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Mean_Difference</span> <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb8-439"><a href="#cb8-439" aria-hidden="true" tabindex="-1"></a>  )<span class="op">?.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb8-440"><a href="#cb8-440" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langCropPositive <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">cropPositive</span><span class="op">.</span><span class="at">main</span>)<span class="op">;</span></span>
<span id="cb8-441"><a href="#cb8-441" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langCropSubstring <span class="op">=</span> <span class="vs">`**</span><span class="sc">${</span>cropPositive<span class="sc">}</span><span class="vs">** </span><span class="sc">${</span></span>
<span id="cb8-442"><a href="#cb8-442" aria-hidden="true" tabindex="-1"></a>    cropPositive <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb8-443"><a href="#cb8-443" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">cropPositive</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb8-444"><a href="#cb8-444" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">cropPositive</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb8-445"><a href="#cb8-445" aria-hidden="true" tabindex="-1"></a>  <span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb8-446"><a href="#cb8-446" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightCropPositive <span class="op">=</span> langCropPositive<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb8-447"><a href="#cb8-447" aria-hidden="true" tabindex="-1"></a>    Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(<span class="st">"cropPositiveText"</span>)<span class="op">,</span></span>
<span id="cb8-448"><a href="#cb8-448" aria-hidden="true" tabindex="-1"></a>    langCropSubstring</span>
<span id="cb8-449"><a href="#cb8-449" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb8-450"><a href="#cb8-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-451"><a href="#cb8-451" aria-hidden="true" tabindex="-1"></a>  <span class="co">// top for selected crop</span></span>
<span id="cb8-452"><a href="#cb8-452" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> n <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// # top crops to include</span></span>
<span id="cb8-453"><a href="#cb8-453" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> topCrop <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb8-454"><a href="#cb8-454" aria-hidden="true" tabindex="-1"></a>    dataCrop<span class="op">,</span></span>
<span id="cb8-455"><a href="#cb8-455" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">sliceMax</span>(n<span class="op">,</span> <span class="st">"Mean_Difference"</span>)<span class="op">,</span></span>
<span id="cb8-456"><a href="#cb8-456" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">arrange</span>(T<span class="op">.</span><span class="fu">desc</span>(<span class="st">"Mean_Difference"</span>))</span>
<span id="cb8-457"><a href="#cb8-457" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb8-458"><a href="#cb8-458" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> diff1 <span class="op">=</span> topCrop<span class="op">?.</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb8-459"><a href="#cb8-459" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> diff2 <span class="op">=</span> topCrop<span class="op">?.</span>[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb8-460"><a href="#cb8-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-461"><a href="#cb8-461" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirst <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffFirst</span><span class="op">.</span><span class="at">main</span>)<span class="op">;</span></span>
<span id="cb8-462"><a href="#cb8-462" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirst_incDec <span class="op">=</span></span>
<span id="cb8-463"><a href="#cb8-463" aria-hidden="true" tabindex="-1"></a>    diff1<span class="op">.</span><span class="at">Mean_Difference</span> <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb8-464"><a href="#cb8-464" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">increase</span>)</span>
<span id="cb8-465"><a href="#cb8-465" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">decrease</span>)<span class="op">;</span></span>
<span id="cb8-466"><a href="#cb8-466" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirst_observations <span class="op">=</span> diff1<span class="op">.</span><span class="at">N_Obs</span><span class="op">;</span></span>
<span id="cb8-467"><a href="#cb8-467" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirstItems <span class="op">=</span> [</span>
<span id="cb8-468"><a href="#cb8-468" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"practice"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">tl_prac</span>(diff1<span class="op">.</span><span class="at">Practice</span>) }<span class="op">,</span></span>
<span id="cb8-469"><a href="#cb8-469" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb8-470"><a href="#cb8-470" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"incDec"</span><span class="op">,</span></span>
<span id="cb8-471"><a href="#cb8-471" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb8-472"><a href="#cb8-472" aria-hidden="true" tabindex="-1"></a>        diff1<span class="op">.</span><span class="at">Mean_Difference</span> <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb8-473"><a href="#cb8-473" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">increase</span>)</span>
<span id="cb8-474"><a href="#cb8-474" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">decrease</span>)</span>
<span id="cb8-475"><a href="#cb8-475" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb8-476"><a href="#cb8-476" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"meanDiff"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatNum</span>(diff1<span class="op">.</span><span class="at">Mean_Difference</span>) }<span class="op">,</span></span>
<span id="cb8-477"><a href="#cb8-477" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationCount"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(diff1<span class="op">.</span><span class="at">N_Obs</span>) }<span class="op">,</span></span>
<span id="cb8-478"><a href="#cb8-478" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb8-479"><a href="#cb8-479" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationString"</span><span class="op">,</span></span>
<span id="cb8-480"><a href="#cb8-480" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb8-481"><a href="#cb8-481" aria-hidden="true" tabindex="-1"></a>        diff1<span class="op">.</span><span class="at">N_Obs</span> <span class="op">&gt;</span> <span class="dv">1</span></span>
<span id="cb8-482"><a href="#cb8-482" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb8-483"><a href="#cb8-483" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb8-484"><a href="#cb8-484" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-485"><a href="#cb8-485" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb8-486"><a href="#cb8-486" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightDiffFirst <span class="op">=</span> langDiffFirstItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb8-487"><a href="#cb8-487" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb8-488"><a href="#cb8-488" aria-hidden="true" tabindex="-1"></a>      Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb8-489"><a href="#cb8-489" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">value</span></span>
<span id="cb8-490"><a href="#cb8-490" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb8-491"><a href="#cb8-491" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> langDiffFirst)<span class="op">;</span></span>
<span id="cb8-492"><a href="#cb8-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-493"><a href="#cb8-493" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecond <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffSecond</span><span class="op">.</span><span class="at">main</span>)<span class="op">;</span></span>
<span id="cb8-494"><a href="#cb8-494" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecond_incDec <span class="op">=</span></span>
<span id="cb8-495"><a href="#cb8-495" aria-hidden="true" tabindex="-1"></a>    diff2<span class="op">?.</span><span class="at">Mean_Difference</span> <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb8-496"><a href="#cb8-496" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">increase</span>)</span>
<span id="cb8-497"><a href="#cb8-497" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">decrease</span>)<span class="op">;</span></span>
<span id="cb8-498"><a href="#cb8-498" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecond_observations <span class="op">=</span> diff2<span class="op">?.</span><span class="at">N_Obs</span><span class="op">;</span></span>
<span id="cb8-499"><a href="#cb8-499" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecondItems <span class="op">=</span> [</span>
<span id="cb8-500"><a href="#cb8-500" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"practice"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">tl_prac</span>(diff2<span class="op">?.</span><span class="at">Practice</span>) }<span class="op">,</span></span>
<span id="cb8-501"><a href="#cb8-501" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb8-502"><a href="#cb8-502" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"incDec"</span><span class="op">,</span></span>
<span id="cb8-503"><a href="#cb8-503" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb8-504"><a href="#cb8-504" aria-hidden="true" tabindex="-1"></a>        diff2<span class="op">?.</span><span class="at">Mean_Difference</span> <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb8-505"><a href="#cb8-505" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">increase</span>)</span>
<span id="cb8-506"><a href="#cb8-506" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">decrease</span>)</span>
<span id="cb8-507"><a href="#cb8-507" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb8-508"><a href="#cb8-508" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"meanDiff"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatNum</span>(diff2<span class="op">?.</span><span class="at">Mean_Difference</span>) }<span class="op">,</span></span>
<span id="cb8-509"><a href="#cb8-509" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationCount"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(diff2<span class="op">?.</span><span class="at">N_Obs</span>) }<span class="op">,</span></span>
<span id="cb8-510"><a href="#cb8-510" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb8-511"><a href="#cb8-511" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationString"</span><span class="op">,</span></span>
<span id="cb8-512"><a href="#cb8-512" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb8-513"><a href="#cb8-513" aria-hidden="true" tabindex="-1"></a>        diff2<span class="op">?.</span><span class="at">N_Obs</span> <span class="op">&gt;</span> <span class="dv">1</span></span>
<span id="cb8-514"><a href="#cb8-514" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb8-515"><a href="#cb8-515" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb8-516"><a href="#cb8-516" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-517"><a href="#cb8-517" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb8-518"><a href="#cb8-518" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightDiffSecond <span class="op">=</span> diff2</span>
<span id="cb8-519"><a href="#cb8-519" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> langDiffSecondItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb8-520"><a href="#cb8-520" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb8-521"><a href="#cb8-521" aria-hidden="true" tabindex="-1"></a>          Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb8-522"><a href="#cb8-522" aria-hidden="true" tabindex="-1"></a>          item<span class="op">.</span><span class="at">value</span></span>
<span id="cb8-523"><a href="#cb8-523" aria-hidden="true" tabindex="-1"></a>        )<span class="op">;</span></span>
<span id="cb8-524"><a href="#cb8-524" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span> langDiffSecond)</span>
<span id="cb8-525"><a href="#cb8-525" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb8-526"><a href="#cb8-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-527"><a href="#cb8-527" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span>insightTop5<span class="sc">}</span></span>
<span id="cb8-528"><a href="#cb8-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-529"><a href="#cb8-529" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>insightCropOverview<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>insightCropPositive<span class="sc">}</span></span>
<span id="cb8-530"><a href="#cb8-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-531"><a href="#cb8-531" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>insightDiffFirst<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>insightDiffSecond<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb8-532"><a href="#cb8-532" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-8" data-nodetype="expression"></div></div></div></section></section><section id="cropDiffAEZ" class="level2"><h2 data-anchor-id="cropDiffAEZ"><span><span id="ojs-element-id-8"></span></span></h2><p><span><span id="ojs-element-id-9"></span></span></p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb9" data-startfrom="541" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 540"><span id="cb9-541"><a href="#cb9-541" aria-hidden="true" tabindex="-1"></a>viewof selectCropMeanDiffAEZ <span class="op">=</span> {</span>
<span id="cb9-542"><a href="#cb9-542" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> [</span>
<span id="cb9-543"><a href="#cb9-543" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(data_meanDiff_aezPracticeCrop_new<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Crop</span>))</span>
<span id="cb9-544"><a href="#cb9-544" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb9-545"><a href="#cb9-545" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb9-546"><a href="#cb9-546" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> { <span class="dt">field</span><span class="op">:</span> d<span class="op">,</span> <span class="dt">translation</span><span class="op">:</span> td<span class="op">.</span><span class="at">Crop</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d] }<span class="op">;</span></span>
<span id="cb9-547"><a href="#cb9-547" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb9-548"><a href="#cb9-548" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(a<span class="op">.</span><span class="at">translation</span>) <span class="op">&gt;</span> <span class="fu">_lang</span>(b<span class="op">.</span><span class="at">translation</span>))<span class="op">;</span></span>
<span id="cb9-549"><a href="#cb9-549" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">select</span>(data<span class="op">,</span> {</span>
<span id="cb9-550"><a href="#cb9-550" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Crop</span>)<span class="op">,</span></span>
<span id="cb9-551"><a href="#cb9-551" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> data<span class="op">.</span><span class="fu">find</span>((x) <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">field</span> <span class="op">==</span> <span class="st">"Maize"</span>)<span class="op">,</span></span>
<span id="cb9-552"><a href="#cb9-552" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> (x) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(x<span class="op">.</span><span class="at">translation</span>)</span>
<span id="cb9-553"><a href="#cb9-553" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb9-554"><a href="#cb9-554" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-555"><a href="#cb9-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-556"><a href="#cb9-556" aria-hidden="true" tabindex="-1"></a>viewof radioSortDotPlotCropAEZ_new <span class="op">=</span> {</span>
<span id="cb9-557"><a href="#cb9-557" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> [</span>
<span id="cb9-558"><a href="#cb9-558" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb9-559"><a href="#cb9-559" aria-hidden="true" tabindex="-1"></a>      <span class="dt">key</span><span class="op">:</span> <span class="st">"mean"</span><span class="op">,</span></span>
<span id="cb9-560"><a href="#cb9-560" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">radioSort</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">mean</span>)<span class="op">,</span></span>
<span id="cb9-561"><a href="#cb9-561" aria-hidden="true" tabindex="-1"></a>      <span class="dt">channel</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb9-562"><a href="#cb9-562" aria-hidden="true" tabindex="-1"></a>      <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb9-563"><a href="#cb9-563" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb9-564"><a href="#cb9-564" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb9-565"><a href="#cb9-565" aria-hidden="true" tabindex="-1"></a>      <span class="dt">key</span><span class="op">:</span> <span class="st">"observations"</span><span class="op">,</span></span>
<span id="cb9-566"><a href="#cb9-566" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">radioSort</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">observations</span>)<span class="op">,</span></span>
<span id="cb9-567"><a href="#cb9-567" aria-hidden="true" tabindex="-1"></a>      <span class="dt">channel</span><span class="op">:</span> <span class="st">"nObs"</span><span class="op">,</span></span>
<span id="cb9-568"><a href="#cb9-568" aria-hidden="true" tabindex="-1"></a>      <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb9-569"><a href="#cb9-569" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb9-570"><a href="#cb9-570" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb9-571"><a href="#cb9-571" aria-hidden="true" tabindex="-1"></a>      <span class="dt">key</span><span class="op">:</span> <span class="st">"alpha"</span><span class="op">,</span></span>
<span id="cb9-572"><a href="#cb9-572" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">radioSort</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">alpha</span>)<span class="op">,</span></span>
<span id="cb9-573"><a href="#cb9-573" aria-hidden="true" tabindex="-1"></a>      <span class="dt">channel</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb9-574"><a href="#cb9-574" aria-hidden="true" tabindex="-1"></a>      <span class="dt">reverse</span><span class="op">:</span> <span class="kw">false</span></span>
<span id="cb9-575"><a href="#cb9-575" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-576"><a href="#cb9-576" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb9-577"><a href="#cb9-577" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">radio</span>(data<span class="op">,</span> {</span>
<span id="cb9-578"><a href="#cb9-578" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">sort</span>)<span class="op">,</span></span>
<span id="cb9-579"><a href="#cb9-579" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">label</span><span class="op">,</span></span>
<span id="cb9-580"><a href="#cb9-580" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> data<span class="op">.</span><span class="fu">find</span>((x) <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">key</span> <span class="op">===</span> <span class="st">"mean"</span>)</span>
<span id="cb9-581"><a href="#cb9-581" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb9-582"><a href="#cb9-582" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-583"><a href="#cb9-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-584"><a href="#cb9-584" aria-hidden="true" tabindex="-1"></a>viewof aezSelect_new <span class="op">=</span> {</span>
<span id="cb9-585"><a href="#cb9-585" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> data_meanDiff_aezPracticeCrop_new<span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb9-586"><a href="#cb9-586" aria-hidden="true" tabindex="-1"></a>    (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Crop</span> <span class="op">===</span> selectCropMeanDiffAEZ<span class="op">.</span><span class="at">field</span></span>
<span id="cb9-587"><a href="#cb9-587" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb9-588"><a href="#cb9-588" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> aezNames <span class="op">=</span> d3</span>
<span id="cb9-589"><a href="#cb9-589" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">groups</span>(data<span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">AEZ_Class_FAO</span>)</span>
<span id="cb9-590"><a href="#cb9-590" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d[<span class="dv">0</span>])</span>
<span id="cb9-591"><a href="#cb9-591" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">sort</span>()<span class="op">;</span></span>
<span id="cb9-592"><a href="#cb9-592" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> options <span class="op">=</span> aezNames<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> ({</span>
<span id="cb9-593"><a href="#cb9-593" aria-hidden="true" tabindex="-1"></a>    <span class="dt">field</span><span class="op">:</span> d<span class="op">,</span></span>
<span id="cb9-594"><a href="#cb9-594" aria-hidden="true" tabindex="-1"></a>    <span class="dt">translation</span><span class="op">:</span> td<span class="op">.</span><span class="at">AEZ_Class_FAO</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d]</span>
<span id="cb9-595"><a href="#cb9-595" aria-hidden="true" tabindex="-1"></a>  }))<span class="op">;</span></span>
<span id="cb9-596"><a href="#cb9-596" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> nullValue <span class="op">=</span> {</span>
<span id="cb9-597"><a href="#cb9-597" aria-hidden="true" tabindex="-1"></a>    <span class="dt">field</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb9-598"><a href="#cb9-598" aria-hidden="true" tabindex="-1"></a>    <span class="dt">translation</span><span class="op">:</span> nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">defaults</span><span class="op">.</span><span class="at">aez</span></span>
<span id="cb9-599"><a href="#cb9-599" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb9-600"><a href="#cb9-600" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> inputNames <span class="op">=</span> [nullValue<span class="op">,</span> <span class="op">...</span>options]<span class="op">;</span></span>
<span id="cb9-601"><a href="#cb9-601" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">select</span>(inputNames<span class="op">,</span> {</span>
<span id="cb9-602"><a href="#cb9-602" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">highlightAez</span>)<span class="op">,</span></span>
<span id="cb9-603"><a href="#cb9-603" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> aezNames<span class="op">,</span></span>
<span id="cb9-604"><a href="#cb9-604" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">_lang</span>(x<span class="op">.</span><span class="at">translation</span>)</span>
<span id="cb9-605"><a href="#cb9-605" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb9-606"><a href="#cb9-606" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-607"><a href="#cb9-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-608"><a href="#cb9-608" aria-hidden="true" tabindex="-1"></a>viewof toggleCIsCropAEZ_new <span class="op">=</span> {</span>
<span id="cb9-609"><a href="#cb9-609" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> [</span>
<span id="cb9-610"><a href="#cb9-610" aria-hidden="true" tabindex="-1"></a>    <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">toggleConfInt</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">visible</span>)</span>
<span id="cb9-611"><a href="#cb9-611" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb9-612"><a href="#cb9-612" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">checkbox</span>(data<span class="op">,</span> {</span>
<span id="cb9-613"><a href="#cb9-613" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">confidenceIntervals</span>)</span>
<span id="cb9-614"><a href="#cb9-614" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb9-615"><a href="#cb9-615" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-9-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-9-2" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-9-3" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-9-4" data-nodetype="declaration"></div></div></div></div><div class="cell"><details class="code-fold"><summary>View table code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10" data-startfrom="623" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 622"><span id="cb10-623"><a href="#cb10-623" aria-hidden="true" tabindex="-1"></a>plotDotAEZ_new <span class="op">=</span> {</span>
<span id="cb10-624"><a href="#cb10-624" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> baseData <span class="op">=</span> data_meanDiff_aezPracticeCrop_new<span class="op">;</span></span>
<span id="cb10-625"><a href="#cb10-625" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> plotData <span class="op">=</span> baseData<span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb10-626"><a href="#cb10-626" aria-hidden="true" tabindex="-1"></a>    (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Crop</span> <span class="op">===</span> selectCropMeanDiffAEZ<span class="op">.</span><span class="at">field</span></span>
<span id="cb10-627"><a href="#cb10-627" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb10-628"><a href="#cb10-628" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> aezData <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb10-629"><a href="#cb10-629" aria-hidden="true" tabindex="-1"></a>    plotData<span class="op">,</span></span>
<span id="cb10-630"><a href="#cb10-630" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb10-631"><a href="#cb10-631" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (aezSelect_new<span class="op">.</span><span class="at">field</span> <span class="op">==</span> <span class="kw">null</span>) <span class="cf">return</span> d<span class="op">;</span></span>
<span id="cb10-632"><a href="#cb10-632" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> d<span class="op">.</span><span class="at">AEZ_Class_FAO</span> <span class="op">==</span> aezSelect_new<span class="op">.</span><span class="at">field</span><span class="op">;</span></span>
<span id="cb10-633"><a href="#cb10-633" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb10-634"><a href="#cb10-634" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">arrange</span>(<span class="st">"Mean_Difference"</span>)</span>
<span id="cb10-635"><a href="#cb10-635" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb10-636"><a href="#cb10-636" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> colorDomain <span class="op">=</span> aezColor_new<span class="op">.</span><span class="at">domain</span><span class="op">;</span></span>
<span id="cb10-637"><a href="#cb10-637" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> colorRange <span class="op">=</span> aezColor_new<span class="op">.</span><span class="at">range</span><span class="op">;</span></span>
<span id="cb10-638"><a href="#cb10-638" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginBottom <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb10-639"><a href="#cb10-639" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginTop <span class="op">=</span> <span class="dv">80</span><span class="op">;</span></span>
<span id="cb10-640"><a href="#cb10-640" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yHeight <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb10-641"><a href="#cb10-641" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> height <span class="op">=</span></span>
<span id="cb10-642"><a href="#cb10-642" aria-hidden="true" tabindex="-1"></a>    marginTop <span class="op">+</span></span>
<span id="cb10-643"><a href="#cb10-643" aria-hidden="true" tabindex="-1"></a>    marginBottom <span class="op">+</span></span>
<span id="cb10-644"><a href="#cb10-644" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">group</span>(plotData<span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Practice</span>)<span class="op">.</span><span class="at">size</span> <span class="op">*</span> yHeight<span class="op">;</span></span>
<span id="cb10-645"><a href="#cb10-645" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> _formatNum <span class="op">=</span> formatNum<span class="op">;</span></span>
<span id="cb10-646"><a href="#cb10-646" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> _toggleCIs <span class="op">=</span> toggleCIsCropAEZ_new<span class="op">;</span></span>
<span id="cb10-647"><a href="#cb10-647" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> _radioSort <span class="op">=</span> radioSortDotPlotCropAEZ_new<span class="op">;</span></span>
<span id="cb10-648"><a href="#cb10-648" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langLookup <span class="op">=</span> {</span>
<span id="cb10-649"><a href="#cb10-649" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xLabel</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">xMeanDiff</span>)<span class="op">,</span></span>
<span id="cb10-650"><a href="#cb10-650" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tooltip</span><span class="op">:</span> {</span>
<span id="cb10-651"><a href="#cb10-651" aria-hidden="true" tabindex="-1"></a>      <span class="dt">aez</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">aez</span>)<span class="op">,</span></span>
<span id="cb10-652"><a href="#cb10-652" aria-hidden="true" tabindex="-1"></a>      <span class="dt">meanDiff</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">meanDiff</span>)<span class="op">,</span></span>
<span id="cb10-653"><a href="#cb10-653" aria-hidden="true" tabindex="-1"></a>      <span class="dt">meanControl</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">meanControl</span>)<span class="op">,</span></span>
<span id="cb10-654"><a href="#cb10-654" aria-hidden="true" tabindex="-1"></a>      <span class="dt">crop</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb10-655"><a href="#cb10-655" aria-hidden="true" tabindex="-1"></a>        <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">crop</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb10-656"><a href="#cb10-656" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb10-657"><a href="#cb10-657" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ciLo</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">ciLower</span>)<span class="op">,</span></span>
<span id="cb10-658"><a href="#cb10-658" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ciHi</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">tooltips</span><span class="op">.</span><span class="at">ciUpper</span>)<span class="op">,</span></span>
<span id="cb10-659"><a href="#cb10-659" aria-hidden="true" tabindex="-1"></a>      <span class="dt">obs</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb10-660"><a href="#cb10-660" aria-hidden="true" tabindex="-1"></a>        <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb10-661"><a href="#cb10-661" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb10-662"><a href="#cb10-662" aria-hidden="true" tabindex="-1"></a>      <span class="dt">practice</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb10-663"><a href="#cb10-663" aria-hidden="true" tabindex="-1"></a>        <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">practice</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb10-664"><a href="#cb10-664" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb10-665"><a href="#cb10-665" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-666"><a href="#cb10-666" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb10-667"><a href="#cb10-667" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> y <span class="op">=</span> (d) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d])<span class="op">;</span></span>
<span id="cb10-668"><a href="#cb10-668" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> color <span class="op">=</span> (d) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">AEZ_Class_FAO</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d])<span class="op">;</span></span>
<span id="cb10-669"><a href="#cb10-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-670"><a href="#cb10-670" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb10-671"><a href="#cb10-671" aria-hidden="true" tabindex="-1"></a>    height<span class="op">,</span></span>
<span id="cb10-672"><a href="#cb10-672" aria-hidden="true" tabindex="-1"></a>    marginBottom<span class="op">,</span></span>
<span id="cb10-673"><a href="#cb10-673" aria-hidden="true" tabindex="-1"></a>    marginTop<span class="op">,</span></span>
<span id="cb10-674"><a href="#cb10-674" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb10-675"><a href="#cb10-675" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">70</span><span class="op">,</span></span>
<span id="cb10-676"><a href="#cb10-676" aria-hidden="true" tabindex="-1"></a>    width<span class="op">,</span></span>
<span id="cb10-677"><a href="#cb10-677" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb10-678"><a href="#cb10-678" aria-hidden="true" tabindex="-1"></a>      <span class="dt">axis</span><span class="op">:</span> <span class="st">"top"</span><span class="op">,</span></span>
<span id="cb10-679"><a href="#cb10-679" aria-hidden="true" tabindex="-1"></a>      <span class="dt">nice</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb10-680"><a href="#cb10-680" aria-hidden="true" tabindex="-1"></a>      <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb10-681"><a href="#cb10-681" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">xLabel</span><span class="op">,</span></span>
<span id="cb10-682"><a href="#cb10-682" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span></span>
<span id="cb10-683"><a href="#cb10-683" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span></span>
<span id="cb10-684"><a href="#cb10-684" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelArrow</span><span class="op">:</span> <span class="st">"none"</span></span>
<span id="cb10-685"><a href="#cb10-685" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb10-686"><a href="#cb10-686" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb10-687"><a href="#cb10-687" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb10-688"><a href="#cb10-688" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span></span>
<span id="cb10-689"><a href="#cb10-689" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb10-690"><a href="#cb10-690" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb10-691"><a href="#cb10-691" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> colorDomain<span class="op">,</span></span>
<span id="cb10-692"><a href="#cb10-692" aria-hidden="true" tabindex="-1"></a>      <span class="dt">range</span><span class="op">:</span> colorRange</span>
<span id="cb10-693"><a href="#cb10-693" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb10-694"><a href="#cb10-694" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb10-695"><a href="#cb10-695" aria-hidden="true" tabindex="-1"></a>      <span class="co">// main y-axis</span></span>
<span id="cb10-696"><a href="#cb10-696" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">axisY</span>({</span>
<span id="cb10-697"><a href="#cb10-697" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb10-698"><a href="#cb10-698" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb10-699"><a href="#cb10-699" aria-hidden="true" tabindex="-1"></a>      <span class="co">// pointer white-out</span></span>
<span id="cb10-700"><a href="#cb10-700" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">axisY</span>(</span>
<span id="cb10-701"><a href="#cb10-701" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>({</span>
<span id="cb10-702"><a href="#cb10-702" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb10-703"><a href="#cb10-703" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textStroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb10-704"><a href="#cb10-704" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textStrokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb10-705"><a href="#cb10-705" aria-hidden="true" tabindex="-1"></a>          <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb10-706"><a href="#cb10-706" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb10-707"><a href="#cb10-707" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb10-708"><a href="#cb10-708" aria-hidden="true" tabindex="-1"></a>      <span class="co">// bold pointer</span></span>
<span id="cb10-709"><a href="#cb10-709" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">axisY</span>(</span>
<span id="cb10-710"><a href="#cb10-710" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>({</span>
<span id="cb10-711"><a href="#cb10-711" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span></span>
<span id="cb10-712"><a href="#cb10-712" aria-hidden="true" tabindex="-1"></a>          <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb10-713"><a href="#cb10-713" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb10-714"><a href="#cb10-714" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb10-715"><a href="#cb10-715" aria-hidden="true" tabindex="-1"></a>      <span class="co">// zero point</span></span>
<span id="cb10-716"><a href="#cb10-716" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleX</span>([<span class="dv">0</span>]<span class="op">,</span> { <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#333"</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> [<span class="dv">4</span>] })<span class="op">,</span></span>
<span id="cb10-717"><a href="#cb10-717" aria-hidden="true" tabindex="-1"></a>      <span class="co">// base dots</span></span>
<span id="cb10-718"><a href="#cb10-718" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(plotData<span class="op">,</span> {</span>
<span id="cb10-719"><a href="#cb10-719" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"Mean_Difference"</span><span class="op">,</span></span>
<span id="cb10-720"><a href="#cb10-720" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb10-721"><a href="#cb10-721" aria-hidden="true" tabindex="-1"></a>        <span class="dt">sort</span><span class="op">:</span> { <span class="dt">y</span><span class="op">:</span> _radioSort<span class="op">.</span><span class="at">channel</span><span class="op">,</span> <span class="dt">reverse</span><span class="op">:</span> _radioSort<span class="op">.</span><span class="at">reverse</span> }<span class="op">,</span></span>
<span id="cb10-722"><a href="#cb10-722" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span></span>
<span id="cb10-723"><a href="#cb10-723" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#fff"</span><span class="op">,</span></span>
<span id="cb10-724"><a href="#cb10-724" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">0.7</span><span class="op">,</span></span>
<span id="cb10-725"><a href="#cb10-725" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> <span class="st">"#efefef"</span><span class="op">,</span></span>
<span id="cb10-726"><a href="#cb10-726" aria-hidden="true" tabindex="-1"></a>        <span class="dt">channels</span><span class="op">:</span> {</span>
<span id="cb10-727"><a href="#cb10-727" aria-hidden="true" tabindex="-1"></a>          <span class="dt">nObs</span><span class="op">:</span> {</span>
<span id="cb10-728"><a href="#cb10-728" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> <span class="st">"# Observations"</span><span class="op">,</span></span>
<span id="cb10-729"><a href="#cb10-729" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"N_Obs"</span></span>
<span id="cb10-730"><a href="#cb10-730" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb10-731"><a href="#cb10-731" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb10-732"><a href="#cb10-732" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb10-733"><a href="#cb10-733" aria-hidden="true" tabindex="-1"></a>      <span class="co">// selection: span lines: CI</span></span>
<span id="cb10-734"><a href="#cb10-734" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleY</span>(_toggleCIs<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> aezData <span class="op">:</span> []<span class="op">,</span> {</span>
<span id="cb10-735"><a href="#cb10-735" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb10-736"><a href="#cb10-736" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x1</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">Lower</span> <span class="op">==</span> <span class="st">"NA"</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> d<span class="op">.</span><span class="at">Lower</span>)<span class="op">,</span></span>
<span id="cb10-737"><a href="#cb10-737" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x2</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">Upper</span> <span class="op">==</span> <span class="st">"NA"</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> d<span class="op">.</span><span class="at">Upper</span>)<span class="op">,</span></span>
<span id="cb10-738"><a href="#cb10-738" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#333"</span></span>
<span id="cb10-739"><a href="#cb10-739" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb10-740"><a href="#cb10-740" aria-hidden="true" tabindex="-1"></a>      <span class="co">// selection: mean diff dots</span></span>
<span id="cb10-741"><a href="#cb10-741" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(aezData<span class="op">,</span> {</span>
<span id="cb10-742"><a href="#cb10-742" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"Mean_Difference"</span><span class="op">,</span></span>
<span id="cb10-743"><a href="#cb10-743" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb10-744"><a href="#cb10-744" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb10-745"><a href="#cb10-745" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="fu">color</span>(d<span class="op">.</span><span class="at">AEZ_Class_FAO</span>)<span class="op">;</span></span>
<span id="cb10-746"><a href="#cb10-746" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb10-747"><a href="#cb10-747" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span></span>
<span id="cb10-748"><a href="#cb10-748" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#fff"</span><span class="op">,</span></span>
<span id="cb10-749"><a href="#cb10-749" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">0.7</span><span class="op">,</span></span>
<span id="cb10-750"><a href="#cb10-750" aria-hidden="true" tabindex="-1"></a>        <span class="dt">channels</span><span class="op">:</span> {</span>
<span id="cb10-751"><a href="#cb10-751" aria-hidden="true" tabindex="-1"></a>          <span class="dt">aez</span><span class="op">:</span> {</span>
<span id="cb10-752"><a href="#cb10-752" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">aez</span><span class="op">,</span></span>
<span id="cb10-753"><a href="#cb10-753" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">color</span>(d<span class="op">.</span><span class="at">AEZ_Class_FAO</span>)</span>
<span id="cb10-754"><a href="#cb10-754" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb10-755"><a href="#cb10-755" aria-hidden="true" tabindex="-1"></a>          <span class="dt">nObs</span><span class="op">:</span> {</span>
<span id="cb10-756"><a href="#cb10-756" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">obs</span><span class="op">,</span></span>
<span id="cb10-757"><a href="#cb10-757" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"N_Obs"</span></span>
<span id="cb10-758"><a href="#cb10-758" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb10-759"><a href="#cb10-759" aria-hidden="true" tabindex="-1"></a>          <span class="dt">diff</span><span class="op">:</span> {</span>
<span id="cb10-760"><a href="#cb10-760" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">meanDiff</span><span class="op">,</span></span>
<span id="cb10-761"><a href="#cb10-761" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"Mean_Difference"</span></span>
<span id="cb10-762"><a href="#cb10-762" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb10-763"><a href="#cb10-763" aria-hidden="true" tabindex="-1"></a>          <span class="dt">control</span><span class="op">:</span> {</span>
<span id="cb10-764"><a href="#cb10-764" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">meanControl</span><span class="op">,</span></span>
<span id="cb10-765"><a href="#cb10-765" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"Mean_Control"</span></span>
<span id="cb10-766"><a href="#cb10-766" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb10-767"><a href="#cb10-767" aria-hidden="true" tabindex="-1"></a>          <span class="dt">prac</span><span class="op">:</span> {</span>
<span id="cb10-768"><a href="#cb10-768" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">practice</span><span class="op">,</span></span>
<span id="cb10-769"><a href="#cb10-769" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)</span>
<span id="cb10-770"><a href="#cb10-770" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb10-771"><a href="#cb10-771" aria-hidden="true" tabindex="-1"></a>          <span class="dt">crop</span><span class="op">:</span> {</span>
<span id="cb10-772"><a href="#cb10-772" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">crop</span><span class="op">,</span></span>
<span id="cb10-773"><a href="#cb10-773" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"Crop"</span></span>
<span id="cb10-774"><a href="#cb10-774" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb10-775"><a href="#cb10-775" aria-hidden="true" tabindex="-1"></a>          <span class="dt">ciLow</span><span class="op">:</span> {</span>
<span id="cb10-776"><a href="#cb10-776" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">ciLo</span><span class="op">,</span></span>
<span id="cb10-777"><a href="#cb10-777" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"Lower"</span></span>
<span id="cb10-778"><a href="#cb10-778" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb10-779"><a href="#cb10-779" aria-hidden="true" tabindex="-1"></a>          <span class="dt">ciHigh</span><span class="op">:</span> {</span>
<span id="cb10-780"><a href="#cb10-780" aria-hidden="true" tabindex="-1"></a>            <span class="dt">label</span><span class="op">:</span> langLookup<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">ciHi</span><span class="op">,</span></span>
<span id="cb10-781"><a href="#cb10-781" aria-hidden="true" tabindex="-1"></a>            <span class="dt">value</span><span class="op">:</span> <span class="st">"Upper"</span></span>
<span id="cb10-782"><a href="#cb10-782" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb10-783"><a href="#cb10-783" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb10-784"><a href="#cb10-784" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tip</span><span class="op">:</span> {</span>
<span id="cb10-785"><a href="#cb10-785" aria-hidden="true" tabindex="-1"></a>          <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb10-786"><a href="#cb10-786" aria-hidden="true" tabindex="-1"></a>            <span class="dt">x</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb10-787"><a href="#cb10-787" aria-hidden="true" tabindex="-1"></a>            <span class="dt">y</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb10-788"><a href="#cb10-788" aria-hidden="true" tabindex="-1"></a>            <span class="dt">fill</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb10-789"><a href="#cb10-789" aria-hidden="true" tabindex="-1"></a>            <span class="dt">prac</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb10-790"><a href="#cb10-790" aria-hidden="true" tabindex="-1"></a>            <span class="dt">crop</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb10-791"><a href="#cb10-791" aria-hidden="true" tabindex="-1"></a>            <span class="dt">aez</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb10-792"><a href="#cb10-792" aria-hidden="true" tabindex="-1"></a>            <span class="dt">diff</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">_formatNum</span>(d)<span class="op">,</span></span>
<span id="cb10-793"><a href="#cb10-793" aria-hidden="true" tabindex="-1"></a>            <span class="dt">control</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">_formatNum</span>(d)<span class="op">,</span></span>
<span id="cb10-794"><a href="#cb10-794" aria-hidden="true" tabindex="-1"></a>            <span class="dt">ciLow</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">_formatNum</span>(d)<span class="op">,</span></span>
<span id="cb10-795"><a href="#cb10-795" aria-hidden="true" tabindex="-1"></a>            <span class="dt">ciHigh</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">_formatNum</span>(d)<span class="op">,</span></span>
<span id="cb10-796"><a href="#cb10-796" aria-hidden="true" tabindex="-1"></a>            <span class="dt">nObs</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb10-797"><a href="#cb10-797" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb10-798"><a href="#cb10-798" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb10-799"><a href="#cb10-799" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb10-800"><a href="#cb10-800" aria-hidden="true" tabindex="-1"></a>      <span class="co">// dot highlight on hover</span></span>
<span id="cb10-801"><a href="#cb10-801" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(</span>
<span id="cb10-802"><a href="#cb10-802" aria-hidden="true" tabindex="-1"></a>        aezData<span class="op">,</span></span>
<span id="cb10-803"><a href="#cb10-803" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointer</span>({</span>
<span id="cb10-804"><a href="#cb10-804" aria-hidden="true" tabindex="-1"></a>          <span class="dt">x</span><span class="op">:</span> <span class="st">"Mean_Difference"</span><span class="op">,</span></span>
<span id="cb10-805"><a href="#cb10-805" aria-hidden="true" tabindex="-1"></a>          <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb10-806"><a href="#cb10-806" aria-hidden="true" tabindex="-1"></a>          <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span></span>
<span id="cb10-807"><a href="#cb10-807" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fill</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb10-808"><a href="#cb10-808" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> d<span class="op">.</span><span class="at">AEZ_Class_FAO</span><span class="op">;</span></span>
<span id="cb10-809"><a href="#cb10-809" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb10-810"><a href="#cb10-810" aria-hidden="true" tabindex="-1"></a>          <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#333"</span><span class="op">,</span></span>
<span id="cb10-811"><a href="#cb10-811" aria-hidden="true" tabindex="-1"></a>          <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">0.7</span><span class="op">,</span></span>
<span id="cb10-812"><a href="#cb10-812" aria-hidden="true" tabindex="-1"></a>          <span class="dt">channels</span><span class="op">:</span> {</span>
<span id="cb10-813"><a href="#cb10-813" aria-hidden="true" tabindex="-1"></a>            <span class="dt">nObs</span><span class="op">:</span> {</span>
<span id="cb10-814"><a href="#cb10-814" aria-hidden="true" tabindex="-1"></a>              <span class="dt">label</span><span class="op">:</span> <span class="st">"# Observations"</span><span class="op">,</span></span>
<span id="cb10-815"><a href="#cb10-815" aria-hidden="true" tabindex="-1"></a>              <span class="dt">value</span><span class="op">:</span> <span class="st">"N_Obs"</span></span>
<span id="cb10-816"><a href="#cb10-816" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb10-817"><a href="#cb10-817" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb10-818"><a href="#cb10-818" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb10-819"><a href="#cb10-819" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb10-820"><a href="#cb10-820" aria-hidden="true" tabindex="-1"></a>      <span class="co">// observation counts</span></span>
<span id="cb10-821"><a href="#cb10-821" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb10-822"><a href="#cb10-822" aria-hidden="true" tabindex="-1"></a>        aezData<span class="op">,</span></span>
<span id="cb10-823"><a href="#cb10-823" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb10-824"><a href="#cb10-824" aria-hidden="true" tabindex="-1"></a>          { <span class="dt">text</span><span class="op">:</span> (values) <span class="kw">=&gt;</span> values<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d <span class="op">+</span> <span class="st">" obs."</span>) }<span class="op">,</span></span>
<span id="cb10-825"><a href="#cb10-825" aria-hidden="true" tabindex="-1"></a>          Plot<span class="op">.</span><span class="fu">groupY</span>(</span>
<span id="cb10-826"><a href="#cb10-826" aria-hidden="true" tabindex="-1"></a>            { <span class="dt">text</span><span class="op">:</span> <span class="st">"sum"</span> }<span class="op">,</span></span>
<span id="cb10-827"><a href="#cb10-827" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb10-828"><a href="#cb10-828" aria-hidden="true" tabindex="-1"></a>              <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb10-829"><a href="#cb10-829" aria-hidden="true" tabindex="-1"></a>              <span class="dt">text</span><span class="op">:</span> <span class="st">"N_Obs"</span><span class="op">,</span></span>
<span id="cb10-830"><a href="#cb10-830" aria-hidden="true" tabindex="-1"></a>              <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span></span>
<span id="cb10-831"><a href="#cb10-831" aria-hidden="true" tabindex="-1"></a>              <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb10-832"><a href="#cb10-832" aria-hidden="true" tabindex="-1"></a>              <span class="dt">dx</span><span class="op">:</span> <span class="dv">16</span></span>
<span id="cb10-833"><a href="#cb10-833" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb10-834"><a href="#cb10-834" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb10-835"><a href="#cb10-835" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb10-836"><a href="#cb10-836" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb10-837"><a href="#cb10-837" aria-hidden="true" tabindex="-1"></a>      <span class="co">// digital white-out</span></span>
<span id="cb10-838"><a href="#cb10-838" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb10-839"><a href="#cb10-839" aria-hidden="true" tabindex="-1"></a>        aezData<span class="op">,</span></span>
<span id="cb10-840"><a href="#cb10-840" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>(</span>
<span id="cb10-841"><a href="#cb10-841" aria-hidden="true" tabindex="-1"></a>          Plot<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb10-842"><a href="#cb10-842" aria-hidden="true" tabindex="-1"></a>            { <span class="dt">text</span><span class="op">:</span> (values) <span class="kw">=&gt;</span> values<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d <span class="op">+</span> <span class="st">" obs."</span>) }<span class="op">,</span></span>
<span id="cb10-843"><a href="#cb10-843" aria-hidden="true" tabindex="-1"></a>            Plot<span class="op">.</span><span class="fu">groupY</span>(</span>
<span id="cb10-844"><a href="#cb10-844" aria-hidden="true" tabindex="-1"></a>              { <span class="dt">text</span><span class="op">:</span> <span class="st">"sum"</span> }<span class="op">,</span></span>
<span id="cb10-845"><a href="#cb10-845" aria-hidden="true" tabindex="-1"></a>              {</span>
<span id="cb10-846"><a href="#cb10-846" aria-hidden="true" tabindex="-1"></a>                <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb10-847"><a href="#cb10-847" aria-hidden="true" tabindex="-1"></a>                <span class="dt">text</span><span class="op">:</span> <span class="st">"N_Obs"</span><span class="op">,</span></span>
<span id="cb10-848"><a href="#cb10-848" aria-hidden="true" tabindex="-1"></a>                <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span></span>
<span id="cb10-849"><a href="#cb10-849" aria-hidden="true" tabindex="-1"></a>                <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb10-850"><a href="#cb10-850" aria-hidden="true" tabindex="-1"></a>                <span class="dt">dx</span><span class="op">:</span> <span class="dv">16</span><span class="op">,</span></span>
<span id="cb10-851"><a href="#cb10-851" aria-hidden="true" tabindex="-1"></a>                <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb10-852"><a href="#cb10-852" aria-hidden="true" tabindex="-1"></a>                <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb10-853"><a href="#cb10-853" aria-hidden="true" tabindex="-1"></a>                <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb10-854"><a href="#cb10-854" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb10-855"><a href="#cb10-855" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb10-856"><a href="#cb10-856" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb10-857"><a href="#cb10-857" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb10-858"><a href="#cb10-858" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb10-859"><a href="#cb10-859" aria-hidden="true" tabindex="-1"></a>      <span class="co">// observation counts bold hover</span></span>
<span id="cb10-860"><a href="#cb10-860" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb10-861"><a href="#cb10-861" aria-hidden="true" tabindex="-1"></a>        aezData<span class="op">,</span></span>
<span id="cb10-862"><a href="#cb10-862" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>(</span>
<span id="cb10-863"><a href="#cb10-863" aria-hidden="true" tabindex="-1"></a>          Plot<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb10-864"><a href="#cb10-864" aria-hidden="true" tabindex="-1"></a>            { <span class="dt">text</span><span class="op">:</span> (values) <span class="kw">=&gt;</span> values<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d <span class="op">+</span> <span class="st">" obs."</span>) }<span class="op">,</span></span>
<span id="cb10-865"><a href="#cb10-865" aria-hidden="true" tabindex="-1"></a>            Plot<span class="op">.</span><span class="fu">groupY</span>(</span>
<span id="cb10-866"><a href="#cb10-866" aria-hidden="true" tabindex="-1"></a>              { <span class="dt">text</span><span class="op">:</span> <span class="st">"sum"</span> }<span class="op">,</span></span>
<span id="cb10-867"><a href="#cb10-867" aria-hidden="true" tabindex="-1"></a>              {</span>
<span id="cb10-868"><a href="#cb10-868" aria-hidden="true" tabindex="-1"></a>                <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb10-869"><a href="#cb10-869" aria-hidden="true" tabindex="-1"></a>                <span class="dt">text</span><span class="op">:</span> <span class="st">"N_Obs"</span><span class="op">,</span></span>
<span id="cb10-870"><a href="#cb10-870" aria-hidden="true" tabindex="-1"></a>                <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span></span>
<span id="cb10-871"><a href="#cb10-871" aria-hidden="true" tabindex="-1"></a>                <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb10-872"><a href="#cb10-872" aria-hidden="true" tabindex="-1"></a>                <span class="dt">dx</span><span class="op">:</span> <span class="dv">16</span><span class="op">,</span></span>
<span id="cb10-873"><a href="#cb10-873" aria-hidden="true" tabindex="-1"></a>                <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span></span>
<span id="cb10-874"><a href="#cb10-874" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb10-875"><a href="#cb10-875" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb10-876"><a href="#cb10-876" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb10-877"><a href="#cb10-877" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb10-878"><a href="#cb10-878" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb10-879"><a href="#cb10-879" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb10-880"><a href="#cb10-880" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb10-881"><a href="#cb10-881" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-882"><a href="#cb10-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-883"><a href="#cb10-883" aria-hidden="true" tabindex="-1"></a>plotDotAEZ_new<span class="op">.</span><span class="fu">legend</span>(<span class="st">'color'</span><span class="op">,</span> {<span class="dt">columns</span><span class="op">:</span> <span class="dv">3</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></details><div class="cell-output cell-output-display"><div><div id="ojs-cell-10-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-10-2" data-nodetype="expression"></div></div></div></div><section id="quickinsight-1" class="level3"><h3 data-anchor-id="quickinsight-1"><span><span id="ojs-element-id-10"></span></span></h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb11" data-startfrom="888" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 887"><span id="cb11-888"><a href="#cb11-888" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb11-889"><a href="#cb11-889" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langRoot <span class="op">=</span> nbText<span class="op">;</span></span>
<span id="cb11-890"><a href="#cb11-890" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langBasePath <span class="op">=</span> langRoot<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">meanCropDiffAEZ</span><span class="op">.</span><span class="at">insights</span><span class="op">;</span> <span class="co">// base path for language</span></span>
<span id="cb11-891"><a href="#cb11-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-892"><a href="#cb11-892" aria-hidden="true" tabindex="-1"></a>  <span class="co">// top practice by aez</span></span>
<span id="cb11-893"><a href="#cb11-893" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> selectedCrop <span class="op">=</span> selectCropMeanDiffAEZ<span class="op">.</span><span class="at">field</span><span class="op">;</span></span>
<span id="cb11-894"><a href="#cb11-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-895"><a href="#cb11-895" aria-hidden="true" tabindex="-1"></a>  <span class="co">// crop selection</span></span>
<span id="cb11-896"><a href="#cb11-896" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dataCropNoAEZ <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb11-897"><a href="#cb11-897" aria-hidden="true" tabindex="-1"></a>    data_meanDiff_aezPracticeCrop_new<span class="op">,</span></span>
<span id="cb11-898"><a href="#cb11-898" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Crop</span> <span class="op">===</span> selectedCrop)</span>
<span id="cb11-899"><a href="#cb11-899" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb11-900"><a href="#cb11-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-901"><a href="#cb11-901" aria-hidden="true" tabindex="-1"></a>  <span class="co">// find aez with the largest mean diff</span></span>
<span id="cb11-902"><a href="#cb11-902" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> maxMeanDiff <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb11-903"><a href="#cb11-903" aria-hidden="true" tabindex="-1"></a>    dataCropNoAEZ<span class="op">,</span></span>
<span id="cb11-904"><a href="#cb11-904" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">sliceMax</span>(<span class="dv">1</span><span class="op">,</span> <span class="st">"Mean_Difference"</span>)</span>
<span id="cb11-905"><a href="#cb11-905" aria-hidden="true" tabindex="-1"></a>  )<span class="op">?.</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb11-906"><a href="#cb11-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-907"><a href="#cb11-907" aria-hidden="true" tabindex="-1"></a>  <span class="co">// use aez with max value for no highlight</span></span>
<span id="cb11-908"><a href="#cb11-908" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> selectedAEZ <span class="op">=</span></span>
<span id="cb11-909"><a href="#cb11-909" aria-hidden="true" tabindex="-1"></a>    aezSelect_new<span class="op">.</span><span class="at">field</span> <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> maxMeanDiff<span class="op">.</span><span class="at">AEZ_Class_FAO</span> <span class="op">:</span> aezSelect_new<span class="op">.</span><span class="at">field</span><span class="op">;</span></span>
<span id="cb11-910"><a href="#cb11-910" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> selectedAEZTranslated <span class="op">=</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">AEZ_Class_FAO</span><span class="op">.</span><span class="at">values</span>[selectedAEZ])<span class="op">;</span></span>
<span id="cb11-911"><a href="#cb11-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-912"><a href="#cb11-912" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dataCrop <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb11-913"><a href="#cb11-913" aria-hidden="true" tabindex="-1"></a>    dataCropNoAEZ<span class="op">,</span></span>
<span id="cb11-914"><a href="#cb11-914" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">AEZ_Class_FAO</span> <span class="op">==</span> selectedAEZ)</span>
<span id="cb11-915"><a href="#cb11-915" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb11-916"><a href="#cb11-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-917"><a href="#cb11-917" aria-hidden="true" tabindex="-1"></a>  <span class="co">// selected aez square</span></span>
<span id="cb11-918"><a href="#cb11-918" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> aezSwatchColor <span class="op">=</span></span>
<span id="cb11-919"><a href="#cb11-919" aria-hidden="true" tabindex="-1"></a>    aezColor_new<span class="op">.</span><span class="at">range</span>[aezColor_new<span class="op">.</span><span class="at">domain</span><span class="op">.</span><span class="fu">indexOf</span>(selectedAEZTranslated)]<span class="op">;</span></span>
<span id="cb11-920"><a href="#cb11-920" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> squareSize <span class="op">=</span> <span class="dv">13</span><span class="op">;</span></span>
<span id="cb11-921"><a href="#cb11-921" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> aezSquare <span class="op">=</span> <span class="vs">`&lt;svg width="</span><span class="sc">${</span>squareSize<span class="sc">}</span><span class="vs">" height="</span><span class="sc">${</span>squareSize<span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb11-922"><a href="#cb11-922" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;rect width="</span><span class="sc">${</span>squareSize<span class="sc">}</span><span class="vs">" height="</span><span class="sc">${</span>squareSize<span class="sc">}</span><span class="vs">" fill=</span><span class="sc">${</span>aezSwatchColor<span class="sc">}</span><span class="vs">  /&gt;</span></span>
<span id="cb11-923"><a href="#cb11-923" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/svg&gt;`</span><span class="op">;</span></span>
<span id="cb11-924"><a href="#cb11-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-925"><a href="#cb11-925" aria-hidden="true" tabindex="-1"></a>  <span class="co">// crop overview</span></span>
<span id="cb11-926"><a href="#cb11-926" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> cropOverview <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb11-927"><a href="#cb11-927" aria-hidden="true" tabindex="-1"></a>    dataCrop<span class="op">,</span></span>
<span id="cb11-928"><a href="#cb11-928" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">summarize</span>({</span>
<span id="cb11-929"><a href="#cb11-929" aria-hidden="true" tabindex="-1"></a>      <span class="dt">totalObs</span><span class="op">:</span> T<span class="op">.</span><span class="fu">sum</span>(<span class="st">"N_Obs"</span>)<span class="op">,</span></span>
<span id="cb11-930"><a href="#cb11-930" aria-hidden="true" tabindex="-1"></a>      <span class="dt">totalPractices</span><span class="op">:</span> T<span class="op">.</span><span class="fu">n</span>()</span>
<span id="cb11-931"><a href="#cb11-931" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb11-932"><a href="#cb11-932" aria-hidden="true" tabindex="-1"></a>  )<span class="op">?.</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb11-933"><a href="#cb11-933" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langCropOverview <span class="op">=</span> <span class="fu">_lang</span>(</span>
<span id="cb11-934"><a href="#cb11-934" aria-hidden="true" tabindex="-1"></a>    langBasePath<span class="op">.</span><span class="at">cropOverview</span><span class="op">.</span><span class="at">main</span></span>
<span id="cb11-935"><a href="#cb11-935" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb11-936"><a href="#cb11-936" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langCropOverviewItems <span class="op">=</span> [</span>
<span id="cb11-937"><a href="#cb11-937" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"selectedCrop"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Crop_with_articles</span><span class="op">.</span><span class="at">values</span>[selectedCrop]) }<span class="op">,</span></span>
<span id="cb11-938"><a href="#cb11-938" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"selectedAEZSquare"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> aezSquare }<span class="op">,</span></span>
<span id="cb11-939"><a href="#cb11-939" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"selectedAEZ"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> selectedAEZTranslated }<span class="op">,</span></span>
<span id="cb11-940"><a href="#cb11-940" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalObs"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(cropOverview<span class="op">.</span><span class="at">totalObs</span>) }<span class="op">,</span></span>
<span id="cb11-941"><a href="#cb11-941" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb11-942"><a href="#cb11-942" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalObsString"</span><span class="op">,</span></span>
<span id="cb11-943"><a href="#cb11-943" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb11-944"><a href="#cb11-944" aria-hidden="true" tabindex="-1"></a>        cropOverview<span class="op">.</span><span class="at">totalObs</span> <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb11-945"><a href="#cb11-945" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb11-946"><a href="#cb11-946" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb11-947"><a href="#cb11-947" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb11-948"><a href="#cb11-948" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalPractices"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> cropOverview<span class="op">.</span><span class="at">totalPractices</span> }<span class="op">,</span></span>
<span id="cb11-949"><a href="#cb11-949" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb11-950"><a href="#cb11-950" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalPracticesString"</span><span class="op">,</span></span>
<span id="cb11-951"><a href="#cb11-951" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb11-952"><a href="#cb11-952" aria-hidden="true" tabindex="-1"></a>        cropOverview<span class="op">.</span><span class="at">totalPractices</span> <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb11-953"><a href="#cb11-953" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">practice</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb11-954"><a href="#cb11-954" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">practice</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb11-955"><a href="#cb11-955" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb11-956"><a href="#cb11-956" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb11-957"><a href="#cb11-957" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightCropOverview <span class="op">=</span> langCropOverviewItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb11-958"><a href="#cb11-958" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb11-959"><a href="#cb11-959" aria-hidden="true" tabindex="-1"></a>      Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb11-960"><a href="#cb11-960" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">value</span></span>
<span id="cb11-961"><a href="#cb11-961" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb11-962"><a href="#cb11-962" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> langCropOverview)<span class="op">;</span></span>
<span id="cb11-963"><a href="#cb11-963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-964"><a href="#cb11-964" aria-hidden="true" tabindex="-1"></a>  <span class="co">// positive yield</span></span>
<span id="cb11-965"><a href="#cb11-965" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> cropPositive <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb11-966"><a href="#cb11-966" aria-hidden="true" tabindex="-1"></a>    dataCrop<span class="op">,</span></span>
<span id="cb11-967"><a href="#cb11-967" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Mean_Difference</span> <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb11-968"><a href="#cb11-968" aria-hidden="true" tabindex="-1"></a>  )<span class="op">?.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb11-969"><a href="#cb11-969" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langCropPositive <span class="op">=</span> <span class="fu">_lang</span>(</span>
<span id="cb11-970"><a href="#cb11-970" aria-hidden="true" tabindex="-1"></a>    nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">meanCropDiffAEZ</span><span class="op">.</span><span class="at">insights</span><span class="op">.</span><span class="at">cropPositive</span><span class="op">.</span><span class="at">main</span></span>
<span id="cb11-971"><a href="#cb11-971" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb11-972"><a href="#cb11-972" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langCropSubstring <span class="op">=</span> <span class="vs">`**</span><span class="sc">${</span>cropPositive<span class="sc">}</span><span class="vs">** </span><span class="sc">${</span></span>
<span id="cb11-973"><a href="#cb11-973" aria-hidden="true" tabindex="-1"></a>    cropPositive <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb11-974"><a href="#cb11-974" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> <span class="fu">_lang</span>(</span>
<span id="cb11-975"><a href="#cb11-975" aria-hidden="true" tabindex="-1"></a>          nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">meanCropDiffAEZ</span><span class="op">.</span><span class="at">insights</span><span class="op">.</span><span class="at">cropPositive</span><span class="op">.</span><span class="at">singular</span></span>
<span id="cb11-976"><a href="#cb11-976" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb11-977"><a href="#cb11-977" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> <span class="fu">_lang</span>(</span>
<span id="cb11-978"><a href="#cb11-978" aria-hidden="true" tabindex="-1"></a>          nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">meanCropDiffAEZ</span><span class="op">.</span><span class="at">insights</span><span class="op">.</span><span class="at">cropPositive</span><span class="op">.</span><span class="at">plural</span></span>
<span id="cb11-979"><a href="#cb11-979" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb11-980"><a href="#cb11-980" aria-hidden="true" tabindex="-1"></a>  <span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb11-981"><a href="#cb11-981" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightCropPositive <span class="op">=</span> langCropPositive<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb11-982"><a href="#cb11-982" aria-hidden="true" tabindex="-1"></a>    Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(<span class="st">"cropPositiveText"</span>)<span class="op">,</span></span>
<span id="cb11-983"><a href="#cb11-983" aria-hidden="true" tabindex="-1"></a>    langCropSubstring</span>
<span id="cb11-984"><a href="#cb11-984" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb11-985"><a href="#cb11-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-986"><a href="#cb11-986" aria-hidden="true" tabindex="-1"></a>  <span class="co">// top for selected crop</span></span>
<span id="cb11-987"><a href="#cb11-987" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> n <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// # top crops to include</span></span>
<span id="cb11-988"><a href="#cb11-988" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> topCrop <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb11-989"><a href="#cb11-989" aria-hidden="true" tabindex="-1"></a>    dataCrop<span class="op">,</span></span>
<span id="cb11-990"><a href="#cb11-990" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">sliceMax</span>(n<span class="op">,</span> <span class="st">"Mean_Difference"</span>)<span class="op">,</span></span>
<span id="cb11-991"><a href="#cb11-991" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">arrange</span>(T<span class="op">.</span><span class="fu">desc</span>(<span class="st">"Mean_Difference"</span>))</span>
<span id="cb11-992"><a href="#cb11-992" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb11-993"><a href="#cb11-993" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> diff1 <span class="op">=</span> topCrop<span class="op">?.</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb11-994"><a href="#cb11-994" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> diff2 <span class="op">=</span> topCrop<span class="op">?.</span>[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb11-995"><a href="#cb11-995" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-996"><a href="#cb11-996" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirst <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffFirst</span><span class="op">.</span><span class="at">main</span>)<span class="op">;</span></span>
<span id="cb11-997"><a href="#cb11-997" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirst_incDec <span class="op">=</span></span>
<span id="cb11-998"><a href="#cb11-998" aria-hidden="true" tabindex="-1"></a>    diff1<span class="op">.</span><span class="at">Mean_Difference</span> <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb11-999"><a href="#cb11-999" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">increase</span>)</span>
<span id="cb11-1000"><a href="#cb11-1000" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">decrease</span>)<span class="op">;</span></span>
<span id="cb11-1001"><a href="#cb11-1001" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirst_observations <span class="op">=</span> diff1<span class="op">.</span><span class="at">N_Obs</span><span class="op">;</span></span>
<span id="cb11-1002"><a href="#cb11-1002" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirstItems <span class="op">=</span> [</span>
<span id="cb11-1003"><a href="#cb11-1003" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"practice"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span>[diff1<span class="op">.</span><span class="at">Practice</span>]) }<span class="op">,</span></span>
<span id="cb11-1004"><a href="#cb11-1004" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb11-1005"><a href="#cb11-1005" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"incDec"</span><span class="op">,</span></span>
<span id="cb11-1006"><a href="#cb11-1006" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb11-1007"><a href="#cb11-1007" aria-hidden="true" tabindex="-1"></a>        diff1<span class="op">.</span><span class="at">Mean_Difference</span> <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb11-1008"><a href="#cb11-1008" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">increase</span>)</span>
<span id="cb11-1009"><a href="#cb11-1009" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">decrease</span>)</span>
<span id="cb11-1010"><a href="#cb11-1010" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb11-1011"><a href="#cb11-1011" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"meanDiff"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatNum</span>(diff1<span class="op">.</span><span class="at">Mean_Difference</span>) }<span class="op">,</span></span>
<span id="cb11-1012"><a href="#cb11-1012" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb11-1013"><a href="#cb11-1013" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationCount"</span><span class="op">,</span></span>
<span id="cb11-1014"><a href="#cb11-1014" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(langDiffFirst_observations)</span>
<span id="cb11-1015"><a href="#cb11-1015" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb11-1016"><a href="#cb11-1016" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb11-1017"><a href="#cb11-1017" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationString"</span><span class="op">,</span></span>
<span id="cb11-1018"><a href="#cb11-1018" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb11-1019"><a href="#cb11-1019" aria-hidden="true" tabindex="-1"></a>        langDiffFirst_observations <span class="op">&gt;</span> <span class="dv">1</span></span>
<span id="cb11-1020"><a href="#cb11-1020" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb11-1021"><a href="#cb11-1021" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb11-1022"><a href="#cb11-1022" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb11-1023"><a href="#cb11-1023" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb11-1024"><a href="#cb11-1024" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightDiffFirst <span class="op">=</span> langDiffFirstItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb11-1025"><a href="#cb11-1025" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb11-1026"><a href="#cb11-1026" aria-hidden="true" tabindex="-1"></a>      Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb11-1027"><a href="#cb11-1027" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">value</span></span>
<span id="cb11-1028"><a href="#cb11-1028" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb11-1029"><a href="#cb11-1029" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> langDiffFirst)<span class="op">;</span></span>
<span id="cb11-1030"><a href="#cb11-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-1031"><a href="#cb11-1031" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecond <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffSecond</span><span class="op">.</span><span class="at">main</span>)<span class="op">;</span></span>
<span id="cb11-1032"><a href="#cb11-1032" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecond_incDec <span class="op">=</span></span>
<span id="cb11-1033"><a href="#cb11-1033" aria-hidden="true" tabindex="-1"></a>    diff2<span class="op">?.</span><span class="at">Mean_Difference</span> <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb11-1034"><a href="#cb11-1034" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">increase</span>)</span>
<span id="cb11-1035"><a href="#cb11-1035" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">decrease</span>)<span class="op">;</span></span>
<span id="cb11-1036"><a href="#cb11-1036" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecond_observations <span class="op">=</span> diff2<span class="op">?.</span><span class="at">N_Obs</span><span class="op">;</span></span>
<span id="cb11-1037"><a href="#cb11-1037" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecondItems <span class="op">=</span> [</span>
<span id="cb11-1038"><a href="#cb11-1038" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"practice"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span>[diff2<span class="op">?.</span><span class="at">Practice</span>]) }<span class="op">,</span></span>
<span id="cb11-1039"><a href="#cb11-1039" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb11-1040"><a href="#cb11-1040" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"incDec"</span><span class="op">,</span></span>
<span id="cb11-1041"><a href="#cb11-1041" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb11-1042"><a href="#cb11-1042" aria-hidden="true" tabindex="-1"></a>        diff2<span class="op">?.</span><span class="at">Mean_Difference</span> <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb11-1043"><a href="#cb11-1043" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">increase</span>)</span>
<span id="cb11-1044"><a href="#cb11-1044" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">decrease</span>)</span>
<span id="cb11-1045"><a href="#cb11-1045" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb11-1046"><a href="#cb11-1046" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"meanDiff"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatNum</span>(diff2<span class="op">?.</span><span class="at">Mean_Difference</span>) }<span class="op">,</span></span>
<span id="cb11-1047"><a href="#cb11-1047" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb11-1048"><a href="#cb11-1048" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationCount"</span><span class="op">,</span></span>
<span id="cb11-1049"><a href="#cb11-1049" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(langDiffSecond_observations)</span>
<span id="cb11-1050"><a href="#cb11-1050" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb11-1051"><a href="#cb11-1051" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb11-1052"><a href="#cb11-1052" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationString"</span><span class="op">,</span></span>
<span id="cb11-1053"><a href="#cb11-1053" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb11-1054"><a href="#cb11-1054" aria-hidden="true" tabindex="-1"></a>        langDiffSecond_observations <span class="op">&gt;</span> <span class="dv">1</span></span>
<span id="cb11-1055"><a href="#cb11-1055" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb11-1056"><a href="#cb11-1056" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb11-1057"><a href="#cb11-1057" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb11-1058"><a href="#cb11-1058" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb11-1059"><a href="#cb11-1059" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightDiffSecond <span class="op">=</span> diff2</span>
<span id="cb11-1060"><a href="#cb11-1060" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> langDiffSecondItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb11-1061"><a href="#cb11-1061" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb11-1062"><a href="#cb11-1062" aria-hidden="true" tabindex="-1"></a>          Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb11-1063"><a href="#cb11-1063" aria-hidden="true" tabindex="-1"></a>          item<span class="op">.</span><span class="at">value</span></span>
<span id="cb11-1064"><a href="#cb11-1064" aria-hidden="true" tabindex="-1"></a>        )<span class="op">;</span></span>
<span id="cb11-1065"><a href="#cb11-1065" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span> langDiffSecond)</span>
<span id="cb11-1066"><a href="#cb11-1066" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb11-1067"><a href="#cb11-1067" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-1068"><a href="#cb11-1068" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span>insightCropOverview<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>insightCropPositive<span class="sc">}</span></span>
<span id="cb11-1069"><a href="#cb11-1069" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-1070"><a href="#cb11-1070" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>insightDiffFirst<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>insightDiffSecond <span class="op">??</span> <span class="st">""</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb11-1071"><a href="#cb11-1071" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-11" data-nodetype="expression"></div></div></div></section></section></section><section id="risks" class="level1"><h1><span><span id="ojs-element-id-11"></span></span></h1><p><span><span id="ojs-element-id-12"></span></span></p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb12" data-startfrom="1079" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1078"><span id="cb12-1079"><a href="#cb12-1079" aria-hidden="true" tabindex="-1"></a>viewof selectPractice <span class="op">=</span> {</span>
<span id="cb12-1080"><a href="#cb12-1080" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> d3</span>
<span id="cb12-1081"><a href="#cb12-1081" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">groups</span>(</span>
<span id="cb12-1082"><a href="#cb12-1082" aria-hidden="true" tabindex="-1"></a>      data_lclRisk<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">practice</span>)<span class="op">,</span></span>
<span id="cb12-1083"><a href="#cb12-1083" aria-hidden="true" tabindex="-1"></a>      (d) <span class="kw">=&gt;</span> d</span>
<span id="cb12-1084"><a href="#cb12-1084" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-1085"><a href="#cb12-1085" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d[<span class="dv">0</span>])</span>
<span id="cb12-1086"><a href="#cb12-1086" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">sort</span>()<span class="op">;</span></span>
<span id="cb12-1087"><a href="#cb12-1087" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> options <span class="op">=</span> data<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb12-1088"><a href="#cb12-1088" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> { <span class="dt">field</span><span class="op">:</span> d<span class="op">,</span> <span class="dt">translation</span><span class="op">:</span> td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span>[d] }<span class="op">;</span></span>
<span id="cb12-1089"><a href="#cb12-1089" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span>b) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(a<span class="op">.</span><span class="at">translation</span>) <span class="op">&gt;</span> <span class="fu">_lang</span>(b<span class="op">.</span><span class="at">translation</span>))<span class="op">;</span></span>
<span id="cb12-1090"><a href="#cb12-1090" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> nullValue <span class="op">=</span> {</span>
<span id="cb12-1091"><a href="#cb12-1091" aria-hidden="true" tabindex="-1"></a>    <span class="dt">field</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb12-1092"><a href="#cb12-1092" aria-hidden="true" tabindex="-1"></a>    <span class="dt">translation</span><span class="op">:</span> nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">defaults</span><span class="op">.</span><span class="at">practice</span></span>
<span id="cb12-1093"><a href="#cb12-1093" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb12-1094"><a href="#cb12-1094" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> inputData <span class="op">=</span> [nullValue<span class="op">,</span> <span class="op">...</span>options]<span class="op">;</span></span>
<span id="cb12-1095"><a href="#cb12-1095" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">select</span>(inputData<span class="op">,</span> {</span>
<span id="cb12-1096"><a href="#cb12-1096" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">highlightPractice</span>)<span class="op">,</span></span>
<span id="cb12-1097"><a href="#cb12-1097" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">_lang</span>(x<span class="op">.</span><span class="at">translation</span>)</span>
<span id="cb12-1098"><a href="#cb12-1098" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb12-1099"><a href="#cb12-1099" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-12" data-nodetype="declaration"></div></div></div><div class="cell"><details class="code-fold"><summary>View table code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13" data-startfrom="1106" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1105"><span id="cb13-1106"><a href="#cb13-1106" aria-hidden="true" tabindex="-1"></a>plotRiskBeeswarm <span class="op">=</span> {</span>
<span id="cb13-1107"><a href="#cb13-1107" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> data_lclRisk<span class="op">;</span></span>
<span id="cb13-1108"><a href="#cb13-1108" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langLook <span class="op">=</span> {</span>
<span id="cb13-1109"><a href="#cb13-1109" aria-hidden="true" tabindex="-1"></a>    <span class="dt">caption</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">risks</span><span class="op">.</span><span class="at">plot</span><span class="op">.</span><span class="at">caption</span>)<span class="op">,</span></span>
<span id="cb13-1110"><a href="#cb13-1110" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xLabel</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">risks</span><span class="op">.</span><span class="at">plot</span><span class="op">.</span><span class="at">xLabel</span>)<span class="op">,</span></span>
<span id="cb13-1111"><a href="#cb13-1111" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tooltip</span><span class="op">:</span> {</span>
<span id="cb13-1112"><a href="#cb13-1112" aria-hidden="true" tabindex="-1"></a>      <span class="dt">practice</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb13-1113"><a href="#cb13-1113" aria-hidden="true" tabindex="-1"></a>        <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">practice</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb13-1114"><a href="#cb13-1114" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb13-1115"><a href="#cb13-1115" aria-hidden="true" tabindex="-1"></a>      <span class="dt">combo</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb13-1116"><a href="#cb13-1116" aria-hidden="true" tabindex="-1"></a>        <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">risks</span><span class="op">.</span><span class="at">plot</span><span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">inCombination</span>)</span>
<span id="cb13-1117"><a href="#cb13-1117" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb13-1118"><a href="#cb13-1118" aria-hidden="true" tabindex="-1"></a>      <span class="dt">crop</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb13-1119"><a href="#cb13-1119" aria-hidden="true" tabindex="-1"></a>        <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">crop</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb13-1120"><a href="#cb13-1120" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb13-1121"><a href="#cb13-1121" aria-hidden="true" tabindex="-1"></a>      <span class="dt">obs</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb13-1122"><a href="#cb13-1122" aria-hidden="true" tabindex="-1"></a>        <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb13-1123"><a href="#cb13-1123" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb13-1124"><a href="#cb13-1124" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-1125"><a href="#cb13-1125" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb13-1126"><a href="#cb13-1126" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> _practice <span class="op">=</span> selectPractice<span class="op">.</span><span class="at">field</span><span class="op">;</span></span>
<span id="cb13-1127"><a href="#cb13-1127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-1128"><a href="#cb13-1128" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> plot <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb13-1129"><a href="#cb13-1129" aria-hidden="true" tabindex="-1"></a>    <span class="dt">caption</span><span class="op">:</span> langLook<span class="op">.</span><span class="at">caption</span><span class="op">,</span></span>
<span id="cb13-1130"><a href="#cb13-1130" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb13-1131"><a href="#cb13-1131" aria-hidden="true" tabindex="-1"></a>    width<span class="op">,</span></span>
<span id="cb13-1132"><a href="#cb13-1132" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb13-1133"><a href="#cb13-1133" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb13-1134"><a href="#cb13-1134" aria-hidden="true" tabindex="-1"></a>      <span class="dt">axis</span><span class="op">:</span> <span class="st">"top"</span><span class="op">,</span></span>
<span id="cb13-1135"><a href="#cb13-1135" aria-hidden="true" tabindex="-1"></a>      <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-1136"><a href="#cb13-1136" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb13-1137"><a href="#cb13-1137" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> langLook<span class="op">.</span><span class="at">xLabel</span><span class="op">,</span></span>
<span id="cb13-1138"><a href="#cb13-1138" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span></span>
<span id="cb13-1139"><a href="#cb13-1139" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span></span>
<span id="cb13-1140"><a href="#cb13-1140" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelArrow</span><span class="op">:</span> <span class="st">"none"</span></span>
<span id="cb13-1141"><a href="#cb13-1141" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb13-1142"><a href="#cb13-1142" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb13-1143"><a href="#cb13-1143" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb13-1144"><a href="#cb13-1144" aria-hidden="true" tabindex="-1"></a>      <span class="dt">range</span><span class="op">:</span> colorYellowGreen<span class="op">,</span></span>
<span id="cb13-1145"><a href="#cb13-1145" aria-hidden="true" tabindex="-1"></a>      <span class="dt">legend</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb13-1146"><a href="#cb13-1146" aria-hidden="true" tabindex="-1"></a>      <span class="dt">unknown</span><span class="op">:</span> <span class="st">"#efefef"</span></span>
<span id="cb13-1147"><a href="#cb13-1147" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb13-1148"><a href="#cb13-1148" aria-hidden="true" tabindex="-1"></a>    <span class="dt">r</span><span class="op">:</span> {</span>
<span id="cb13-1149"><a href="#cb13-1149" aria-hidden="true" tabindex="-1"></a>      <span class="dt">range</span><span class="op">:</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">30</span>]</span>
<span id="cb13-1150"><a href="#cb13-1150" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb13-1151"><a href="#cb13-1151" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb13-1152"><a href="#cb13-1152" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(</span>
<span id="cb13-1153"><a href="#cb13-1153" aria-hidden="true" tabindex="-1"></a>        data<span class="op">,</span></span>
<span id="cb13-1154"><a href="#cb13-1154" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">dodgeY</span>(</span>
<span id="cb13-1155"><a href="#cb13-1155" aria-hidden="true" tabindex="-1"></a>          { <span class="dt">anchor</span><span class="op">:</span> <span class="st">"middle"</span> }<span class="op">,</span></span>
<span id="cb13-1156"><a href="#cb13-1156" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb13-1157"><a href="#cb13-1157" aria-hidden="true" tabindex="-1"></a>            <span class="dt">x</span><span class="op">:</span> <span class="st">"value"</span><span class="op">,</span></span>
<span id="cb13-1158"><a href="#cb13-1158" aria-hidden="true" tabindex="-1"></a>            <span class="dt">r</span><span class="op">:</span> <span class="st">"observations"</span><span class="op">,</span></span>
<span id="cb13-1159"><a href="#cb13-1159" aria-hidden="true" tabindex="-1"></a>            <span class="dt">fill</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb13-1160"><a href="#cb13-1160" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (_practice <span class="op">===</span> <span class="kw">null</span>) <span class="cf">return</span> d<span class="op">.</span><span class="at">value</span><span class="op">;</span> <span class="co">// show all practices</span></span>
<span id="cb13-1161"><a href="#cb13-1161" aria-hidden="true" tabindex="-1"></a>              <span class="co">// show highlighted practice only</span></span>
<span id="cb13-1162"><a href="#cb13-1162" aria-hidden="true" tabindex="-1"></a>              <span class="cf">return</span> d<span class="op">.</span><span class="at">practice</span> <span class="op">===</span> _practice <span class="op">?</span> d<span class="op">.</span><span class="at">value</span> <span class="op">:</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb13-1163"><a href="#cb13-1163" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb13-1164"><a href="#cb13-1164" aria-hidden="true" tabindex="-1"></a>            <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#fff"</span><span class="op">,</span></span>
<span id="cb13-1165"><a href="#cb13-1165" aria-hidden="true" tabindex="-1"></a>            <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb13-1166"><a href="#cb13-1166" aria-hidden="true" tabindex="-1"></a>            <span class="dt">channels</span><span class="op">:</span> {</span>
<span id="cb13-1167"><a href="#cb13-1167" aria-hidden="true" tabindex="-1"></a>              <span class="dt">practice</span><span class="op">:</span> {</span>
<span id="cb13-1168"><a href="#cb13-1168" aria-hidden="true" tabindex="-1"></a>                <span class="dt">label</span><span class="op">:</span> langLook<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">practice</span><span class="op">,</span></span>
<span id="cb13-1169"><a href="#cb13-1169" aria-hidden="true" tabindex="-1"></a>                <span class="dt">value</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span>[d<span class="op">.</span><span class="at">practice</span>])</span>
<span id="cb13-1170"><a href="#cb13-1170" aria-hidden="true" tabindex="-1"></a>              }<span class="op">,</span></span>
<span id="cb13-1171"><a href="#cb13-1171" aria-hidden="true" tabindex="-1"></a>              <span class="dt">product</span><span class="op">:</span> {</span>
<span id="cb13-1172"><a href="#cb13-1172" aria-hidden="true" tabindex="-1"></a>                <span class="dt">label</span><span class="op">:</span> langLook<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">crop</span><span class="op">,</span></span>
<span id="cb13-1173"><a href="#cb13-1173" aria-hidden="true" tabindex="-1"></a>                <span class="dt">value</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">product</span></span>
<span id="cb13-1174"><a href="#cb13-1174" aria-hidden="true" tabindex="-1"></a>              }<span class="op">,</span></span>
<span id="cb13-1175"><a href="#cb13-1175" aria-hidden="true" tabindex="-1"></a>              <span class="dt">nObs</span><span class="op">:</span> {</span>
<span id="cb13-1176"><a href="#cb13-1176" aria-hidden="true" tabindex="-1"></a>                <span class="dt">label</span><span class="op">:</span> langLook<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">obs</span><span class="op">,</span></span>
<span id="cb13-1177"><a href="#cb13-1177" aria-hidden="true" tabindex="-1"></a>                <span class="dt">value</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">observations</span></span>
<span id="cb13-1178"><a href="#cb13-1178" aria-hidden="true" tabindex="-1"></a>              }<span class="op">,</span></span>
<span id="cb13-1179"><a href="#cb13-1179" aria-hidden="true" tabindex="-1"></a>              <span class="dt">combo</span><span class="op">:</span> {</span>
<span id="cb13-1180"><a href="#cb13-1180" aria-hidden="true" tabindex="-1"></a>                <span class="dt">label</span><span class="op">:</span> langLook<span class="op">.</span><span class="at">tooltip</span><span class="op">.</span><span class="at">combo</span><span class="op">,</span></span>
<span id="cb13-1181"><a href="#cb13-1181" aria-hidden="true" tabindex="-1"></a>                <span class="dt">value</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb13-1182"><a href="#cb13-1182" aria-hidden="true" tabindex="-1"></a>                  d<span class="op">.</span><span class="at">is_combo</span></span>
<span id="cb13-1183"><a href="#cb13-1183" aria-hidden="true" tabindex="-1"></a>                    <span class="op">?</span> Lang<span class="op">.</span><span class="fu">toTitleCase</span>(<span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">bools</span><span class="op">.</span><span class="at">yes</span>))</span>
<span id="cb13-1184"><a href="#cb13-1184" aria-hidden="true" tabindex="-1"></a>                    <span class="op">:</span> Lang<span class="op">.</span><span class="fu">toTitleCase</span>(<span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">bools</span><span class="op">.</span><span class="at">no</span>))</span>
<span id="cb13-1185"><a href="#cb13-1185" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb13-1186"><a href="#cb13-1186" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb13-1187"><a href="#cb13-1187" aria-hidden="true" tabindex="-1"></a>            <span class="dt">tip</span><span class="op">:</span> {</span>
<span id="cb13-1188"><a href="#cb13-1188" aria-hidden="true" tabindex="-1"></a>              <span class="dt">px</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb13-1189"><a href="#cb13-1189" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> (_practice <span class="op">===</span> <span class="kw">null</span>) <span class="cf">return</span> d<span class="op">.</span><span class="at">value</span><span class="op">;</span> <span class="co">// show all practices</span></span>
<span id="cb13-1190"><a href="#cb13-1190" aria-hidden="true" tabindex="-1"></a>                <span class="co">// show highlighted practice only</span></span>
<span id="cb13-1191"><a href="#cb13-1191" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> d<span class="op">.</span><span class="at">practice</span> <span class="op">===</span> _practice <span class="op">?</span> d<span class="op">.</span><span class="at">value</span> <span class="op">:</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb13-1192"><a href="#cb13-1192" aria-hidden="true" tabindex="-1"></a>              }<span class="op">,</span></span>
<span id="cb13-1193"><a href="#cb13-1193" aria-hidden="true" tabindex="-1"></a>              <span class="dt">maxRadius</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span></span>
<span id="cb13-1194"><a href="#cb13-1194" aria-hidden="true" tabindex="-1"></a>              <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb13-1195"><a href="#cb13-1195" aria-hidden="true" tabindex="-1"></a>                <span class="dt">x</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb13-1196"><a href="#cb13-1196" aria-hidden="true" tabindex="-1"></a>                <span class="dt">y</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb13-1197"><a href="#cb13-1197" aria-hidden="true" tabindex="-1"></a>                <span class="dt">fill</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb13-1198"><a href="#cb13-1198" aria-hidden="true" tabindex="-1"></a>                <span class="dt">r</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb13-1199"><a href="#cb13-1199" aria-hidden="true" tabindex="-1"></a>                <span class="dt">practice</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-1200"><a href="#cb13-1200" aria-hidden="true" tabindex="-1"></a>                <span class="dt">combo</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-1201"><a href="#cb13-1201" aria-hidden="true" tabindex="-1"></a>                <span class="dt">product</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb13-1202"><a href="#cb13-1202" aria-hidden="true" tabindex="-1"></a>                <span class="dt">px</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">formatNum</span>(d)<span class="op">,</span></span>
<span id="cb13-1203"><a href="#cb13-1203" aria-hidden="true" tabindex="-1"></a>                <span class="dt">nObs</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb13-1204"><a href="#cb13-1204" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb13-1205"><a href="#cb13-1205" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb13-1206"><a href="#cb13-1206" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb13-1207"><a href="#cb13-1207" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb13-1208"><a href="#cb13-1208" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb13-1209"><a href="#cb13-1209" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb13-1210"><a href="#cb13-1210" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb13-1211"><a href="#cb13-1211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-1212"><a href="#cb13-1212" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> plot<span class="op">;</span></span>
<span id="cb13-1213"><a href="#cb13-1213" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></details><div class="cell-output cell-output-display"><div id="ojs-cell-13" data-nodetype="declaration"></div></div></div><section id="quickinsight-2" class="level3"><h3 data-anchor-id="quickinsight-2"><span><span id="ojs-element-id-13"></span></span></h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb14" data-startfrom="1220" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1219"><span id="cb14-1220"><a href="#cb14-1220" aria-hidden="true" tabindex="-1"></a>quickInsightsRiskBeeswarm <span class="op">=</span> {</span>
<span id="cb14-1221"><a href="#cb14-1221" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langRoot <span class="op">=</span> nbText<span class="op">;</span></span>
<span id="cb14-1222"><a href="#cb14-1222" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langBasePath <span class="op">=</span> langRoot<span class="op">.</span><span class="at">risks</span><span class="op">.</span><span class="at">insights</span><span class="op">.</span><span class="at">beeswarm</span><span class="op">;</span> <span class="co">// base path for language</span></span>
<span id="cb14-1223"><a href="#cb14-1223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-1224"><a href="#cb14-1224" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> selectedPractice <span class="op">=</span> selectPractice<span class="op">.</span><span class="at">field</span><span class="op">;</span></span>
<span id="cb14-1225"><a href="#cb14-1225" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb14-1226"><a href="#cb14-1226" aria-hidden="true" tabindex="-1"></a>    data_lclRisk<span class="op">,</span></span>
<span id="cb14-1227"><a href="#cb14-1227" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb14-1228"><a href="#cb14-1228" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (selectedPractice <span class="op">==</span> <span class="kw">null</span>) <span class="cf">return</span> d<span class="op">;</span></span>
<span id="cb14-1229"><a href="#cb14-1229" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> d<span class="op">.</span><span class="at">practice</span> <span class="op">==</span> selectedPractice<span class="op">;</span></span>
<span id="cb14-1230"><a href="#cb14-1230" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb14-1231"><a href="#cb14-1231" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb14-1232"><a href="#cb14-1232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-1233"><a href="#cb14-1233" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dataOverview <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb14-1234"><a href="#cb14-1234" aria-hidden="true" tabindex="-1"></a>    data<span class="op">,</span></span>
<span id="cb14-1235"><a href="#cb14-1235" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">summarize</span>({</span>
<span id="cb14-1236"><a href="#cb14-1236" aria-hidden="true" tabindex="-1"></a>      <span class="dt">totalObs</span><span class="op">:</span> T<span class="op">.</span><span class="fu">sum</span>(<span class="st">"observations"</span>)<span class="op">,</span></span>
<span id="cb14-1237"><a href="#cb14-1237" aria-hidden="true" tabindex="-1"></a>      <span class="dt">totalPractices</span><span class="op">:</span> T<span class="op">.</span><span class="fu">count</span>(<span class="st">"practice"</span>)</span>
<span id="cb14-1238"><a href="#cb14-1238" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb14-1239"><a href="#cb14-1239" aria-hidden="true" tabindex="-1"></a>  )<span class="op">?.</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb14-1240"><a href="#cb14-1240" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> numPractices <span class="op">=</span> dataOverview<span class="op">.</span><span class="at">totalPractices</span><span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb14-1241"><a href="#cb14-1241" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDataOverview_selection <span class="op">=</span></span>
<span id="cb14-1242"><a href="#cb14-1242" aria-hidden="true" tabindex="-1"></a>    selectedPractice <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> {<span class="dt">phrase</span><span class="op">:</span> <span class="st">"inTotal"</span><span class="op">,</span> <span class="dt">template</span><span class="op">:</span> <span class="st">"total"</span>} <span class="op">:</span> </span>
<span id="cb14-1243"><a href="#cb14-1243" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">phrase</span><span class="op">:</span> <span class="st">"specificHas"</span><span class="op">,</span> <span class="dt">template</span><span class="op">:</span> <span class="st">"specific"</span>}<span class="op">;</span></span>
<span id="cb14-1244"><a href="#cb14-1244" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDataOverview <span class="op">=</span> <span class="fu">_lang</span>(</span>
<span id="cb14-1245"><a href="#cb14-1245" aria-hidden="true" tabindex="-1"></a>    langBasePath<span class="op">.</span><span class="at">dataOverview</span>[langDataOverview_selection<span class="op">.</span><span class="at">template</span>]<span class="op">,</span></span>
<span id="cb14-1246"><a href="#cb14-1246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-1247"><a href="#cb14-1247" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb14-1248"><a href="#cb14-1248" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDataOverviewItems <span class="op">=</span> [</span>
<span id="cb14-1249"><a href="#cb14-1249" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb14-1250"><a href="#cb14-1250" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"startString"</span><span class="op">,</span></span>
<span id="cb14-1251"><a href="#cb14-1251" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">phrases</span>[langDataOverview_selection<span class="op">.</span><span class="at">phrase</span>])</span>
<span id="cb14-1252"><a href="#cb14-1252" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb14-1253"><a href="#cb14-1253" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalObs"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(dataOverview<span class="op">.</span><span class="at">totalObs</span>) }<span class="op">,</span></span>
<span id="cb14-1254"><a href="#cb14-1254" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb14-1255"><a href="#cb14-1255" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationString"</span><span class="op">,</span></span>
<span id="cb14-1256"><a href="#cb14-1256" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb14-1257"><a href="#cb14-1257" aria-hidden="true" tabindex="-1"></a>        dataOverview<span class="op">.</span><span class="at">totalObs</span> <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb14-1258"><a href="#cb14-1258" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb14-1259"><a href="#cb14-1259" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb14-1260"><a href="#cb14-1260" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb14-1261"><a href="#cb14-1261" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"item"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> selectedPractice }<span class="op">,</span></span>
<span id="cb14-1262"><a href="#cb14-1262" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalPractices"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> numPractices }<span class="op">,</span></span>
<span id="cb14-1263"><a href="#cb14-1263" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb14-1264"><a href="#cb14-1264" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"practicesString"</span><span class="op">,</span></span>
<span id="cb14-1265"><a href="#cb14-1265" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb14-1266"><a href="#cb14-1266" aria-hidden="true" tabindex="-1"></a>        numPractices <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb14-1267"><a href="#cb14-1267" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">practice</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb14-1268"><a href="#cb14-1268" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">practice</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb14-1269"><a href="#cb14-1269" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-1270"><a href="#cb14-1270" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb14-1271"><a href="#cb14-1271" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightDataOverview <span class="op">=</span> langDataOverviewItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb14-1272"><a href="#cb14-1272" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb14-1273"><a href="#cb14-1273" aria-hidden="true" tabindex="-1"></a>      Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb14-1274"><a href="#cb14-1274" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">value</span></span>
<span id="cb14-1275"><a href="#cb14-1275" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb14-1276"><a href="#cb14-1276" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> langDataOverview)<span class="op">;</span></span>
<span id="cb14-1277"><a href="#cb14-1277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-1278"><a href="#cb14-1278" aria-hidden="true" tabindex="-1"></a>  <span class="co">// top for selected crop</span></span>
<span id="cb14-1279"><a href="#cb14-1279" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> n <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// # top crops to include</span></span>
<span id="cb14-1280"><a href="#cb14-1280" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> topCrop <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb14-1281"><a href="#cb14-1281" aria-hidden="true" tabindex="-1"></a>    data<span class="op">,</span></span>
<span id="cb14-1282"><a href="#cb14-1282" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">sliceMax</span>(n<span class="op">,</span> <span class="st">"value"</span>)<span class="op">,</span></span>
<span id="cb14-1283"><a href="#cb14-1283" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">arrange</span>(T<span class="op">.</span><span class="fu">desc</span>(<span class="st">"value"</span>))</span>
<span id="cb14-1284"><a href="#cb14-1284" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb14-1285"><a href="#cb14-1285" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> diff1 <span class="op">=</span> topCrop<span class="op">?.</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb14-1286"><a href="#cb14-1286" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> diff2 <span class="op">=</span> topCrop<span class="op">?.</span>[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb14-1287"><a href="#cb14-1287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-1288"><a href="#cb14-1288" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirst <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffFirst</span><span class="op">.</span><span class="at">main</span>)<span class="op">;</span></span>
<span id="cb14-1289"><a href="#cb14-1289" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirst_observations <span class="op">=</span> diff1<span class="op">.</span><span class="at">observations</span><span class="op">;</span></span>
<span id="cb14-1290"><a href="#cb14-1290" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffFirstItems <span class="op">=</span> [</span>
<span id="cb14-1291"><a href="#cb14-1291" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"practice"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span>[diff1<span class="op">.</span><span class="at">practice</span>]) }<span class="op">,</span></span>
<span id="cb14-1292"><a href="#cb14-1292" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"crop"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Crop_with_articles</span><span class="op">.</span><span class="at">values</span>[diff1<span class="op">.</span><span class="at">product</span>]) }<span class="op">,</span></span>
<span id="cb14-1293"><a href="#cb14-1293" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb14-1294"><a href="#cb14-1294" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"comboString"</span><span class="op">,</span></span>
<span id="cb14-1295"><a href="#cb14-1295" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span> diff1<span class="op">.</span><span class="at">is_combo</span></span>
<span id="cb14-1296"><a href="#cb14-1296" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffGeneral</span><span class="op">.</span><span class="at">combo</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb14-1297"><a href="#cb14-1297" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffGeneral</span><span class="op">.</span><span class="at">combo</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb14-1298"><a href="#cb14-1298" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb14-1299"><a href="#cb14-1299" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"probYield"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatNum</span>(diff1<span class="op">.</span><span class="at">value</span>) }<span class="op">,</span></span>
<span id="cb14-1300"><a href="#cb14-1300" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalObs"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(langDiffFirst_observations) }<span class="op">,</span></span>
<span id="cb14-1301"><a href="#cb14-1301" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb14-1302"><a href="#cb14-1302" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationString"</span><span class="op">,</span></span>
<span id="cb14-1303"><a href="#cb14-1303" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb14-1304"><a href="#cb14-1304" aria-hidden="true" tabindex="-1"></a>        langDiffFirst_observations <span class="op">&gt;</span> <span class="dv">1</span></span>
<span id="cb14-1305"><a href="#cb14-1305" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb14-1306"><a href="#cb14-1306" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb14-1307"><a href="#cb14-1307" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-1308"><a href="#cb14-1308" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb14-1309"><a href="#cb14-1309" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightDiffFirst <span class="op">=</span> langDiffFirstItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb14-1310"><a href="#cb14-1310" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb14-1311"><a href="#cb14-1311" aria-hidden="true" tabindex="-1"></a>      Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb14-1312"><a href="#cb14-1312" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">value</span></span>
<span id="cb14-1313"><a href="#cb14-1313" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb14-1314"><a href="#cb14-1314" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> langDiffFirst)<span class="op">;</span></span>
<span id="cb14-1315"><a href="#cb14-1315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-1316"><a href="#cb14-1316" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecond <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffSecond</span><span class="op">.</span><span class="at">main</span>)<span class="op">;</span></span>
<span id="cb14-1317"><a href="#cb14-1317" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecond_observations <span class="op">=</span> diff2<span class="op">?.</span><span class="at">observations</span><span class="op">;</span></span>
<span id="cb14-1318"><a href="#cb14-1318" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langDiffSecondItems <span class="op">=</span> [</span>
<span id="cb14-1319"><a href="#cb14-1319" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"practice"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Practice</span><span class="op">.</span><span class="at">values</span>[diff2<span class="op">.</span><span class="at">practice</span>]) }<span class="op">,</span></span>
<span id="cb14-1320"><a href="#cb14-1320" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"crop"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">Crop_with_articles</span><span class="op">.</span><span class="at">values</span>[diff2<span class="op">.</span><span class="at">product</span>]) }<span class="op">,</span></span>
<span id="cb14-1321"><a href="#cb14-1321" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb14-1322"><a href="#cb14-1322" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"comboString"</span><span class="op">,</span></span>
<span id="cb14-1323"><a href="#cb14-1323" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span> diff2<span class="op">.</span><span class="at">is_combo</span></span>
<span id="cb14-1324"><a href="#cb14-1324" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffGeneral</span><span class="op">.</span><span class="at">combo</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb14-1325"><a href="#cb14-1325" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">diffGeneral</span><span class="op">.</span><span class="at">combo</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb14-1326"><a href="#cb14-1326" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb14-1327"><a href="#cb14-1327" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"probYield"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatNum</span>(diff2<span class="op">.</span><span class="at">value</span>) }<span class="op">,</span></span>
<span id="cb14-1328"><a href="#cb14-1328" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalObs"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(langDiffSecond_observations) }<span class="op">,</span></span>
<span id="cb14-1329"><a href="#cb14-1329" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb14-1330"><a href="#cb14-1330" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"observationString"</span><span class="op">,</span></span>
<span id="cb14-1331"><a href="#cb14-1331" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span></span>
<span id="cb14-1332"><a href="#cb14-1332" aria-hidden="true" tabindex="-1"></a>        langDiffSecond_observations <span class="op">&gt;</span> <span class="dv">1</span></span>
<span id="cb14-1333"><a href="#cb14-1333" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb14-1334"><a href="#cb14-1334" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb14-1335"><a href="#cb14-1335" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-1336"><a href="#cb14-1336" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb14-1337"><a href="#cb14-1337" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> insightDiffSecond <span class="op">=</span> diff2</span>
<span id="cb14-1338"><a href="#cb14-1338" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> langDiffSecondItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb14-1339"><a href="#cb14-1339" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb14-1340"><a href="#cb14-1340" aria-hidden="true" tabindex="-1"></a>          Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb14-1341"><a href="#cb14-1341" aria-hidden="true" tabindex="-1"></a>          item<span class="op">.</span><span class="at">value</span></span>
<span id="cb14-1342"><a href="#cb14-1342" aria-hidden="true" tabindex="-1"></a>        )<span class="op">;</span></span>
<span id="cb14-1343"><a href="#cb14-1343" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span> langDiffSecond)</span>
<span id="cb14-1344"><a href="#cb14-1344" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb14-1345"><a href="#cb14-1345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-1346"><a href="#cb14-1346" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span>insightDataOverview<span class="sc">}</span></span>
<span id="cb14-1347"><a href="#cb14-1347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-1348"><a href="#cb14-1348" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>insightDiffFirst<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>insightDiffSecond<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb14-1349"><a href="#cb14-1349" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-14" data-nodetype="declaration"></div></div></div></section></section><section id="adoptionFactors" class="level1"><h1><span><span id="ojs-element-id-14"></span></span></h1><p><span><span id="ojs-element-id-15"></span></span></p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb15" data-startfrom="1358" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1357"><span id="cb15-1358"><a href="#cb15-1358" aria-hidden="true" tabindex="-1"></a>viewof dataAdoptionFactors_select <span class="op">=</span> {</span>
<span id="cb15-1359"><a href="#cb15-1359" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> options <span class="op">=</span> [<span class="op">...</span>dataAdoptionFactorsMap<span class="op">.</span><span class="fu">keys</span>()]</span>
<span id="cb15-1360"><a href="#cb15-1360" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb15-1361"><a href="#cb15-1361" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> { <span class="dt">field</span><span class="op">:</span> d<span class="op">,</span> <span class="dt">translation</span><span class="op">:</span> td<span class="op">.</span><span class="at">practices</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d] }<span class="op">;</span></span>
<span id="cb15-1362"><a href="#cb15-1362" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb15-1363"><a href="#cb15-1363" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb15-1364"><a href="#cb15-1364" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (d<span class="op">.</span><span class="at">field</span> <span class="op">==</span> <span class="st">"All practices"</span>)</span>
<span id="cb15-1365"><a href="#cb15-1365" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> { <span class="op">...</span>d<span class="op">,</span> <span class="dt">translation</span><span class="op">:</span> nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">defaults</span><span class="op">.</span><span class="at">practice</span> }<span class="op">;</span></span>
<span id="cb15-1366"><a href="#cb15-1366" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> { <span class="op">...</span>d }<span class="op">;</span></span>
<span id="cb15-1367"><a href="#cb15-1367" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb15-1368"><a href="#cb15-1368" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> sorted <span class="op">=</span> [</span>
<span id="cb15-1369"><a href="#cb15-1369" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>options</span>
<span id="cb15-1370"><a href="#cb15-1370" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">field</span> <span class="op">==</span> <span class="st">"All practices"</span>)<span class="op">,</span></span>
<span id="cb15-1371"><a href="#cb15-1371" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>options</span>
<span id="cb15-1372"><a href="#cb15-1372" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">field</span> <span class="op">!==</span> <span class="st">"All practices"</span>)</span>
<span id="cb15-1373"><a href="#cb15-1373" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(a<span class="op">.</span><span class="at">translation</span>) <span class="op">&gt;</span> <span class="fu">_lang</span>(b<span class="op">.</span><span class="at">translation</span>))</span>
<span id="cb15-1374"><a href="#cb15-1374" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb15-1375"><a href="#cb15-1375" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">select</span>(sorted<span class="op">,</span> {</span>
<span id="cb15-1376"><a href="#cb15-1376" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">practice</span><span class="op">.</span><span class="at">singular</span>)<span class="op">,</span></span>
<span id="cb15-1377"><a href="#cb15-1377" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> (x) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(x<span class="op">.</span><span class="at">translation</span>)</span>
<span id="cb15-1378"><a href="#cb15-1378" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb15-1379"><a href="#cb15-1379" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-1380"><a href="#cb15-1380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-1381"><a href="#cb15-1381" aria-hidden="true" tabindex="-1"></a>viewof radioSortAdoptionFactors <span class="op">=</span> {</span>
<span id="cb15-1382"><a href="#cb15-1382" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> [</span>
<span id="cb15-1383"><a href="#cb15-1383" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb15-1384"><a href="#cb15-1384" aria-hidden="true" tabindex="-1"></a>      <span class="dt">key</span><span class="op">:</span> <span class="st">"observations"</span><span class="op">,</span></span>
<span id="cb15-1385"><a href="#cb15-1385" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">radioSort</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">observations</span>)<span class="op">,</span></span>
<span id="cb15-1386"><a href="#cb15-1386" aria-hidden="true" tabindex="-1"></a>      <span class="dt">channel</span><span class="op">:</span> <span class="st">"total"</span><span class="op">,</span></span>
<span id="cb15-1387"><a href="#cb15-1387" aria-hidden="true" tabindex="-1"></a>      <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb15-1388"><a href="#cb15-1388" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb15-1389"><a href="#cb15-1389" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb15-1390"><a href="#cb15-1390" aria-hidden="true" tabindex="-1"></a>      <span class="dt">key</span><span class="op">:</span> <span class="st">"alpha"</span><span class="op">,</span></span>
<span id="cb15-1391"><a href="#cb15-1391" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">inputs</span><span class="op">.</span><span class="at">radioSort</span><span class="op">.</span><span class="at">fields</span><span class="op">.</span><span class="at">alpha</span>)<span class="op">,</span></span>
<span id="cb15-1392"><a href="#cb15-1392" aria-hidden="true" tabindex="-1"></a>      <span class="dt">channel</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb15-1393"><a href="#cb15-1393" aria-hidden="true" tabindex="-1"></a>      <span class="dt">reverse</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb15-1394"><a href="#cb15-1394" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb15-1395"><a href="#cb15-1395" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb15-1396"><a href="#cb15-1396" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">radio</span>(data<span class="op">,</span> { <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">sortBars</span>)<span class="op">,</span> <span class="dt">format</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">label</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> data<span class="op">.</span><span class="fu">find</span>(x <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">key</span> <span class="op">===</span> <span class="st">'observations'</span>) })<span class="op">;</span></span>
<span id="cb15-1397"><a href="#cb15-1397" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-15-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-15-2" data-nodetype="declaration"></div></div></div></div><div class="cell"><details class="code-fold"><summary>View table code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16" data-startfrom="1403" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1402"><span id="cb16-1403"><a href="#cb16-1403" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb16-1404"><a href="#cb16-1404" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> plotData <span class="op">=</span> dataAdoptionFactorsMap<span class="op">.</span><span class="fu">get</span>(dataAdoptionFactors_select<span class="op">.</span><span class="at">field</span>)<span class="op">;</span></span>
<span id="cb16-1405"><a href="#cb16-1405" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> _fillLookup <span class="op">=</span> adoptionFactorsLookup<span class="op">;</span></span>
<span id="cb16-1406"><a href="#cb16-1406" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> _sorter <span class="op">=</span> radioSortAdoptionFactors<span class="op">;</span></span>
<span id="cb16-1407"><a href="#cb16-1407" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> colorOrder <span class="op">=</span> [</span>
<span id="cb16-1408"><a href="#cb16-1408" aria-hidden="true" tabindex="-1"></a>    _fillLookup[<span class="st">"Negative"</span>]<span class="op">,</span></span>
<span id="cb16-1409"><a href="#cb16-1409" aria-hidden="true" tabindex="-1"></a>    _fillLookup[<span class="st">"Not significant"</span>]<span class="op">,</span></span>
<span id="cb16-1410"><a href="#cb16-1410" aria-hidden="true" tabindex="-1"></a>    _fillLookup[<span class="st">"Positive"</span>]</span>
<span id="cb16-1411"><a href="#cb16-1411" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb16-1412"><a href="#cb16-1412" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> colorRange <span class="op">=</span> [<span class="st">"#EC5A47"</span><span class="op">,</span> <span class="st">"#F4BB21"</span><span class="op">,</span> <span class="st">"#216729"</span>]<span class="op">;</span></span>
<span id="cb16-1413"><a href="#cb16-1413" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> y <span class="op">=</span> (d) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">adoption_factors</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d])<span class="op">;</span></span>
<span id="cb16-1414"><a href="#cb16-1414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-1415"><a href="#cb16-1415" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb16-1416"><a href="#cb16-1416" aria-hidden="true" tabindex="-1"></a>    width<span class="op">,</span></span>
<span id="cb16-1417"><a href="#cb16-1417" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">600</span><span class="op">,</span></span>
<span id="cb16-1418"><a href="#cb16-1418" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">180</span><span class="op">,</span></span>
<span id="cb16-1419"><a href="#cb16-1419" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb16-1420"><a href="#cb16-1420" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb16-1421"><a href="#cb16-1421" aria-hidden="true" tabindex="-1"></a>      <span class="dt">axis</span><span class="op">:</span> <span class="kw">null</span></span>
<span id="cb16-1422"><a href="#cb16-1422" aria-hidden="true" tabindex="-1"></a>      <span class="co">// label: "% Total"</span></span>
<span id="cb16-1423"><a href="#cb16-1423" aria-hidden="true" tabindex="-1"></a>      <span class="co">// labelOffset: 40,</span></span>
<span id="cb16-1424"><a href="#cb16-1424" aria-hidden="true" tabindex="-1"></a>      <span class="co">// labelAnchor: "center"</span></span>
<span id="cb16-1425"><a href="#cb16-1425" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb16-1426"><a href="#cb16-1426" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb16-1427"><a href="#cb16-1427" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb16-1428"><a href="#cb16-1428" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb16-1429"><a href="#cb16-1429" aria-hidden="true" tabindex="-1"></a>      <span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb16-1430"><a href="#cb16-1430" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb16-1431"><a href="#cb16-1431" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb16-1432"><a href="#cb16-1432" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> colorOrder<span class="op">,</span></span>
<span id="cb16-1433"><a href="#cb16-1433" aria-hidden="true" tabindex="-1"></a>      <span class="dt">range</span><span class="op">:</span> colorRange<span class="op">,</span></span>
<span id="cb16-1434"><a href="#cb16-1434" aria-hidden="true" tabindex="-1"></a>      <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb16-1435"><a href="#cb16-1435" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb16-1436"><a href="#cb16-1436" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb16-1437"><a href="#cb16-1437" aria-hidden="true" tabindex="-1"></a>      <span class="co">// main y-axis</span></span>
<span id="cb16-1438"><a href="#cb16-1438" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">axisY</span>({</span>
<span id="cb16-1439"><a href="#cb16-1439" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb16-1440"><a href="#cb16-1440" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb16-1441"><a href="#cb16-1441" aria-hidden="true" tabindex="-1"></a>      <span class="co">// pointer white-out</span></span>
<span id="cb16-1442"><a href="#cb16-1442" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">axisY</span>(</span>
<span id="cb16-1443"><a href="#cb16-1443" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>({</span>
<span id="cb16-1444"><a href="#cb16-1444" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb16-1445"><a href="#cb16-1445" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textStroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb16-1446"><a href="#cb16-1446" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textStrokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb16-1447"><a href="#cb16-1447" aria-hidden="true" tabindex="-1"></a>          <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb16-1448"><a href="#cb16-1448" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb16-1449"><a href="#cb16-1449" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb16-1450"><a href="#cb16-1450" aria-hidden="true" tabindex="-1"></a>      <span class="co">// bold pointer</span></span>
<span id="cb16-1451"><a href="#cb16-1451" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">axisY</span>(</span>
<span id="cb16-1452"><a href="#cb16-1452" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">pointerY</span>({</span>
<span id="cb16-1453"><a href="#cb16-1453" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span></span>
<span id="cb16-1454"><a href="#cb16-1454" aria-hidden="true" tabindex="-1"></a>          <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb16-1455"><a href="#cb16-1455" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb16-1456"><a href="#cb16-1456" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb16-1457"><a href="#cb16-1457" aria-hidden="true" tabindex="-1"></a>      <span class="co">// bars</span></span>
<span id="cb16-1458"><a href="#cb16-1458" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">barX</span>(</span>
<span id="cb16-1459"><a href="#cb16-1459" aria-hidden="true" tabindex="-1"></a>        plotData<span class="op">,</span></span>
<span id="cb16-1460"><a href="#cb16-1460" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">stackX</span>({</span>
<span id="cb16-1461"><a href="#cb16-1461" aria-hidden="true" tabindex="-1"></a>          <span class="dt">x</span><span class="op">:</span> <span class="st">"perc"</span><span class="op">,</span></span>
<span id="cb16-1462"><a href="#cb16-1462" aria-hidden="true" tabindex="-1"></a>          <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">factor</span>)<span class="op">,</span></span>
<span id="cb16-1463"><a href="#cb16-1463" aria-hidden="true" tabindex="-1"></a>          <span class="dt">sort</span><span class="op">:</span> { <span class="dt">y</span><span class="op">:</span> _sorter<span class="op">.</span><span class="at">channel</span><span class="op">,</span> <span class="dt">reverse</span><span class="op">:</span> _sorter<span class="op">.</span><span class="at">reverse</span> }<span class="op">,</span></span>
<span id="cb16-1464"><a href="#cb16-1464" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fill</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> _fillLookup[d<span class="op">.</span><span class="at">direction</span>]<span class="op">,</span></span>
<span id="cb16-1465"><a href="#cb16-1465" aria-hidden="true" tabindex="-1"></a>          <span class="dt">order</span><span class="op">:</span> colorOrder<span class="op">,</span></span>
<span id="cb16-1466"><a href="#cb16-1466" aria-hidden="true" tabindex="-1"></a>          <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#fff"</span><span class="op">,</span></span>
<span id="cb16-1467"><a href="#cb16-1467" aria-hidden="true" tabindex="-1"></a>          <span class="dt">channels</span><span class="op">:</span> {</span>
<span id="cb16-1468"><a href="#cb16-1468" aria-hidden="true" tabindex="-1"></a>            <span class="dt">percentage</span><span class="op">:</span> {</span>
<span id="cb16-1469"><a href="#cb16-1469" aria-hidden="true" tabindex="-1"></a>              <span class="dt">label</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb16-1470"><a href="#cb16-1470" aria-hidden="true" tabindex="-1"></a>                <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">percentage</span><span class="op">.</span><span class="at">singular</span>)</span>
<span id="cb16-1471"><a href="#cb16-1471" aria-hidden="true" tabindex="-1"></a>              )<span class="op">,</span></span>
<span id="cb16-1472"><a href="#cb16-1472" aria-hidden="true" tabindex="-1"></a>              <span class="dt">value</span><span class="op">:</span> <span class="st">"perc"</span></span>
<span id="cb16-1473"><a href="#cb16-1473" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb16-1474"><a href="#cb16-1474" aria-hidden="true" tabindex="-1"></a>            <span class="dt">total</span><span class="op">:</span> <span class="st">"total"</span><span class="op">,</span></span>
<span id="cb16-1475"><a href="#cb16-1475" aria-hidden="true" tabindex="-1"></a>            <span class="dt">n</span><span class="op">:</span> {</span>
<span id="cb16-1476"><a href="#cb16-1476" aria-hidden="true" tabindex="-1"></a>              <span class="dt">label</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(</span>
<span id="cb16-1477"><a href="#cb16-1477" aria-hidden="true" tabindex="-1"></a>                <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">observation</span><span class="op">.</span><span class="at">plural</span>)</span>
<span id="cb16-1478"><a href="#cb16-1478" aria-hidden="true" tabindex="-1"></a>              )<span class="op">,</span></span>
<span id="cb16-1479"><a href="#cb16-1479" aria-hidden="true" tabindex="-1"></a>              <span class="dt">value</span><span class="op">:</span> <span class="st">"n"</span></span>
<span id="cb16-1480"><a href="#cb16-1480" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb16-1481"><a href="#cb16-1481" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb16-1482"><a href="#cb16-1482" aria-hidden="true" tabindex="-1"></a>          <span class="dt">tip</span><span class="op">:</span> {</span>
<span id="cb16-1483"><a href="#cb16-1483" aria-hidden="true" tabindex="-1"></a>            <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb16-1484"><a href="#cb16-1484" aria-hidden="true" tabindex="-1"></a>              <span class="dt">x</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb16-1485"><a href="#cb16-1485" aria-hidden="true" tabindex="-1"></a>              <span class="dt">y</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb16-1486"><a href="#cb16-1486" aria-hidden="true" tabindex="-1"></a>              <span class="dt">fill</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb16-1487"><a href="#cb16-1487" aria-hidden="true" tabindex="-1"></a>              <span class="dt">total</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb16-1488"><a href="#cb16-1488" aria-hidden="true" tabindex="-1"></a>              <span class="dt">percentage</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>d3<span class="op">.</span><span class="fu">format</span>(<span class="st">"d"</span>)(d)<span class="sc">}</span><span class="vs">%`</span><span class="op">,</span></span>
<span id="cb16-1489"><a href="#cb16-1489" aria-hidden="true" tabindex="-1"></a>              <span class="dt">n</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb16-1490"><a href="#cb16-1490" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb16-1491"><a href="#cb16-1491" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb16-1492"><a href="#cb16-1492" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb16-1493"><a href="#cb16-1493" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb16-1494"><a href="#cb16-1494" aria-hidden="true" tabindex="-1"></a>      <span class="fu">markBoldSidebarText</span>(plotData<span class="op">,</span> {</span>
<span id="cb16-1495"><a href="#cb16-1495" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">factor</span>)<span class="op">,</span></span>
<span id="cb16-1496"><a href="#cb16-1496" aria-hidden="true" tabindex="-1"></a>        <span class="dt">text</span><span class="op">:</span> <span class="st">"n"</span><span class="op">,</span></span>
<span id="cb16-1497"><a href="#cb16-1497" aria-hidden="true" tabindex="-1"></a>        <span class="dt">dx</span><span class="op">:</span> <span class="dv">7</span></span>
<span id="cb16-1498"><a href="#cb16-1498" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb16-1499"><a href="#cb16-1499" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb16-1500"><a href="#cb16-1500" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb16-1501"><a href="#cb16-1501" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></details><div class="cell-output cell-output-display"><div id="ojs-cell-16" data-nodetype="expression"></div></div></div><section id="quickinsight-3" class="level3"><h3 data-anchor-id="quickinsight-3"><span><span id="ojs-element-id-16"></span></span></h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb17" data-startfrom="1508" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1507"><span id="cb17-1508"><a href="#cb17-1508" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb17-1509"><a href="#cb17-1509" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langRoot <span class="op">=</span> nbText<span class="op">;</span></span>
<span id="cb17-1510"><a href="#cb17-1510" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langBasePath <span class="op">=</span> langRoot<span class="op">.</span><span class="at">adoptionFactors</span><span class="op">.</span><span class="at">insights</span><span class="op">.</span><span class="at">percBar</span><span class="op">;</span> <span class="co">// base path for language</span></span>
<span id="cb17-1511"><a href="#cb17-1511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1512"><a href="#cb17-1512" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> selectedPractice <span class="op">=</span> dataAdoptionFactors_select<span class="op">.</span><span class="at">field</span><span class="op">;</span></span>
<span id="cb17-1513"><a href="#cb17-1513" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> dataAdoptionFactorsMap<span class="op">.</span><span class="fu">get</span>(selectedPractice)<span class="op">;</span></span>
<span id="cb17-1514"><a href="#cb17-1514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1515"><a href="#cb17-1515" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tl_prac <span class="op">=</span> (prac) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">practices</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[prac])<span class="op">;</span></span>
<span id="cb17-1516"><a href="#cb17-1516" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tl_fact <span class="op">=</span> (fact) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">adoption_factors_with_articles</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[fact])<span class="op">;</span></span>
<span id="cb17-1517"><a href="#cb17-1517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1518"><a href="#cb17-1518" aria-hidden="true" tabindex="-1"></a>  <span class="co">// total observations overview</span></span>
<span id="cb17-1519"><a href="#cb17-1519" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> total <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb17-1520"><a href="#cb17-1520" aria-hidden="true" tabindex="-1"></a>    data<span class="op">,</span></span>
<span id="cb17-1521"><a href="#cb17-1521" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">groupBy</span>(</span>
<span id="cb17-1522"><a href="#cb17-1522" aria-hidden="true" tabindex="-1"></a>      [<span class="st">"practice"</span>]<span class="op">,</span></span>
<span id="cb17-1523"><a href="#cb17-1523" aria-hidden="true" tabindex="-1"></a>      [</span>
<span id="cb17-1524"><a href="#cb17-1524" aria-hidden="true" tabindex="-1"></a>        T<span class="op">.</span><span class="fu">summarize</span>({</span>
<span id="cb17-1525"><a href="#cb17-1525" aria-hidden="true" tabindex="-1"></a>          <span class="dt">totalObservations</span><span class="op">:</span> T<span class="op">.</span><span class="fu">sum</span>(<span class="st">"n"</span>)<span class="op">,</span></span>
<span id="cb17-1526"><a href="#cb17-1526" aria-hidden="true" tabindex="-1"></a>          <span class="dt">factorCount</span><span class="op">:</span> T<span class="op">.</span><span class="fu">count</span>(<span class="st">"factor"</span>)</span>
<span id="cb17-1527"><a href="#cb17-1527" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb17-1528"><a href="#cb17-1528" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb17-1529"><a href="#cb17-1529" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-1530"><a href="#cb17-1530" aria-hidden="true" tabindex="-1"></a>  )[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb17-1531"><a href="#cb17-1531" aria-hidden="true" tabindex="-1"></a>  <span class="co">// const mdTotal =</span></span>
<span id="cb17-1532"><a href="#cb17-1532" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   total.practice == adoptionFactorAllLabel</span></span>
<span id="cb17-1533"><a href="#cb17-1533" aria-hidden="true" tabindex="-1"></a>  <span class="co">//     ? `In total, there are`</span></span>
<span id="cb17-1534"><a href="#cb17-1534" aria-hidden="true" tabindex="-1"></a>  <span class="co">//     : `**${total}** has`;</span></span>
<span id="cb17-1535"><a href="#cb17-1535" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langTotal_selection <span class="op">=</span></span>
<span id="cb17-1536"><a href="#cb17-1536" aria-hidden="true" tabindex="-1"></a>    total<span class="op">.</span><span class="at">practice</span> <span class="op">==</span> adoptionFactorAllLabel <span class="op">?</span> <span class="st">"inTotal"</span> <span class="op">:</span> <span class="st">"specificHas"</span><span class="op">;</span></span>
<span id="cb17-1537"><a href="#cb17-1537" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langTotal <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">overview</span>)<span class="op">;</span></span>
<span id="cb17-1538"><a href="#cb17-1538" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langTotalItems <span class="op">=</span> [</span>
<span id="cb17-1539"><a href="#cb17-1539" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb17-1540"><a href="#cb17-1540" aria-hidden="true" tabindex="-1"></a>      <span class="dt">insertName</span><span class="op">:</span> <span class="st">"startString"</span><span class="op">,</span></span>
<span id="cb17-1541"><a href="#cb17-1541" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">phrases</span>[langTotal_selection])</span>
<span id="cb17-1542"><a href="#cb17-1542" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb17-1543"><a href="#cb17-1543" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalObs"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">formatComma</span>(total<span class="op">.</span><span class="at">totalObservations</span>) }<span class="op">,</span></span>
<span id="cb17-1544"><a href="#cb17-1544" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"item"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">tl_prac</span>(total<span class="op">.</span><span class="at">practice</span>) }<span class="op">,</span></span>
<span id="cb17-1545"><a href="#cb17-1545" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"totalFactors"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> total<span class="op">.</span><span class="at">factorCount</span><span class="op">.</span><span class="at">length</span> }</span>
<span id="cb17-1546"><a href="#cb17-1546" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb17-1547"><a href="#cb17-1547" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> mdOverview <span class="op">=</span> langTotalItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb17-1548"><a href="#cb17-1548" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb17-1549"><a href="#cb17-1549" aria-hidden="true" tabindex="-1"></a>      Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb17-1550"><a href="#cb17-1550" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">value</span></span>
<span id="cb17-1551"><a href="#cb17-1551" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb17-1552"><a href="#cb17-1552" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> langTotal)<span class="op">;</span></span>
<span id="cb17-1553"><a href="#cb17-1553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1554"><a href="#cb17-1554" aria-hidden="true" tabindex="-1"></a>  <span class="co">// total significant sum (needle move)</span></span>
<span id="cb17-1555"><a href="#cb17-1555" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> topNeedleMove <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb17-1556"><a href="#cb17-1556" aria-hidden="true" tabindex="-1"></a>    data<span class="op">,</span></span>
<span id="cb17-1557"><a href="#cb17-1557" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">direction</span> <span class="op">!==</span> <span class="st">"Not significant"</span>)<span class="op">,</span></span>
<span id="cb17-1558"><a href="#cb17-1558" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">groupBy</span>([<span class="st">"factor"</span>]<span class="op">,</span> [T<span class="op">.</span><span class="fu">summarize</span>({ <span class="dt">perc_sig</span><span class="op">:</span> T<span class="op">.</span><span class="fu">sum</span>(<span class="st">"perc"</span>) })])<span class="op">,</span></span>
<span id="cb17-1559"><a href="#cb17-1559" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">arrange</span>(T<span class="op">.</span><span class="fu">desc</span>(<span class="st">"perc_sig"</span>))<span class="op">,</span></span>
<span id="cb17-1560"><a href="#cb17-1560" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">sliceMax</span>(<span class="dv">1</span><span class="op">,</span> <span class="st">"perc_sig"</span>)</span>
<span id="cb17-1561"><a href="#cb17-1561" aria-hidden="true" tabindex="-1"></a>  )[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb17-1562"><a href="#cb17-1562" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langTopNeedle <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">mostImpactfulFactor</span>)<span class="op">;</span></span>
<span id="cb17-1563"><a href="#cb17-1563" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langTopNeedleItems <span class="op">=</span> [</span>
<span id="cb17-1564"><a href="#cb17-1564" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"factor"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">tl_fact</span>(topNeedleMove<span class="op">.</span><span class="at">factor</span>) }<span class="op">,</span></span>
<span id="cb17-1565"><a href="#cb17-1565" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"practice"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">tl_prac</span>(selectedPractice) }<span class="op">,</span></span>
<span id="cb17-1566"><a href="#cb17-1566" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"influence"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">format</span>(<span class="st">"d"</span>)(topNeedleMove<span class="op">.</span><span class="at">perc_sig</span>) }</span>
<span id="cb17-1567"><a href="#cb17-1567" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb17-1568"><a href="#cb17-1568" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> mdTopNeedle <span class="op">=</span> langTopNeedleItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb17-1569"><a href="#cb17-1569" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb17-1570"><a href="#cb17-1570" aria-hidden="true" tabindex="-1"></a>      Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb17-1571"><a href="#cb17-1571" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">value</span></span>
<span id="cb17-1572"><a href="#cb17-1572" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb17-1573"><a href="#cb17-1573" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> langTopNeedle)<span class="op">;</span></span>
<span id="cb17-1574"><a href="#cb17-1574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1575"><a href="#cb17-1575" aria-hidden="true" tabindex="-1"></a>  <span class="co">// high neg influence</span></span>
<span id="cb17-1576"><a href="#cb17-1576" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> largeNegInfluence <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb17-1577"><a href="#cb17-1577" aria-hidden="true" tabindex="-1"></a>    data<span class="op">,</span></span>
<span id="cb17-1578"><a href="#cb17-1578" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">direction</span> <span class="op">==</span> <span class="st">"Negative"</span>)<span class="op">,</span></span>
<span id="cb17-1579"><a href="#cb17-1579" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">sliceMax</span>(<span class="dv">1</span><span class="op">,</span> <span class="st">"perc"</span>)</span>
<span id="cb17-1580"><a href="#cb17-1580" aria-hidden="true" tabindex="-1"></a>  )[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb17-1581"><a href="#cb17-1581" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> largePosInfluence <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb17-1582"><a href="#cb17-1582" aria-hidden="true" tabindex="-1"></a>    data<span class="op">,</span></span>
<span id="cb17-1583"><a href="#cb17-1583" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">direction</span> <span class="op">==</span> <span class="st">"Positive"</span>)<span class="op">,</span></span>
<span id="cb17-1584"><a href="#cb17-1584" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">sliceMax</span>(<span class="dv">1</span><span class="op">,</span> <span class="st">"perc"</span>)</span>
<span id="cb17-1585"><a href="#cb17-1585" aria-hidden="true" tabindex="-1"></a>  )[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb17-1586"><a href="#cb17-1586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1587"><a href="#cb17-1587" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langBigInfluence <span class="op">=</span> <span class="fu">_lang</span>(langBasePath<span class="op">.</span><span class="at">biggestInfluences</span>)</span>
<span id="cb17-1588"><a href="#cb17-1588" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> langBigInfluenceItems <span class="op">=</span> [</span>
<span id="cb17-1589"><a href="#cb17-1589" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"factorNeg"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">tl_fact</span>(largeNegInfluence<span class="op">.</span><span class="at">factor</span>) }<span class="op">,</span></span>
<span id="cb17-1590"><a href="#cb17-1590" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"influenceNeg"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">format</span>(<span class="st">"d"</span>)(largeNegInfluence<span class="op">.</span><span class="at">perc</span>) }<span class="op">,</span></span>
<span id="cb17-1591"><a href="#cb17-1591" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"factorPos"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fu">tl_fact</span>(largePosInfluence<span class="op">.</span><span class="at">factor</span>) }<span class="op">,</span></span>
<span id="cb17-1592"><a href="#cb17-1592" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">insertName</span><span class="op">:</span> <span class="st">"influencePos"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">format</span>(<span class="st">"d"</span>)(largePosInfluence<span class="op">.</span><span class="at">perc</span>) }<span class="op">,</span></span>
<span id="cb17-1593"><a href="#cb17-1593" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb17-1594"><a href="#cb17-1594" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> mdBigInfluence <span class="op">=</span> langBigInfluenceItems<span class="op">.</span><span class="fu">reduce</span>((overview<span class="op">,</span> item) <span class="kw">=&gt;</span> {</span>
<span id="cb17-1595"><a href="#cb17-1595" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overview<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb17-1596"><a href="#cb17-1596" aria-hidden="true" tabindex="-1"></a>      Lang<span class="op">.</span><span class="fu">getRegexForNamedInsertion</span>(item<span class="op">.</span><span class="at">insertName</span>)<span class="op">,</span></span>
<span id="cb17-1597"><a href="#cb17-1597" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">value</span></span>
<span id="cb17-1598"><a href="#cb17-1598" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb17-1599"><a href="#cb17-1599" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> langBigInfluence)<span class="op">;</span></span>
<span id="cb17-1600"><a href="#cb17-1600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1601"><a href="#cb17-1601" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span>mdOverview<span class="sc">}</span></span>
<span id="cb17-1602"><a href="#cb17-1602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1603"><a href="#cb17-1603" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>mdTopNeedle<span class="sc">}</span></span>
<span id="cb17-1604"><a href="#cb17-1604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1605"><a href="#cb17-1605" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>mdBigInfluence<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb17-1606"><a href="#cb17-1606" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-17" data-nodetype="declaration"></div></div></div></section></section><section id="summary" class="level1"><h1><span><span id="ojs-element-id-17"></span></span></h1><p><span><span id="ojs-element-id-18"></span></span></p><p><span><span id="ojs-element-id-19"></span></span></p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb18" data-startfrom="1617" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1616"><span id="cb18-1617"><a href="#cb18-1617" aria-hidden="true" tabindex="-1"></a>viewof selectResourcePractice <span class="op">=</span> {</span>
<span id="cb18-1618"><a href="#cb18-1618" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> _<span class="op">.</span><span class="fu">uniq</span>(csaManuals<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">practice</span>))</span>
<span id="cb18-1619"><a href="#cb18-1619" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb18-1620"><a href="#cb18-1620" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> { <span class="dt">field</span><span class="op">:</span> d<span class="op">,</span> <span class="dt">translation</span><span class="op">:</span> td<span class="op">.</span><span class="at">summaryPractices</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d] }<span class="op">;</span></span>
<span id="cb18-1621"><a href="#cb18-1621" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb18-1622"><a href="#cb18-1622" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(a<span class="op">.</span><span class="at">translation</span>) <span class="op">&gt;</span> <span class="fu">_lang</span>(b<span class="op">.</span><span class="at">translation</span>))<span class="op">;</span></span>
<span id="cb18-1623"><a href="#cb18-1623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-1624"><a href="#cb18-1624" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">select</span>(data<span class="op">,</span> {</span>
<span id="cb18-1625"><a href="#cb18-1625" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">words</span><span class="op">.</span><span class="at">practice</span><span class="op">.</span><span class="at">singular</span>)<span class="op">,</span></span>
<span id="cb18-1626"><a href="#cb18-1626" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">_lang</span>(x<span class="op">.</span><span class="at">translation</span>)<span class="op">,</span></span>
<span id="cb18-1627"><a href="#cb18-1627" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> data<span class="op">.</span><span class="fu">find</span>(x <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">field</span> <span class="op">==</span> <span class="st">"Inorganic Fertilizer"</span>)</span>
<span id="cb18-1628"><a href="#cb18-1628" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb18-1629"><a href="#cb18-1629" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-1630"><a href="#cb18-1630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-1631"><a href="#cb18-1631" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`</span><span class="sc">${</span>csaResourceHtml<span class="sc">}</span><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-18-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-18-2" data-nodetype="expression"></div></div></div></div></section><section id="methods" class="level1"><h1><span><span id="ojs-element-id-20"></span></span></h1><p><span><span id="ojs-element-id-21"></span></span></p><section id="data_sources" class="level2"><h2 data-anchor-id="data_sources"><span><span id="ojs-element-id-22"></span></span></h2><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb19" data-startfrom="1640" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1639"><span id="cb19-1640"><a href="#cb19-1640" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`</span><span class="sc">${</span><span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">methodsSources</span><span class="op">.</span><span class="at">h2DataSourcesSubsection</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-19" data-nodetype="expression"></div></div></div></section><section id="methods-1" class="level2"><h2 data-anchor-id="methods-1"><span><span id="ojs-element-id-23"></span></span></h2><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb20" data-startfrom="1646" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1645"><span id="cb20-1646"><a href="#cb20-1646" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`</span></span>
<span id="cb20-1647"><a href="#cb20-1647" aria-hidden="true" tabindex="-1"></a><span class="vs">### </span><span class="sc">${</span><span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">methodsSources</span><span class="op">.</span><span class="at">h3Era</span>)<span class="sc">}</span></span>
<span id="cb20-1648"><a href="#cb20-1648" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">methodsSources</span><span class="op">.</span><span class="at">h3EraSubsection</span>)<span class="sc">}</span></span>
<span id="cb20-1649"><a href="#cb20-1649" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-20" data-nodetype="expression"></div></div></div></section></section><section id="source-code" class="level1 hidden"><h1 class="hidden">Source code</h1><section id="text-translations-and-language-support" class="level2"><h2 data-anchor-id="text-translations-and-language-support">Text translations and language support</h2><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb21" data-startfrom="1658" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1657"><span id="cb21-1658"><a href="#cb21-1658" aria-hidden="true" tabindex="-1"></a>nbTitle <span class="op">=</span> <span class="fu">_lang</span>({ <span class="dt">en</span><span class="op">:</span> <span class="st">"Discover Solutions"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"Dcouvrir des solutions"</span> })<span class="op">;</span></span>
<span id="cb21-1659"><a href="#cb21-1659" aria-hidden="true" tabindex="-1"></a><span class="co">// h1</span></span>
<span id="cb21-1660"><a href="#cb21-1660" aria-hidden="true" tabindex="-1"></a>Overview <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">overview</span><span class="op">.</span><span class="at">h1</span>)<span class="op">;</span></span>
<span id="cb21-1661"><a href="#cb21-1661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1662"><a href="#cb21-1662" aria-hidden="true" tabindex="-1"></a>Interventions <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">interventions</span><span class="op">.</span><span class="at">h1</span>)<span class="op">;</span></span>
<span id="cb21-1663"><a href="#cb21-1663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1664"><a href="#cb21-1664" aria-hidden="true" tabindex="-1"></a>PracticalImpact <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">meanCropDiff</span><span class="op">.</span><span class="at">h1</span>)<span class="op">;</span></span>
<span id="cb21-1665"><a href="#cb21-1665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1666"><a href="#cb21-1666" aria-hidden="true" tabindex="-1"></a>Risks <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">risks</span><span class="op">.</span><span class="at">h1</span>)<span class="op">;</span></span>
<span id="cb21-1667"><a href="#cb21-1667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1668"><a href="#cb21-1668" aria-hidden="true" tabindex="-1"></a>Factors <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">adoptionFactors</span><span class="op">.</span><span class="at">h1</span>)<span class="op">;</span></span>
<span id="cb21-1669"><a href="#cb21-1669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1670"><a href="#cb21-1670" aria-hidden="true" tabindex="-1"></a>Summary <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">summary</span><span class="op">.</span><span class="at">h1</span>)<span class="op">;</span></span>
<span id="cb21-1671"><a href="#cb21-1671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1672"><a href="#cb21-1672" aria-hidden="true" tabindex="-1"></a>Methods <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">methodsSources</span><span class="op">.</span><span class="at">h1</span>)<span class="op">;</span></span>
<span id="cb21-1673"><a href="#cb21-1673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1674"><a href="#cb21-1674" aria-hidden="true" tabindex="-1"></a><span class="co">// h2</span></span>
<span id="cb21-1675"><a href="#cb21-1675" aria-hidden="true" tabindex="-1"></a>crop_diff <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">meanCropDiff</span><span class="op">.</span><span class="at">h2</span><span class="op">.</span><span class="at">meanDiff</span>)<span class="op">;</span></span>
<span id="cb21-1676"><a href="#cb21-1676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1677"><a href="#cb21-1677" aria-hidden="true" tabindex="-1"></a>crop_diff_aez <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">meanCropDiffAEZ</span><span class="op">.</span><span class="at">h2</span>)<span class="op">;</span></span>
<span id="cb21-1678"><a href="#cb21-1678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1679"><a href="#cb21-1679" aria-hidden="true" tabindex="-1"></a>aez_dif <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">practicalImpact</span><span class="op">.</span><span class="at">meanCropDiffAEZ</span><span class="op">.</span><span class="at">h2</span>)<span class="op">;</span></span>
<span id="cb21-1680"><a href="#cb21-1680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1681"><a href="#cb21-1681" aria-hidden="true" tabindex="-1"></a>data_sources <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">methodsSources</span><span class="op">.</span><span class="at">h2DataSources</span>)<span class="op">;</span></span>
<span id="cb21-1682"><a href="#cb21-1682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1683"><a href="#cb21-1683" aria-hidden="true" tabindex="-1"></a>methods <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">methodsSources</span><span class="op">.</span><span class="at">h2Methods</span>)<span class="op">;</span></span>
<span id="cb21-1684"><a href="#cb21-1684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1685"><a href="#cb21-1685" aria-hidden="true" tabindex="-1"></a>quickInsight <span class="op">=</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">supportNbText</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">quickInsights</span>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-2" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-3" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-4" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-5" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-6" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-7" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-8" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-9" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-10" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-11" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-12" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-13" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-21-14" data-nodetype="declaration"></div></div></div></div><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb22" data-startfrom="1689" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1688"><span id="cb22-1689"><a href="#cb22-1689" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {nbText} <span class="im">from</span> <span class="st">"/data/DiscoverSolutions/nbText.ojs"</span></span>
<span id="cb22-1690"><a href="#cb22-1690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1691"><a href="#cb22-1691" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {lang <span class="im">as</span> Lang } <span class="im">from</span> <span class="st">"/helpers/lang.js"</span></span>
<span id="cb22-1692"><a href="#cb22-1692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1693"><a href="#cb22-1693" aria-hidden="true" tabindex="-1"></a>_lang <span class="op">=</span> <span class="cf">await</span> Lang<span class="op">.</span><span class="fu">lg</span>(language<span class="op">.</span><span class="at">key</span>)</span>
<span id="cb22-1694"><a href="#cb22-1694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1695"><a href="#cb22-1695" aria-hidden="true" tabindex="-1"></a>defaultLangKey <span class="op">=</span> {</span>
<span id="cb22-1696"><a href="#cb22-1696" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> list <span class="op">=</span> languages<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">key</span>)<span class="op">;</span></span>
<span id="cb22-1697"><a href="#cb22-1697" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> defaultKey <span class="op">=</span> <span class="st">"en"</span><span class="op">;</span></span>
<span id="cb22-1698"><a href="#cb22-1698" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> queryParam <span class="op">=</span> <span class="cf">await</span> Lang<span class="op">.</span><span class="fu">getParamFromList</span>({ <span class="dt">name</span><span class="op">:</span> <span class="st">"lang"</span><span class="op">,</span> list })<span class="op">;</span></span>
<span id="cb22-1699"><a href="#cb22-1699" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> queryParam <span class="op">??</span> defaultKey<span class="op">;</span></span>
<span id="cb22-1700"><a href="#cb22-1700" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-1701"><a href="#cb22-1701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1702"><a href="#cb22-1702" aria-hidden="true" tabindex="-1"></a>languages <span class="op">=</span> [</span>
<span id="cb22-1703"><a href="#cb22-1703" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">key</span><span class="op">:</span> <span class="st">"en"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"English"</span><span class="op">,</span> <span class="dt">locale</span><span class="op">:</span> <span class="st">'en-US'</span> }<span class="op">,</span></span>
<span id="cb22-1704"><a href="#cb22-1704" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">key</span><span class="op">:</span> <span class="st">"fr"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Franais"</span><span class="op">,</span> <span class="dt">locale</span><span class="op">:</span> <span class="st">'fr-FR'</span> }</span>
<span id="cb22-1705"><a href="#cb22-1705" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb22-1706"><a href="#cb22-1706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1707"><a href="#cb22-1707" aria-hidden="true" tabindex="-1"></a>viewof language <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>(languages<span class="op">,</span> {</span>
<span id="cb22-1708"><a href="#cb22-1708" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Main language toggle"</span><span class="op">,</span></span>
<span id="cb22-1709"><a href="#cb22-1709" aria-hidden="true" tabindex="-1"></a>  <span class="dt">format</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">key</span><span class="op">,</span></span>
<span id="cb22-1710"><a href="#cb22-1710" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> languages<span class="op">.</span><span class="fu">find</span>((x) <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">key</span> <span class="op">===</span> defaultLangKey)<span class="op">,</span></span>
<span id="cb22-1711"><a href="#cb22-1711" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb22-1712"><a href="#cb22-1712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1713"><a href="#cb22-1713" aria-hidden="true" tabindex="-1"></a><span class="co">// data translation values</span></span>
<span id="cb22-1714"><a href="#cb22-1714" aria-hidden="true" tabindex="-1"></a>td <span class="op">=</span> {</span>
<span id="cb22-1715"><a href="#cb22-1715" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"/data/DiscoverSolutions/translation_v2@1.json"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb22-1716"><a href="#cb22-1716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1717"><a href="#cb22-1717" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* Additions */</span></span>
<span id="cb22-1718"><a href="#cb22-1718" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">practices</span><span class="op">.</span><span class="at">values</span>[<span class="st">"All practices"</span>] <span class="op">=</span> {</span>
<span id="cb22-1719"><a href="#cb22-1719" aria-hidden="true" tabindex="-1"></a>    <span class="dt">en</span><span class="op">:</span> <span class="st">"All practices"</span><span class="op">,</span></span>
<span id="cb22-1720"><a href="#cb22-1720" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fr</span><span class="op">:</span> <span class="st">"Toutes les pratiques"</span></span>
<span id="cb22-1721"><a href="#cb22-1721" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb22-1722"><a href="#cb22-1722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1723"><a href="#cb22-1723" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">summarySystems</span> <span class="op">=</span> {</span>
<span id="cb22-1724"><a href="#cb22-1724" aria-hidden="true" tabindex="-1"></a>    <span class="dt">en</span><span class="op">:</span> <span class="st">"system"</span><span class="op">,</span></span>
<span id="cb22-1725"><a href="#cb22-1725" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fr</span><span class="op">:</span> <span class="st">"systme"</span><span class="op">,</span></span>
<span id="cb22-1726"><a href="#cb22-1726" aria-hidden="true" tabindex="-1"></a>    <span class="dt">values</span><span class="op">:</span> {</span>
<span id="cb22-1727"><a href="#cb22-1727" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Agroforesty</span><span class="op">:</span> {</span>
<span id="cb22-1728"><a href="#cb22-1728" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Agroforestry"</span><span class="op">,</span></span>
<span id="cb22-1729"><a href="#cb22-1729" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Agroforestire"</span></span>
<span id="cb22-1730"><a href="#cb22-1730" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1731"><a href="#cb22-1731" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Cereal-based"</span><span class="op">:</span> {</span>
<span id="cb22-1732"><a href="#cb22-1732" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Cereal-based"</span><span class="op">,</span></span>
<span id="cb22-1733"><a href="#cb22-1733" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">" base de crales"</span></span>
<span id="cb22-1734"><a href="#cb22-1734" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1735"><a href="#cb22-1735" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Cereal-based, Rice-based"</span><span class="op">:</span> {</span>
<span id="cb22-1736"><a href="#cb22-1736" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Cereal-based, Rice-based"</span><span class="op">,</span></span>
<span id="cb22-1737"><a href="#cb22-1737" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">" base de crales,  base de riz"</span></span>
<span id="cb22-1738"><a href="#cb22-1738" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1739"><a href="#cb22-1739" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Maize, Napier grass, Desmodium legume"</span><span class="op">:</span> {</span>
<span id="cb22-1740"><a href="#cb22-1740" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Maize, Napier grass, Desmodium legume"</span><span class="op">,</span></span>
<span id="cb22-1741"><a href="#cb22-1741" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Mas, herbe Napier, lgumineuse Desmodium"</span></span>
<span id="cb22-1742"><a href="#cb22-1742" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1743"><a href="#cb22-1743" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Maize, Other"</span><span class="op">:</span> {</span>
<span id="cb22-1744"><a href="#cb22-1744" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Maize, Other"</span><span class="op">,</span></span>
<span id="cb22-1745"><a href="#cb22-1745" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Mas, autre"</span></span>
<span id="cb22-1746"><a href="#cb22-1746" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1747"><a href="#cb22-1747" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Rice-based"</span><span class="op">:</span> {</span>
<span id="cb22-1748"><a href="#cb22-1748" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Rice-based"</span><span class="op">,</span></span>
<span id="cb22-1749"><a href="#cb22-1749" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">" base de riz"</span></span>
<span id="cb22-1750"><a href="#cb22-1750" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1751"><a href="#cb22-1751" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Unspecified</span><span class="op">:</span> {</span>
<span id="cb22-1752"><a href="#cb22-1752" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Unspecified"</span><span class="op">,</span></span>
<span id="cb22-1753"><a href="#cb22-1753" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Non spcifi"</span></span>
<span id="cb22-1754"><a href="#cb22-1754" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1755"><a href="#cb22-1755" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Vegetables, Fruits, Rice"</span><span class="op">:</span> {</span>
<span id="cb22-1756"><a href="#cb22-1756" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Vegetables, Fruits, Rice"</span><span class="op">,</span></span>
<span id="cb22-1757"><a href="#cb22-1757" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Lgumes, Fruits, Riz"</span></span>
<span id="cb22-1758"><a href="#cb22-1758" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb22-1759"><a href="#cb22-1759" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb22-1760"><a href="#cb22-1760" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb22-1761"><a href="#cb22-1761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1762"><a href="#cb22-1762" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">summaryPractices</span> <span class="op">=</span> {</span>
<span id="cb22-1763"><a href="#cb22-1763" aria-hidden="true" tabindex="-1"></a>    <span class="dt">en</span><span class="op">:</span> <span class="st">"Practice"</span><span class="op">,</span></span>
<span id="cb22-1764"><a href="#cb22-1764" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fr</span><span class="op">:</span> <span class="st">"Pratique"</span><span class="op">,</span></span>
<span id="cb22-1765"><a href="#cb22-1765" aria-hidden="true" tabindex="-1"></a>    <span class="dt">values</span><span class="op">:</span> {</span>
<span id="cb22-1766"><a href="#cb22-1766" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Agroforestry Fallow"</span><span class="op">:</span> {</span>
<span id="cb22-1767"><a href="#cb22-1767" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Agroforestry Fallow"</span><span class="op">,</span></span>
<span id="cb22-1768"><a href="#cb22-1768" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Jachre agroforestire"</span></span>
<span id="cb22-1769"><a href="#cb22-1769" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1770"><a href="#cb22-1770" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Agroforestry Pruning"</span><span class="op">:</span> {</span>
<span id="cb22-1771"><a href="#cb22-1771" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Agroforestry Pruning"</span><span class="op">,</span></span>
<span id="cb22-1772"><a href="#cb22-1772" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Taille agroforestire"</span></span>
<span id="cb22-1773"><a href="#cb22-1773" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1774"><a href="#cb22-1774" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Alleycropping</span><span class="op">:</span> {</span>
<span id="cb22-1775"><a href="#cb22-1775" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Alleycropping"</span><span class="op">,</span></span>
<span id="cb22-1776"><a href="#cb22-1776" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Culture en alles"</span></span>
<span id="cb22-1777"><a href="#cb22-1777" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1778"><a href="#cb22-1778" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Biochar</span><span class="op">:</span> {</span>
<span id="cb22-1779"><a href="#cb22-1779" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Biochar"</span><span class="op">,</span></span>
<span id="cb22-1780"><a href="#cb22-1780" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Biochar"</span></span>
<span id="cb22-1781"><a href="#cb22-1781" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1782"><a href="#cb22-1782" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Boundary Planting"</span><span class="op">:</span> {</span>
<span id="cb22-1783"><a href="#cb22-1783" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Boundary Planting"</span><span class="op">,</span></span>
<span id="cb22-1784"><a href="#cb22-1784" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Plantation en bordure"</span></span>
<span id="cb22-1785"><a href="#cb22-1785" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1786"><a href="#cb22-1786" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Composting</span><span class="op">:</span> {</span>
<span id="cb22-1787"><a href="#cb22-1787" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Composting"</span><span class="op">,</span></span>
<span id="cb22-1788"><a href="#cb22-1788" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Compostage"</span></span>
<span id="cb22-1789"><a href="#cb22-1789" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1790"><a href="#cb22-1790" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Crop Residue Incorporation"</span><span class="op">:</span> {</span>
<span id="cb22-1791"><a href="#cb22-1791" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Crop Residue Incorporation"</span><span class="op">,</span></span>
<span id="cb22-1792"><a href="#cb22-1792" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Incorporation des rsidus de rcolte"</span></span>
<span id="cb22-1793"><a href="#cb22-1793" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1794"><a href="#cb22-1794" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Crop Residue Management"</span><span class="op">:</span> {</span>
<span id="cb22-1795"><a href="#cb22-1795" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Crop Residue Management"</span><span class="op">,</span></span>
<span id="cb22-1796"><a href="#cb22-1796" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Gestion des rsidus de rcolte"</span></span>
<span id="cb22-1797"><a href="#cb22-1797" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1798"><a href="#cb22-1798" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Crop Rotation"</span><span class="op">:</span> {</span>
<span id="cb22-1799"><a href="#cb22-1799" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Crop Rotation"</span><span class="op">,</span></span>
<span id="cb22-1800"><a href="#cb22-1800" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Rotation des cultures"</span></span>
<span id="cb22-1801"><a href="#cb22-1801" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1802"><a href="#cb22-1802" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Deficit Irrigation"</span><span class="op">:</span> {</span>
<span id="cb22-1803"><a href="#cb22-1803" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Deficit Irrigation"</span><span class="op">,</span></span>
<span id="cb22-1804"><a href="#cb22-1804" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Irrigation dficitaire"</span></span>
<span id="cb22-1805"><a href="#cb22-1805" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1806"><a href="#cb22-1806" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Green Manure"</span><span class="op">:</span> {</span>
<span id="cb22-1807"><a href="#cb22-1807" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Green Manure"</span><span class="op">,</span></span>
<span id="cb22-1808"><a href="#cb22-1808" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Engrais vert"</span></span>
<span id="cb22-1809"><a href="#cb22-1809" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1810"><a href="#cb22-1810" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Improved Fallows"</span><span class="op">:</span> {</span>
<span id="cb22-1811"><a href="#cb22-1811" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Improved Fallows"</span><span class="op">,</span></span>
<span id="cb22-1812"><a href="#cb22-1812" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Jachres amliores"</span></span>
<span id="cb22-1813"><a href="#cb22-1813" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1814"><a href="#cb22-1814" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Improved Varieties"</span><span class="op">:</span> {</span>
<span id="cb22-1815"><a href="#cb22-1815" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Improved Varieties"</span><span class="op">,</span></span>
<span id="cb22-1816"><a href="#cb22-1816" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Varits amliores"</span></span>
<span id="cb22-1817"><a href="#cb22-1817" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1818"><a href="#cb22-1818" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Inorganic Fertilizer"</span><span class="op">:</span> {</span>
<span id="cb22-1819"><a href="#cb22-1819" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Inorganic Fertilizer"</span><span class="op">,</span></span>
<span id="cb22-1820"><a href="#cb22-1820" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Engrais inorganique"</span></span>
<span id="cb22-1821"><a href="#cb22-1821" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1822"><a href="#cb22-1822" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Intercropping</span><span class="op">:</span> {</span>
<span id="cb22-1823"><a href="#cb22-1823" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Intercropping"</span><span class="op">,</span></span>
<span id="cb22-1824"><a href="#cb22-1824" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Culture intercalaire"</span></span>
<span id="cb22-1825"><a href="#cb22-1825" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1826"><a href="#cb22-1826" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Mulching</span><span class="op">:</span> {</span>
<span id="cb22-1827"><a href="#cb22-1827" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Mulching"</span><span class="op">,</span></span>
<span id="cb22-1828"><a href="#cb22-1828" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Paillage"</span></span>
<span id="cb22-1829"><a href="#cb22-1829" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1830"><a href="#cb22-1830" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Organic Fertilizer"</span><span class="op">:</span> {</span>
<span id="cb22-1831"><a href="#cb22-1831" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Organic Fertilizer"</span><span class="op">,</span></span>
<span id="cb22-1832"><a href="#cb22-1832" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Engrais organique"</span></span>
<span id="cb22-1833"><a href="#cb22-1833" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1834"><a href="#cb22-1834" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Other Agroforestry"</span><span class="op">:</span> {</span>
<span id="cb22-1835"><a href="#cb22-1835" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Other Agroforestry"</span><span class="op">,</span></span>
<span id="cb22-1836"><a href="#cb22-1836" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Autre agroforestire"</span></span>
<span id="cb22-1837"><a href="#cb22-1837" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1838"><a href="#cb22-1838" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Parklands</span><span class="op">:</span> {</span>
<span id="cb22-1839"><a href="#cb22-1839" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Parklands"</span><span class="op">,</span></span>
<span id="cb22-1840"><a href="#cb22-1840" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Parcs agroforestiers"</span></span>
<span id="cb22-1841"><a href="#cb22-1841" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1842"><a href="#cb22-1842" aria-hidden="true" tabindex="-1"></a>      <span class="st">"pH Control"</span><span class="op">:</span> {</span>
<span id="cb22-1843"><a href="#cb22-1843" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"pH Control"</span><span class="op">,</span></span>
<span id="cb22-1844"><a href="#cb22-1844" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Contrle du pH"</span></span>
<span id="cb22-1845"><a href="#cb22-1845" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1846"><a href="#cb22-1846" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Silvopasture</span><span class="op">:</span> {</span>
<span id="cb22-1847"><a href="#cb22-1847" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Silvopasture"</span><span class="op">,</span></span>
<span id="cb22-1848"><a href="#cb22-1848" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Sylvopastoralisme"</span></span>
<span id="cb22-1849"><a href="#cb22-1849" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1850"><a href="#cb22-1850" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Supplemental Irrigation"</span><span class="op">:</span> {</span>
<span id="cb22-1851"><a href="#cb22-1851" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Supplemental Irrigation"</span><span class="op">,</span></span>
<span id="cb22-1852"><a href="#cb22-1852" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Irrigation supplmentaire"</span></span>
<span id="cb22-1853"><a href="#cb22-1853" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1854"><a href="#cb22-1854" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Tillage Management"</span><span class="op">:</span> {</span>
<span id="cb22-1855"><a href="#cb22-1855" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Tillage Management"</span><span class="op">,</span></span>
<span id="cb22-1856"><a href="#cb22-1856" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Gestion du travail du sol"</span></span>
<span id="cb22-1857"><a href="#cb22-1857" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1858"><a href="#cb22-1858" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Water Harvesting"</span><span class="op">:</span> {</span>
<span id="cb22-1859"><a href="#cb22-1859" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Water Harvesting"</span><span class="op">,</span></span>
<span id="cb22-1860"><a href="#cb22-1860" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Collecte des eaux"</span></span>
<span id="cb22-1861"><a href="#cb22-1861" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb22-1862"><a href="#cb22-1862" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb22-1863"><a href="#cb22-1863" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb22-1864"><a href="#cb22-1864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1865"><a href="#cb22-1865" aria-hidden="true" tabindex="-1"></a>  <span class="co">// adoption factors, with articles</span></span>
<span id="cb22-1866"><a href="#cb22-1866" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">adoption_factors_with_articles</span> <span class="op">=</span> {</span>
<span id="cb22-1867"><a href="#cb22-1867" aria-hidden="true" tabindex="-1"></a>    <span class="dt">en</span><span class="op">:</span> <span class="st">"adoption_factors"</span><span class="op">,</span></span>
<span id="cb22-1868"><a href="#cb22-1868" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fr</span><span class="op">:</span> <span class="st">"facteurs_dadoption"</span><span class="op">,</span></span>
<span id="cb22-1869"><a href="#cb22-1869" aria-hidden="true" tabindex="-1"></a>    <span class="dt">values</span><span class="op">:</span> {</span>
<span id="cb22-1870"><a href="#cb22-1870" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Access to credit"</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"Access to credit"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"L'Accs au crdit"</span> }<span class="op">,</span></span>
<span id="cb22-1871"><a href="#cb22-1871" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Access to information"</span><span class="op">:</span> {</span>
<span id="cb22-1872"><a href="#cb22-1872" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Access to information"</span><span class="op">,</span></span>
<span id="cb22-1873"><a href="#cb22-1873" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"L'Accs  l'information"</span></span>
<span id="cb22-1874"><a href="#cb22-1874" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1875"><a href="#cb22-1875" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Availability of labor"</span><span class="op">:</span> {</span>
<span id="cb22-1876"><a href="#cb22-1876" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Availability of labor"</span><span class="op">,</span></span>
<span id="cb22-1877"><a href="#cb22-1877" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"La Disponibilit de la main-d'uvre"</span></span>
<span id="cb22-1878"><a href="#cb22-1878" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1879"><a href="#cb22-1879" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Biophyiscal factors"</span><span class="op">:</span> {</span>
<span id="cb22-1880"><a href="#cb22-1880" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Biophyiscal factors"</span><span class="op">,</span></span>
<span id="cb22-1881"><a href="#cb22-1881" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Les Facteurs biophysiques"</span></span>
<span id="cb22-1882"><a href="#cb22-1882" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1883"><a href="#cb22-1883" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Changes in weather"</span><span class="op">:</span> {</span>
<span id="cb22-1884"><a href="#cb22-1884" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Changes in weather"</span><span class="op">,</span></span>
<span id="cb22-1885"><a href="#cb22-1885" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"Les Changements climatiques"</span></span>
<span id="cb22-1886"><a href="#cb22-1886" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1887"><a href="#cb22-1887" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Distance to market"</span><span class="op">:</span> {</span>
<span id="cb22-1888"><a href="#cb22-1888" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Distance to market"</span><span class="op">,</span></span>
<span id="cb22-1889"><a href="#cb22-1889" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"La Distance au march"</span></span>
<span id="cb22-1890"><a href="#cb22-1890" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1891"><a href="#cb22-1891" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Exposure to risks and shocks"</span><span class="op">:</span> {</span>
<span id="cb22-1892"><a href="#cb22-1892" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Exposure to risks and shocks"</span><span class="op">,</span></span>
<span id="cb22-1893"><a href="#cb22-1893" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"L'Exposition aux risques et chocs"</span></span>
<span id="cb22-1894"><a href="#cb22-1894" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1895"><a href="#cb22-1895" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Other</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"Other"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"Autre"</span> }<span class="op">,</span></span>
<span id="cb22-1896"><a href="#cb22-1896" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Resource endowments"</span><span class="op">:</span> {</span>
<span id="cb22-1897"><a href="#cb22-1897" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Resource endowments"</span><span class="op">,</span></span>
<span id="cb22-1898"><a href="#cb22-1898" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"La Dotation en ressources"</span></span>
<span id="cb22-1899"><a href="#cb22-1899" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1900"><a href="#cb22-1900" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Secure tenure"</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"Secure tenure"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"La Tenure scurise"</span> }<span class="op">,</span></span>
<span id="cb22-1901"><a href="#cb22-1901" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Social capital"</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"Social capital"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"La Capital social"</span> }<span class="op">,</span></span>
<span id="cb22-1902"><a href="#cb22-1902" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Socio-demographics"</span><span class="op">:</span> {</span>
<span id="cb22-1903"><a href="#cb22-1903" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"Socio-demographics"</span><span class="op">,</span></span>
<span id="cb22-1904"><a href="#cb22-1904" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"La Socio-dmographie"</span></span>
<span id="cb22-1905"><a href="#cb22-1905" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb22-1906"><a href="#cb22-1906" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb22-1907"><a href="#cb22-1907" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb22-1908"><a href="#cb22-1908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1909"><a href="#cb22-1909" aria-hidden="true" tabindex="-1"></a>  <span class="co">// crop articles</span></span>
<span id="cb22-1910"><a href="#cb22-1910" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">Crop_with_articles</span> <span class="op">=</span> {</span>
<span id="cb22-1911"><a href="#cb22-1911" aria-hidden="true" tabindex="-1"></a>    <span class="dt">en</span><span class="op">:</span> <span class="st">"crop_with_articles"</span><span class="op">,</span></span>
<span id="cb22-1912"><a href="#cb22-1912" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fr</span><span class="op">:</span> <span class="st">"crop_with_articles"</span><span class="op">,</span></span>
<span id="cb22-1913"><a href="#cb22-1913" aria-hidden="true" tabindex="-1"></a>    <span class="dt">values</span><span class="op">:</span> {</span>
<span id="cb22-1914"><a href="#cb22-1914" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Maize</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"maize"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le mas"</span> }<span class="op">,</span></span>
<span id="cb22-1915"><a href="#cb22-1915" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Rice</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"rice"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le riz"</span> }<span class="op">,</span></span>
<span id="cb22-1916"><a href="#cb22-1916" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Pearl Millet"</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"pearl millet"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le millet perl"</span> }<span class="op">,</span></span>
<span id="cb22-1917"><a href="#cb22-1917" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Sorghum</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"sorghum"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le sorgho"</span> }<span class="op">,</span></span>
<span id="cb22-1918"><a href="#cb22-1918" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Cowpea</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"cowpea"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le nib"</span> }<span class="op">,</span></span>
<span id="cb22-1919"><a href="#cb22-1919" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Common Bean"</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"common bean"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le haricot commun"</span> }<span class="op">,</span></span>
<span id="cb22-1920"><a href="#cb22-1920" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Soybean</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"soybean"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le soja"</span> }<span class="op">,</span></span>
<span id="cb22-1921"><a href="#cb22-1921" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Cassava</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"cassava"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le manioc"</span> }<span class="op">,</span></span>
<span id="cb22-1922"><a href="#cb22-1922" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Groundnut</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"groundnut"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"l'arachide"</span> }<span class="op">,</span></span>
<span id="cb22-1923"><a href="#cb22-1923" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Wheat</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"wheat"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le bl"</span> }<span class="op">,</span></span>
<span id="cb22-1924"><a href="#cb22-1924" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Yam</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"yam"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"l'igname"</span> }<span class="op">,</span></span>
<span id="cb22-1925"><a href="#cb22-1925" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Cotton</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"cotton"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"coton"</span> }<span class="op">,</span></span>
<span id="cb22-1926"><a href="#cb22-1926" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Teff</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"teff"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le teff"</span> }<span class="op">,</span></span>
<span id="cb22-1927"><a href="#cb22-1927" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Tomato</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"tomato"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"la tomate"</span> }<span class="op">,</span></span>
<span id="cb22-1928"><a href="#cb22-1928" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Potato</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"potato"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"la pomme de terre"</span> }<span class="op">,</span></span>
<span id="cb22-1929"><a href="#cb22-1929" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Sugar Cane"</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"sugar cane"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"la canne  sucre"</span> }<span class="op">,</span></span>
<span id="cb22-1930"><a href="#cb22-1930" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Pigeon Pea"</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"pigeon pea"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le pois cajan"</span> }<span class="op">,</span></span>
<span id="cb22-1931"><a href="#cb22-1931" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Chickpea</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"chickpea"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le pois chiche"</span> }<span class="op">,</span></span>
<span id="cb22-1932"><a href="#cb22-1932" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Okra</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"okra"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le gombo"</span> }<span class="op">,</span></span>
<span id="cb22-1933"><a href="#cb22-1933" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Sweet Potato"</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"sweet potato"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"la patate douce"</span> }<span class="op">,</span></span>
<span id="cb22-1934"><a href="#cb22-1934" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Fodder Legume"</span><span class="op">:</span> {</span>
<span id="cb22-1935"><a href="#cb22-1935" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"fodder legume"</span><span class="op">,</span></span>
<span id="cb22-1936"><a href="#cb22-1936" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"la lgumineuse fourragre"</span></span>
<span id="cb22-1937"><a href="#cb22-1937" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1938"><a href="#cb22-1938" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Barley</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"barley"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"l'orge"</span> }<span class="op">,</span></span>
<span id="cb22-1939"><a href="#cb22-1939" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Olive</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"olive"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"l'olive"</span> }<span class="op">,</span></span>
<span id="cb22-1940"><a href="#cb22-1940" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Cabbage</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"cabbage"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le chou"</span> }<span class="op">,</span></span>
<span id="cb22-1941"><a href="#cb22-1941" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Banana Sweet"</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"banana sweet"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"la banane douce"</span> }<span class="op">,</span></span>
<span id="cb22-1942"><a href="#cb22-1942" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Rape</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"rape"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le colza"</span> }<span class="op">,</span></span>
<span id="cb22-1943"><a href="#cb22-1943" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Sunflower</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"sunflower"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le tournesol"</span> }<span class="op">,</span></span>
<span id="cb22-1944"><a href="#cb22-1944" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Cooking Banana"</span><span class="op">:</span> {</span>
<span id="cb22-1945"><a href="#cb22-1945" aria-hidden="true" tabindex="-1"></a>        <span class="dt">en</span><span class="op">:</span> <span class="st">"cooking banana"</span><span class="op">,</span></span>
<span id="cb22-1946"><a href="#cb22-1946" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fr</span><span class="op">:</span> <span class="st">"la banane de cuisine"</span></span>
<span id="cb22-1947"><a href="#cb22-1947" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb22-1948"><a href="#cb22-1948" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Sesame</span><span class="op">:</span> { <span class="dt">en</span><span class="op">:</span> <span class="st">"sesame"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"le ssame"</span> }</span>
<span id="cb22-1949"><a href="#cb22-1949" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb22-1950"><a href="#cb22-1950" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb22-1951"><a href="#cb22-1951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-1952"><a href="#cb22-1952" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> data<span class="op">;</span></span>
<span id="cb22-1953"><a href="#cb22-1953" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-22-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-22-2" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-22-3" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-22-4" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-22-5" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-22-6" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-22-7" data-nodetype="declaration"></div></div></div></div></section><section id="formatting-functions" class="level2"><h2 data-anchor-id="formatting-functions">Formatting functions</h2><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb23" data-startfrom="1960" data-source-offset="-32"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1959"><span id="cb23-1960"><a href="#cb23-1960" aria-hidden="true" tabindex="-1"></a>formatNumCompactLong <span class="op">=</span> <span class="kw">function</span> (number<span class="op">,</span> { locale <span class="op">=</span> <span class="st">"en-US"</span> } <span class="op">=</span> {}) {</span>
<span id="cb23-1961"><a href="#cb23-1961" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Intl</span><span class="op">.</span><span class="fu">NumberFormat</span>(locale<span class="op">,</span> {</span>
<span id="cb23-1962"><a href="#cb23-1962" aria-hidden="true" tabindex="-1"></a>    <span class="dt">notation</span><span class="op">:</span> <span class="st">"compact"</span><span class="op">,</span></span>
<span id="cb23-1963"><a href="#cb23-1963" aria-hidden="true" tabindex="-1"></a>    <span class="dt">compactDisplay</span><span class="op">:</span> <span class="st">"long"</span><span class="op">,</span></span>
<span id="cb23-1964"><a href="#cb23-1964" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unitDisplay</span><span class="op">:</span> <span class="st">"long"</span><span class="op">,</span></span>
<span id="cb23-1965"><a href="#cb23-1965" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">format</span>(number)<span class="op">;</span></span>
<span id="cb23-1966"><a href="#cb23-1966" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb23-1967"><a href="#cb23-1967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1968"><a href="#cb23-1968" aria-hidden="true" tabindex="-1"></a>formatNumStandard <span class="op">=</span> <span class="kw">function</span> (number<span class="op">,</span> { locale <span class="op">=</span> <span class="st">"en-US"</span> } <span class="op">=</span> {}) {</span>
<span id="cb23-1969"><a href="#cb23-1969" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Intl</span><span class="op">.</span><span class="fu">NumberFormat</span>(locale<span class="op">,</span> {})<span class="op">.</span><span class="fu">format</span>(number)<span class="op">;</span></span>
<span id="cb23-1970"><a href="#cb23-1970" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb23-1971"><a href="#cb23-1971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1972"><a href="#cb23-1972" aria-hidden="true" tabindex="-1"></a><span class="co">// format number, 2 decimal places</span></span>
<span id="cb23-1973"><a href="#cb23-1973" aria-hidden="true" tabindex="-1"></a>formatNum <span class="op">=</span> d3<span class="op">.</span><span class="fu">format</span>(<span class="st">".2f"</span>)<span class="op">;</span></span>
<span id="cb23-1974"><a href="#cb23-1974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1975"><a href="#cb23-1975" aria-hidden="true" tabindex="-1"></a>formatComma <span class="op">=</span> d3<span class="op">.</span><span class="fu">format</span>(<span class="st">","</span>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-23-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-23-2" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-23-3" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-23-4" data-nodetype="declaration"></div></div></div></div></section><section id="import-data-helpers" class="level2"><h2 data-anchor-id="import-data-helpers">import data helpers</h2><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb24" data-startfrom="1982" data-source-offset="-50"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1981"><span id="cb24-1982"><a href="#cb24-1982" aria-hidden="true" tabindex="-1"></a>parseBool <span class="op">=</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb24-1983"><a href="#cb24-1983" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (d <span class="op">===</span> <span class="st">"TRUE"</span>) <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb24-1984"><a href="#cb24-1984" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (d <span class="op">===</span> <span class="st">"FALSE"</span>) <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb24-1985"><a href="#cb24-1985" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb24-1986"><a href="#cb24-1986" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb24-1987"><a href="#cb24-1987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-1988"><a href="#cb24-1988" aria-hidden="true" tabindex="-1"></a><span class="co">// Parsing numbers, blank strings as NaN's</span></span>
<span id="cb24-1989"><a href="#cb24-1989" aria-hidden="true" tabindex="-1"></a>parseNum <span class="op">=</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb24-1990"><a href="#cb24-1990" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="kw">typeof</span> d <span class="op">===</span> <span class="st">"number"</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="pp">isNaN</span>(d)) <span class="cf">return</span> d<span class="op">;</span></span>
<span id="cb24-1991"><a href="#cb24-1991" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> d<span class="op">.</span><span class="fu">trim</span>() <span class="op">===</span> <span class="st">""</span> <span class="op">?</span> <span class="kw">NaN</span> <span class="op">:</span> <span class="op">+</span>d<span class="op">;</span></span>
<span id="cb24-1992"><a href="#cb24-1992" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-24-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-24-2" data-nodetype="declaration"></div></div></div></div></section><section id="style-things" class="level2"><h2 data-anchor-id="style-things">Style things</h2><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb25" data-startfrom="1998" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 1997"><span id="cb25-1998"><a href="#cb25-1998" aria-hidden="true" tabindex="-1"></a>colorYellowGreen <span class="op">=</span> [<span class="st">"#F7D732"</span><span class="op">,</span> <span class="st">"#216729"</span>]</span>
<span id="cb25-1999"><a href="#cb25-1999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2000"><a href="#cb25-2000" aria-hidden="true" tabindex="-1"></a><span class="co">// aez color scale</span></span>
<span id="cb25-2001"><a href="#cb25-2001" aria-hidden="true" tabindex="-1"></a>aezColor_new <span class="op">=</span> {</span>
<span id="cb25-2002"><a href="#cb25-2002" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> lookupAEZ <span class="op">=</span> (aez) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">AEZ_Class_FAO</span><span class="op">.</span><span class="at">values</span>[aez])</span>
<span id="cb25-2003"><a href="#cb25-2003" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb25-2004"><a href="#cb25-2004" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [</span>
<span id="cb25-2005"><a href="#cb25-2005" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">'Desert/Arid climate'</span>)<span class="op">,</span></span>
<span id="cb25-2006"><a href="#cb25-2006" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Tropics, highland; semi-arid"</span>)<span class="op">,</span></span>
<span id="cb25-2007"><a href="#cb25-2007" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Tropics, lowland; semi-arid"</span>)<span class="op">,</span></span>
<span id="cb25-2008"><a href="#cb25-2008" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Subtropics, moderately cool; sub-humid"</span>)<span class="op">,</span></span>
<span id="cb25-2009"><a href="#cb25-2009" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Tropics, highland; sub-humid"</span>)<span class="op">,</span></span>
<span id="cb25-2010"><a href="#cb25-2010" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Tropics, lowland; sub-humid"</span>)<span class="op">,</span></span>
<span id="cb25-2011"><a href="#cb25-2011" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Tropics, highland; humid"</span>)<span class="op">,</span></span>
<span id="cb25-2012"><a href="#cb25-2012" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Tropics, lowland; humid"</span>)<span class="op">,</span></span>
<span id="cb25-2013"><a href="#cb25-2013" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Land with ample irrigated soils"</span>)<span class="op">,</span></span>
<span id="cb25-2014"><a href="#cb25-2014" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Severe soil/terrain limitations"</span>)<span class="op">,</span></span>
<span id="cb25-2015"><a href="#cb25-2015" aria-hidden="true" tabindex="-1"></a>      <span class="fu">lookupAEZ</span>(<span class="st">"Dominantly urban/built-up land"</span>)<span class="op">,</span></span>
<span id="cb25-2016"><a href="#cb25-2016" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb25-2017"><a href="#cb25-2017" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [</span>
<span id="cb25-2018"><a href="#cb25-2018" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#F3D6B0"</span><span class="op">,</span></span>
<span id="cb25-2019"><a href="#cb25-2019" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#FCA034"</span><span class="op">,</span></span>
<span id="cb25-2020"><a href="#cb25-2020" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#F7D732"</span><span class="op">,</span></span>
<span id="cb25-2021"><a href="#cb25-2021" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#523D4E"</span><span class="op">,</span></span>
<span id="cb25-2022"><a href="#cb25-2022" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#EF6D94"</span><span class="op">,</span></span>
<span id="cb25-2023"><a href="#cb25-2023" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#F9B1C1"</span><span class="op">,</span></span>
<span id="cb25-2024"><a href="#cb25-2024" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#2A79A8"</span><span class="op">,</span></span>
<span id="cb25-2025"><a href="#cb25-2025" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#79A1B7"</span><span class="op">,</span></span>
<span id="cb25-2026"><a href="#cb25-2026" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#74B95A"</span><span class="op">,</span></span>
<span id="cb25-2027"><a href="#cb25-2027" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#2E7637"</span><span class="op">,</span></span>
<span id="cb25-2028"><a href="#cb25-2028" aria-hidden="true" tabindex="-1"></a>      <span class="st">"#B1B1B1"</span></span>
<span id="cb25-2029"><a href="#cb25-2029" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb25-2030"><a href="#cb25-2030" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb25-2031"><a href="#cb25-2031" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-25-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-25-2" data-nodetype="declaration"></div></div></div></div></section><section id="sections" class="level2"><h2 data-anchor-id="sections">Sections</h2><section id="shared-data" class="level3"><h3 data-anchor-id="shared-data">shared data</h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb26" data-startfrom="2040" data-source-offset="-20"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 2039"><span id="cb26-2040"><a href="#cb26-2040" aria-hidden="true" tabindex="-1"></a>workbook_meanDifference <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"/data/DiscoverSolutions/Mean_yield_difference.xlsx"</span>)<span class="op">.</span><span class="fu">xlsx</span>()</span>
<span id="cb26-2041"><a href="#cb26-2041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2042"><a href="#cb26-2042" aria-hidden="true" tabindex="-1"></a>data_extendedTable2 <span class="op">=</span> {</span>
<span id="cb26-2043"><a href="#cb26-2043" aria-hidden="true" tabindex="-1"></a>  <span class="co">// data from file</span></span>
<span id="cb26-2044"><a href="#cb26-2044" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> file <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"/data/DiscoverSolutions/spotlight2_Extended Table 2.csv"</span>)<span class="op">.</span><span class="fu">csv</span>()<span class="op">;</span></span>
<span id="cb26-2045"><a href="#cb26-2045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2046"><a href="#cb26-2046" aria-hidden="true" tabindex="-1"></a>  <span class="co">// return data</span></span>
<span id="cb26-2047"><a href="#cb26-2047" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> file<span class="op">.</span><span class="fu">then</span>((x) <span class="kw">=&gt;</span> {</span>
<span id="cb26-2048"><a href="#cb26-2048" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">.</span><span class="fu">map</span>((row) <span class="kw">=&gt;</span> ({</span>
<span id="cb26-2049"><a href="#cb26-2049" aria-hidden="true" tabindex="-1"></a>      <span class="dt">practice</span><span class="op">:</span> <span class="bu">String</span>(row<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb26-2050"><a href="#cb26-2050" aria-hidden="true" tabindex="-1"></a>      <span class="dt">outcome</span><span class="op">:</span> <span class="bu">String</span>(row<span class="op">.</span><span class="at">Outcome</span>)<span class="op">,</span></span>
<span id="cb26-2051"><a href="#cb26-2051" aria-hidden="true" tabindex="-1"></a>      <span class="dt">product</span><span class="op">:</span> <span class="bu">String</span>(row<span class="op">.</span><span class="at">Product</span>)<span class="op">,</span></span>
<span id="cb26-2052"><a href="#cb26-2052" aria-hidden="true" tabindex="-1"></a>      <span class="dt">is_combo</span><span class="op">:</span> <span class="fu">parseBool</span>(row[<span class="st">"Is.Combo"</span>])<span class="op">,</span></span>
<span id="cb26-2053"><a href="#cb26-2053" aria-hidden="true" tabindex="-1"></a>      <span class="dt">observations</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">Observations</span>)<span class="op">,</span></span>
<span id="cb26-2054"><a href="#cb26-2054" aria-hidden="true" tabindex="-1"></a>      <span class="dt">studies</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">Studies</span>)<span class="op">,</span></span>
<span id="cb26-2055"><a href="#cb26-2055" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">Value</span>)<span class="op">,</span></span>
<span id="cb26-2056"><a href="#cb26-2056" aria-hidden="true" tabindex="-1"></a>      <span class="dt">sig</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">Sig</span>)<span class="op">,</span></span>
<span id="cb26-2057"><a href="#cb26-2057" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value_se</span><span class="op">:</span> <span class="fu">parseNum</span>(row[<span class="st">"Value.se"</span>])<span class="op">,</span></span>
<span id="cb26-2058"><a href="#cb26-2058" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ci_low</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">CIlow</span>)<span class="op">,</span></span>
<span id="cb26-2059"><a href="#cb26-2059" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ci_high</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">CIhigh</span>)<span class="op">,</span></span>
<span id="cb26-2060"><a href="#cb26-2060" aria-hidden="true" tabindex="-1"></a>      <span class="dt">source</span><span class="op">:</span> <span class="bu">String</span>(row<span class="op">.</span><span class="at">Source</span>)</span>
<span id="cb26-2061"><a href="#cb26-2061" aria-hidden="true" tabindex="-1"></a>    }))<span class="op">;</span></span>
<span id="cb26-2062"><a href="#cb26-2062" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb26-2063"><a href="#cb26-2063" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-26-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-26-2" data-nodetype="declaration"></div></div></div></div><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb27" data-startfrom="2066" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 2065"><span id="cb27-2066"><a href="#cb27-2066" aria-hidden="true" tabindex="-1"></a>data_extendedTable2_total <span class="op">=</span> {</span>
<span id="cb27-2067"><a href="#cb27-2067" aria-hidden="true" tabindex="-1"></a>  <span class="co">// data from file</span></span>
<span id="cb27-2068"><a href="#cb27-2068" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> file <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"/data/DiscoverSolutions/spotlight2_Extended Table 2@1.csv"</span>)<span class="op">.</span><span class="fu">csv</span>()<span class="op">;</span></span>
<span id="cb27-2069"><a href="#cb27-2069" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-2070"><a href="#cb27-2070" aria-hidden="true" tabindex="-1"></a>  <span class="co">// return data</span></span>
<span id="cb27-2071"><a href="#cb27-2071" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> file<span class="op">.</span><span class="fu">then</span>((x) <span class="kw">=&gt;</span> {</span>
<span id="cb27-2072"><a href="#cb27-2072" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">.</span><span class="fu">map</span>((row) <span class="kw">=&gt;</span> ({</span>
<span id="cb27-2073"><a href="#cb27-2073" aria-hidden="true" tabindex="-1"></a>      <span class="dt">practice</span><span class="op">:</span> <span class="bu">String</span>(row<span class="op">.</span><span class="at">Practice</span>)<span class="op">,</span></span>
<span id="cb27-2074"><a href="#cb27-2074" aria-hidden="true" tabindex="-1"></a>      <span class="dt">outcome</span><span class="op">:</span> <span class="bu">String</span>(row<span class="op">.</span><span class="at">Outcome</span>)<span class="op">,</span></span>
<span id="cb27-2075"><a href="#cb27-2075" aria-hidden="true" tabindex="-1"></a>      <span class="dt">product</span><span class="op">:</span> <span class="bu">String</span>(row<span class="op">.</span><span class="at">Product</span>)<span class="op">,</span></span>
<span id="cb27-2076"><a href="#cb27-2076" aria-hidden="true" tabindex="-1"></a>      <span class="co">// is_combo: parseBool(row["Is.Combo"]),</span></span>
<span id="cb27-2077"><a href="#cb27-2077" aria-hidden="true" tabindex="-1"></a>      <span class="dt">observations</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">Observations</span>)<span class="op">,</span></span>
<span id="cb27-2078"><a href="#cb27-2078" aria-hidden="true" tabindex="-1"></a>      <span class="dt">studies</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">Studies</span>)<span class="op">,</span></span>
<span id="cb27-2079"><a href="#cb27-2079" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">Value</span>)<span class="op">,</span></span>
<span id="cb27-2080"><a href="#cb27-2080" aria-hidden="true" tabindex="-1"></a>      <span class="dt">sig</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">Sig</span>)<span class="op">,</span></span>
<span id="cb27-2081"><a href="#cb27-2081" aria-hidden="true" tabindex="-1"></a>      <span class="dt">value_se</span><span class="op">:</span> <span class="fu">parseNum</span>(row[<span class="st">"Value.se"</span>])<span class="op">,</span></span>
<span id="cb27-2082"><a href="#cb27-2082" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ci_low</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">CIlow</span>)<span class="op">,</span></span>
<span id="cb27-2083"><a href="#cb27-2083" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ci_high</span><span class="op">:</span> <span class="fu">parseNum</span>(row<span class="op">.</span><span class="at">CIhigh</span>)<span class="op">,</span></span>
<span id="cb27-2084"><a href="#cb27-2084" aria-hidden="true" tabindex="-1"></a>      <span class="co">// source: String(row.Source)</span></span>
<span id="cb27-2085"><a href="#cb27-2085" aria-hidden="true" tabindex="-1"></a>    }))<span class="op">;</span></span>
<span id="cb27-2086"><a href="#cb27-2086" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb27-2087"><a href="#cb27-2087" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-27" data-nodetype="declaration"></div></div></div><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb28" data-startfrom="2092" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 2091"><span id="cb28-2092"><a href="#cb28-2092" aria-hidden="true" tabindex="-1"></a>csaManuals <span class="op">=</span> {</span>
<span id="cb28-2093"><a href="#cb28-2093" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> file <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"/data/DiscoverSolutions/CSA-Manuals_Sheet1.csv"</span>)<span class="op">.</span><span class="fu">csv</span>()</span>
<span id="cb28-2094"><a href="#cb28-2094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-2095"><a href="#cb28-2095" aria-hidden="true" tabindex="-1"></a>  <span class="co">// parse columns</span></span>
<span id="cb28-2096"><a href="#cb28-2096" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> file<span class="op">.</span><span class="fu">then</span>((x) <span class="kw">=&gt;</span> {</span>
<span id="cb28-2097"><a href="#cb28-2097" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> ({</span>
<span id="cb28-2098"><a href="#cb28-2098" aria-hidden="true" tabindex="-1"></a>      <span class="dt">practice</span><span class="op">:</span> <span class="bu">String</span>(d[<span class="st">'Practice'</span>])<span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb28-2099"><a href="#cb28-2099" aria-hidden="true" tabindex="-1"></a>      <span class="dt">country_region</span><span class="op">:</span> <span class="bu">String</span>(d[<span class="st">'Country or Region'</span>])<span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb28-2100"><a href="#cb28-2100" aria-hidden="true" tabindex="-1"></a>      <span class="dt">system</span><span class="op">:</span> <span class="bu">String</span>(d[<span class="st">'System'</span>])<span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb28-2101"><a href="#cb28-2101" aria-hidden="true" tabindex="-1"></a>      <span class="dt">author</span><span class="op">:</span> <span class="bu">String</span>(d[<span class="st">'Author'</span>])<span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb28-2102"><a href="#cb28-2102" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> <span class="bu">String</span>(d[<span class="st">'Title'</span>])<span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb28-2103"><a href="#cb28-2103" aria-hidden="true" tabindex="-1"></a>      <span class="dt">link</span><span class="op">:</span> <span class="bu">String</span>(d[<span class="st">'Link'</span>])<span class="op">.</span><span class="fu">trim</span>()</span>
<span id="cb28-2104"><a href="#cb28-2104" aria-hidden="true" tabindex="-1"></a>    }))</span>
<span id="cb28-2105"><a href="#cb28-2105" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb28-2106"><a href="#cb28-2106" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-2107"><a href="#cb28-2107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-2108"><a href="#cb28-2108" aria-hidden="true" tabindex="-1"></a><span class="co">// selections</span></span>
<span id="cb28-2109"><a href="#cb28-2109" aria-hidden="true" tabindex="-1"></a>csaResourceHtml <span class="op">=</span> {</span>
<span id="cb28-2110"><a href="#cb28-2110" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb28-2111"><a href="#cb28-2111" aria-hidden="true" tabindex="-1"></a>    csaManuals<span class="op">,</span></span>
<span id="cb28-2112"><a href="#cb28-2112" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">practice</span> <span class="op">==</span> selectResourcePractice<span class="op">.</span><span class="at">field</span>)<span class="op">,</span></span>
<span id="cb28-2113"><a href="#cb28-2113" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">arrange</span>([<span class="st">"system"</span><span class="op">,</span> <span class="st">"title"</span>])</span>
<span id="cb28-2114"><a href="#cb28-2114" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb28-2115"><a href="#cb28-2115" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> translateSystem <span class="op">=</span> (d) <span class="kw">=&gt;</span> <span class="fu">_lang</span>(td<span class="op">.</span><span class="at">summarySystems</span><span class="op">.</span><span class="at">values</span><span class="op">?.</span>[d])<span class="op">;</span></span>
<span id="cb28-2116"><a href="#cb28-2116" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> systemWord <span class="op">=</span> Lang<span class="op">.</span><span class="fu">toTitleCase</span>(<span class="fu">_lang</span>(td<span class="op">.</span><span class="at">summarySystems</span>))</span>
<span id="cb28-2117"><a href="#cb28-2117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-2118"><a href="#cb28-2118" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> htmlList <span class="op">=</span> data<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb28-2119"><a href="#cb28-2119" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> system <span class="op">=</span> <span class="fu">translateSystem</span>(d<span class="op">.</span><span class="at">system</span>)<span class="op">;</span></span>
<span id="cb28-2120"><a href="#cb28-2120" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`&lt;li style='padding: 10px 0'&gt;</span><span class="sc">${</span>system<span class="sc">}</span><span class="vs">: &lt;a href=</span><span class="sc">${</span>d<span class="op">.</span><span class="at">link</span><span class="sc">}</span><span class="vs"> target='_blank'&gt;</span><span class="sc">${</span>d<span class="op">.</span><span class="at">title</span><span class="sc">}</span><span class="vs">&lt;/a&gt;&lt;/li&gt;`</span><span class="op">;</span></span>
<span id="cb28-2121"><a href="#cb28-2121" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb28-2122"><a href="#cb28-2122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-2123"><a href="#cb28-2123" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="vs">`&lt;b&gt;</span><span class="sc">${</span>systemWord<span class="sc">}</span><span class="vs">&lt;/b&gt;</span></span>
<span id="cb28-2124"><a href="#cb28-2124" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;ul style='list-style-type:none; padding: 0'&gt;</span><span class="sc">${</span>htmlList<span class="op">.</span><span class="fu">join</span>(</span>
<span id="cb28-2125"><a href="#cb28-2125" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span></span>
<span id="cb28-2126"><a href="#cb28-2126" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">}</span><span class="vs">&lt;/ul&gt;`</span><span class="op">;</span></span>
<span id="cb28-2127"><a href="#cb28-2127" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-28-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-28-2" data-nodetype="declaration"></div></div></div></div></section><section id="practicecrop-dot-plot" class="level3"><h3 data-anchor-id="practicecrop-dot-plot">Practice/Crop dot plot</h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb29" data-startfrom="2133" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 2132"><span id="cb29-2133"><a href="#cb29-2133" aria-hidden="true" tabindex="-1"></a>data_meanDiff_practiceCrop <span class="op">=</span> {</span>
<span id="cb29-2134"><a href="#cb29-2134" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> raw <span class="op">=</span> workbook_meanDifference<span class="op">.</span><span class="fu">sheet</span>(<span class="st">"Practice_Crop"</span><span class="op">,</span> { <span class="dt">headers</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb29-2135"><a href="#cb29-2135" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> raw<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> {</span>
<span id="cb29-2136"><a href="#cb29-2136" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(d)<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb29-2137"><a href="#cb29-2137" aria-hidden="true" tabindex="-1"></a>      <span class="op">&amp;&amp;</span> meanDiffCropList<span class="op">.</span><span class="fu">includes</span>(d<span class="op">.</span><span class="at">Crop</span>)</span>
<span id="cb29-2138"><a href="#cb29-2138" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb29-2139"><a href="#cb29-2139" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-2140"><a href="#cb29-2140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2141"><a href="#cb29-2141" aria-hidden="true" tabindex="-1"></a>data_meanDiff_practiceCrop_new <span class="op">=</span> {</span>
<span id="cb29-2142"><a href="#cb29-2142" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> raw <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"/data/DiscoverSolutions/figure_2_data@1.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({<span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb29-2143"><a href="#cb29-2143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2144"><a href="#cb29-2144" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> raw<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> {</span>
<span id="cb29-2145"><a href="#cb29-2145" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb29-2146"><a href="#cb29-2146" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Practice</span><span class="op">:</span> d[<span class="st">'Practice'</span>]<span class="op">,</span></span>
<span id="cb29-2147"><a href="#cb29-2147" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Crop</span><span class="op">:</span> d[<span class="st">'Crop'</span>]<span class="op">,</span></span>
<span id="cb29-2148"><a href="#cb29-2148" aria-hidden="true" tabindex="-1"></a>      <span class="dt">N_Obs</span><span class="op">:</span> d[<span class="st">'N_Obs'</span>]<span class="op">,</span></span>
<span id="cb29-2149"><a href="#cb29-2149" aria-hidden="true" tabindex="-1"></a>      <span class="dt">N_Pub</span><span class="op">:</span> d[<span class="st">"N_Pub"</span>]<span class="op">,</span></span>
<span id="cb29-2150"><a href="#cb29-2150" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Mean_Treatment</span><span class="op">:</span> d[<span class="st">"Mean_T"</span>]<span class="op">,</span></span>
<span id="cb29-2151"><a href="#cb29-2151" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Mean_Control</span><span class="op">:</span> d[<span class="st">"Mean_C"</span>]<span class="op">,</span></span>
<span id="cb29-2152"><a href="#cb29-2152" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Mean_Difference</span><span class="op">:</span> d[<span class="st">"Mean_Difference"</span>]<span class="op">,</span></span>
<span id="cb29-2153"><a href="#cb29-2153" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Se</span><span class="op">:</span> d[<span class="st">'Se'</span>]<span class="op">,</span></span>
<span id="cb29-2154"><a href="#cb29-2154" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Lower</span><span class="op">:</span> d[<span class="st">"Lower"</span>]<span class="op">,</span></span>
<span id="cb29-2155"><a href="#cb29-2155" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Upper</span><span class="op">:</span> d[<span class="st">"Upper"</span>]<span class="op">,</span></span>
<span id="cb29-2156"><a href="#cb29-2156" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-2157"><a href="#cb29-2157" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb29-2158"><a href="#cb29-2158" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-2159"><a href="#cb29-2159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2160"><a href="#cb29-2160" aria-hidden="true" tabindex="-1"></a><span class="co">// shared column for mean difference dot plots</span></span>
<span id="cb29-2161"><a href="#cb29-2161" aria-hidden="true" tabindex="-1"></a>viewof selectCropMeanDiff <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(meanDiffCropList<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Crop"</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">'Maize'</span>})</span>
<span id="cb29-2162"><a href="#cb29-2162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2163"><a href="#cb29-2163" aria-hidden="true" tabindex="-1"></a><span class="co">// list of crops to show for mean difference (study cutoff)</span></span>
<span id="cb29-2164"><a href="#cb29-2164" aria-hidden="true" tabindex="-1"></a>meanDiffCropList <span class="op">=</span> [</span>
<span id="cb29-2165"><a href="#cb29-2165" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Maize'</span><span class="op">,</span></span>
<span id="cb29-2166"><a href="#cb29-2166" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Cowpea'</span><span class="op">,</span></span>
<span id="cb29-2167"><a href="#cb29-2167" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Sorghum'</span><span class="op">,</span></span>
<span id="cb29-2168"><a href="#cb29-2168" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Rice'</span><span class="op">,</span></span>
<span id="cb29-2169"><a href="#cb29-2169" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Pearl Millet'</span><span class="op">,</span></span>
<span id="cb29-2170"><a href="#cb29-2170" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Cassava or Yuca'</span><span class="op">,</span></span>
<span id="cb29-2171"><a href="#cb29-2171" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Common Bean'</span><span class="op">,</span></span>
<span id="cb29-2172"><a href="#cb29-2172" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Groundnut'</span><span class="op">,</span></span>
<span id="cb29-2173"><a href="#cb29-2173" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Soybean'</span><span class="op">,</span></span>
<span id="cb29-2174"><a href="#cb29-2174" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Wheat'</span><span class="op">,</span></span>
<span id="cb29-2175"><a href="#cb29-2175" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Tomato'</span><span class="op">,</span></span>
<span id="cb29-2176"><a href="#cb29-2176" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Potato'</span><span class="op">,</span></span>
<span id="cb29-2177"><a href="#cb29-2177" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Yam'</span><span class="op">,</span></span>
<span id="cb29-2178"><a href="#cb29-2178" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Cotton'</span><span class="op">,</span></span>
<span id="cb29-2179"><a href="#cb29-2179" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Sugar Cane'</span><span class="op">,</span></span>
<span id="cb29-2180"><a href="#cb29-2180" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Okra'</span><span class="op">,</span></span>
<span id="cb29-2181"><a href="#cb29-2181" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Sweet Potato'</span><span class="op">,</span></span>
<span id="cb29-2182"><a href="#cb29-2182" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Teff'</span><span class="op">,</span></span>
<span id="cb29-2183"><a href="#cb29-2183" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Pigeon Pea'</span><span class="op">,</span></span>
<span id="cb29-2184"><a href="#cb29-2184" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Sesame Seed'</span><span class="op">,</span></span>
<span id="cb29-2185"><a href="#cb29-2185" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-29-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-29-2" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-29-3" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-29-4" data-nodetype="declaration"></div></div></div></div></section><section id="aez-dot-plot" class="level3"><h3 data-anchor-id="aez-dot-plot">AEZ Dot Plot</h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb30" data-startfrom="2190" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 2189"><span id="cb30-2190"><a href="#cb30-2190" aria-hidden="true" tabindex="-1"></a>data_meanDiff_aezPracticeCrop_new <span class="op">=</span> {</span>
<span id="cb30-2191"><a href="#cb30-2191" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> raw <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"/data/DiscoverSolutions/Mean_yield_difference@1.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({<span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb30-2192"><a href="#cb30-2192" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-2193"><a href="#cb30-2193" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> formatted <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb30-2194"><a href="#cb30-2194" aria-hidden="true" tabindex="-1"></a>    raw<span class="op">,</span></span>
<span id="cb30-2195"><a href="#cb30-2195" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(d)<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb30-2196"><a href="#cb30-2196" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">rename</span>({</span>
<span id="cb30-2197"><a href="#cb30-2197" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Mean_T</span><span class="op">:</span> <span class="st">'Mean_Treatment'</span><span class="op">,</span></span>
<span id="cb30-2198"><a href="#cb30-2198" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Mean_C</span><span class="op">:</span> <span class="st">'Mean_Control'</span><span class="op">,</span></span>
<span id="cb30-2199"><a href="#cb30-2199" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb30-2200"><a href="#cb30-2200" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-2201"><a href="#cb30-2201" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> formatted</span>
<span id="cb30-2202"><a href="#cb30-2202" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-30" data-nodetype="declaration"></div></div></div></section><section id="risk" class="level3"><h3 data-anchor-id="risk">Risk</h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb31" data-startfrom="2208" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 2207"><span id="cb31-2208"><a href="#cb31-2208" aria-hidden="true" tabindex="-1"></a>data_lclRisk <span class="op">=</span> data_extendedTable2<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">outcome</span> <span class="op">==</span> <span class="st">"LCL Risk"</span>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-31" data-nodetype="declaration"></div></div></div></section><section id="adoption-factors" class="level3"><h3 data-anchor-id="adoption-factors">Adoption Factors</h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb32" data-startfrom="2215" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 2214"><span id="cb32-2215"><a href="#cb32-2215" aria-hidden="true" tabindex="-1"></a>adoptionFactorAllLabel <span class="op">=</span> <span class="st">"All practices"</span></span>
<span id="cb32-2216"><a href="#cb32-2216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2217"><a href="#cb32-2217" aria-hidden="true" tabindex="-1"></a>rawAdoptionFactors <span class="op">=</span> {</span>
<span id="cb32-2218"><a href="#cb32-2218" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> raw <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"/data/DiscoverSolutions/adoption_factors_20mar24.csv"</span>)<span class="op">.</span><span class="fu">csv</span>()</span>
<span id="cb32-2219"><a href="#cb32-2219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2220"><a href="#cb32-2220" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> raw<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> {</span>
<span id="cb32-2221"><a href="#cb32-2221" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb32-2222"><a href="#cb32-2222" aria-hidden="true" tabindex="-1"></a>      <span class="dt">index</span><span class="op">:</span> d[<span class="st">''</span>]<span class="op">,</span></span>
<span id="cb32-2223"><a href="#cb32-2223" aria-hidden="true" tabindex="-1"></a>      <span class="dt">practice</span><span class="op">:</span> <span class="bu">String</span>(d[<span class="st">'practices'</span>])<span class="op">,</span></span>
<span id="cb32-2224"><a href="#cb32-2224" aria-hidden="true" tabindex="-1"></a>      <span class="dt">factor</span><span class="op">:</span> <span class="bu">String</span>(d[<span class="st">'adoption_factors'</span>])<span class="op">,</span></span>
<span id="cb32-2225"><a href="#cb32-2225" aria-hidden="true" tabindex="-1"></a>      <span class="dt">direction</span><span class="op">:</span> <span class="bu">String</span>(d[<span class="st">'direction'</span>])<span class="op">,</span></span>
<span id="cb32-2226"><a href="#cb32-2226" aria-hidden="true" tabindex="-1"></a>      <span class="dt">n</span><span class="op">:</span> <span class="fu">parseNum</span>(d<span class="op">.</span><span class="at">n</span>)</span>
<span id="cb32-2227"><a href="#cb32-2227" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb32-2228"><a href="#cb32-2228" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb32-2229"><a href="#cb32-2229" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-2230"><a href="#cb32-2230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2231"><a href="#cb32-2231" aria-hidden="true" tabindex="-1"></a>dataAdoptionFactors <span class="op">=</span> {</span>
<span id="cb32-2232"><a href="#cb32-2232" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> allPractices <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb32-2233"><a href="#cb32-2233" aria-hidden="true" tabindex="-1"></a>    rawAdoptionFactors<span class="op">,</span></span>
<span id="cb32-2234"><a href="#cb32-2234" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">groupBy</span>(</span>
<span id="cb32-2235"><a href="#cb32-2235" aria-hidden="true" tabindex="-1"></a>      [<span class="st">"factor"</span><span class="op">,</span> <span class="st">"direction"</span>]<span class="op">,</span></span>
<span id="cb32-2236"><a href="#cb32-2236" aria-hidden="true" tabindex="-1"></a>      [</span>
<span id="cb32-2237"><a href="#cb32-2237" aria-hidden="true" tabindex="-1"></a>        T<span class="op">.</span><span class="fu">summarize</span>({</span>
<span id="cb32-2238"><a href="#cb32-2238" aria-hidden="true" tabindex="-1"></a>          <span class="dt">n</span><span class="op">:</span> T<span class="op">.</span><span class="fu">sum</span>(<span class="st">"n"</span>)</span>
<span id="cb32-2239"><a href="#cb32-2239" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb32-2240"><a href="#cb32-2240" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb32-2241"><a href="#cb32-2241" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb32-2242"><a href="#cb32-2242" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">groupBy</span>(</span>
<span id="cb32-2243"><a href="#cb32-2243" aria-hidden="true" tabindex="-1"></a>      [<span class="st">"factor"</span>]<span class="op">,</span></span>
<span id="cb32-2244"><a href="#cb32-2244" aria-hidden="true" tabindex="-1"></a>      [</span>
<span id="cb32-2245"><a href="#cb32-2245" aria-hidden="true" tabindex="-1"></a>        T<span class="op">.</span><span class="fu">mutateWithSummary</span>({</span>
<span id="cb32-2246"><a href="#cb32-2246" aria-hidden="true" tabindex="-1"></a>          <span class="dt">total</span><span class="op">:</span> T<span class="op">.</span><span class="fu">sum</span>(<span class="st">"n"</span>)</span>
<span id="cb32-2247"><a href="#cb32-2247" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb32-2248"><a href="#cb32-2248" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb32-2249"><a href="#cb32-2249" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb32-2250"><a href="#cb32-2250" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">mutate</span>({ <span class="dt">perc</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">n</span> <span class="op">/</span> d<span class="op">.</span><span class="at">total</span>) <span class="op">*</span> <span class="dv">100</span> })<span class="op">,</span></span>
<span id="cb32-2251"><a href="#cb32-2251" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">mutate</span>({ <span class="dt">practice</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> adoptionFactorAllLabel })<span class="op">,</span></span>
<span id="cb32-2252"><a href="#cb32-2252" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">select</span>([<span class="st">"practice"</span><span class="op">,</span> T<span class="op">.</span><span class="fu">everything</span>()])</span>
<span id="cb32-2253"><a href="#cb32-2253" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb32-2254"><a href="#cb32-2254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2255"><a href="#cb32-2255" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> wrangled <span class="op">=</span> T<span class="op">.</span><span class="fu">tidy</span>(</span>
<span id="cb32-2256"><a href="#cb32-2256" aria-hidden="true" tabindex="-1"></a>    rawAdoptionFactors<span class="op">,</span></span>
<span id="cb32-2257"><a href="#cb32-2257" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">select</span>(T<span class="op">.</span><span class="fu">negate</span>(<span class="st">"index"</span>))<span class="op">,</span></span>
<span id="cb32-2258"><a href="#cb32-2258" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">groupBy</span>(</span>
<span id="cb32-2259"><a href="#cb32-2259" aria-hidden="true" tabindex="-1"></a>      [<span class="st">"practice"</span><span class="op">,</span> <span class="st">"factor"</span>]<span class="op">,</span></span>
<span id="cb32-2260"><a href="#cb32-2260" aria-hidden="true" tabindex="-1"></a>      [T<span class="op">.</span><span class="fu">mutateWithSummary</span>({ <span class="dt">total</span><span class="op">:</span> T<span class="op">.</span><span class="fu">sum</span>(<span class="st">"n"</span>) })]</span>
<span id="cb32-2261"><a href="#cb32-2261" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb32-2262"><a href="#cb32-2262" aria-hidden="true" tabindex="-1"></a>    T<span class="op">.</span><span class="fu">mutate</span>({</span>
<span id="cb32-2263"><a href="#cb32-2263" aria-hidden="true" tabindex="-1"></a>      <span class="dt">perc</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">n</span> <span class="op">/</span> d<span class="op">.</span><span class="at">total</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb32-2264"><a href="#cb32-2264" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb32-2265"><a href="#cb32-2265" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb32-2266"><a href="#cb32-2266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2267"><a href="#cb32-2267" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [</span>
<span id="cb32-2268"><a href="#cb32-2268" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>wrangled<span class="op">,</span></span>
<span id="cb32-2269"><a href="#cb32-2269" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>allPractices</span>
<span id="cb32-2270"><a href="#cb32-2270" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb32-2271"><a href="#cb32-2271" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-2272"><a href="#cb32-2272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2273"><a href="#cb32-2273" aria-hidden="true" tabindex="-1"></a><span class="co">// mapped adoption data</span></span>
<span id="cb32-2274"><a href="#cb32-2274" aria-hidden="true" tabindex="-1"></a>dataAdoptionFactorsMap <span class="op">=</span> d3<span class="op">.</span><span class="fu">group</span>(dataAdoptionFactors<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">practice</span>)</span>
<span id="cb32-2275"><a href="#cb32-2275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2276"><a href="#cb32-2276" aria-hidden="true" tabindex="-1"></a>adoptionFactorsLookup <span class="op">=</span> ({</span>
<span id="cb32-2277"><a href="#cb32-2277" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Not significant"</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">adoptionFactors</span><span class="op">.</span><span class="at">plot</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">notSig</span>)<span class="op">,</span></span>
<span id="cb32-2278"><a href="#cb32-2278" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Negative"</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">adoptionFactors</span><span class="op">.</span><span class="at">plot</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">neg</span>)<span class="op">,</span></span>
<span id="cb32-2279"><a href="#cb32-2279" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Positive"</span><span class="op">:</span> <span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">adoptionFactors</span><span class="op">.</span><span class="at">plot</span><span class="op">.</span><span class="at">labels</span><span class="op">.</span><span class="at">pos</span>)<span class="op">,</span></span>
<span id="cb32-2280"><a href="#cb32-2280" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb32-2281"><a href="#cb32-2281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2282"><a href="#cb32-2282" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">markBoldSidebarText</span>(data<span class="op">,</span> {textFormat<span class="op">=</span>(d) <span class="kw">=&gt;</span> d <span class="op">+</span> <span class="st">' obs.'</span><span class="op">,</span> <span class="op">...</span>options } <span class="op">=</span> {}) {</span>
<span id="cb32-2283"><a href="#cb32-2283" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">marks</span>(</span>
<span id="cb32-2284"><a href="#cb32-2284" aria-hidden="true" tabindex="-1"></a>    <span class="co">// observation counts</span></span>
<span id="cb32-2285"><a href="#cb32-2285" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb32-2286"><a href="#cb32-2286" aria-hidden="true" tabindex="-1"></a>      data<span class="op">,</span></span>
<span id="cb32-2287"><a href="#cb32-2287" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb32-2288"><a href="#cb32-2288" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">text</span><span class="op">:</span> (values) <span class="kw">=&gt;</span> values<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> <span class="fu">textFormat</span>(d)) }<span class="op">,</span></span>
<span id="cb32-2289"><a href="#cb32-2289" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">groupY</span>(</span>
<span id="cb32-2290"><a href="#cb32-2290" aria-hidden="true" tabindex="-1"></a>          { <span class="dt">text</span><span class="op">:</span> <span class="st">"sum"</span> }<span class="op">,</span></span>
<span id="cb32-2291"><a href="#cb32-2291" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb32-2292"><a href="#cb32-2292" aria-hidden="true" tabindex="-1"></a>            <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span></span>
<span id="cb32-2293"><a href="#cb32-2293" aria-hidden="true" tabindex="-1"></a>            <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb32-2294"><a href="#cb32-2294" aria-hidden="true" tabindex="-1"></a>            <span class="dt">dx</span><span class="op">:</span> <span class="dv">16</span><span class="op">,</span></span>
<span id="cb32-2295"><a href="#cb32-2295" aria-hidden="true" tabindex="-1"></a>            <span class="op">...</span>options</span>
<span id="cb32-2296"><a href="#cb32-2296" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb32-2297"><a href="#cb32-2297" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb32-2298"><a href="#cb32-2298" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb32-2299"><a href="#cb32-2299" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb32-2300"><a href="#cb32-2300" aria-hidden="true" tabindex="-1"></a>    <span class="co">// digital white-out</span></span>
<span id="cb32-2301"><a href="#cb32-2301" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb32-2302"><a href="#cb32-2302" aria-hidden="true" tabindex="-1"></a>      data<span class="op">,</span></span>
<span id="cb32-2303"><a href="#cb32-2303" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">pointerY</span>(</span>
<span id="cb32-2304"><a href="#cb32-2304" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb32-2305"><a href="#cb32-2305" aria-hidden="true" tabindex="-1"></a>          { <span class="dt">text</span><span class="op">:</span> (values) <span class="kw">=&gt;</span> values<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> <span class="fu">textFormat</span>(d)) }<span class="op">,</span></span>
<span id="cb32-2306"><a href="#cb32-2306" aria-hidden="true" tabindex="-1"></a>          Plot<span class="op">.</span><span class="fu">groupY</span>(</span>
<span id="cb32-2307"><a href="#cb32-2307" aria-hidden="true" tabindex="-1"></a>            { <span class="dt">text</span><span class="op">:</span> <span class="st">"sum"</span> }<span class="op">,</span></span>
<span id="cb32-2308"><a href="#cb32-2308" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb32-2309"><a href="#cb32-2309" aria-hidden="true" tabindex="-1"></a>              <span class="co">// y: "factor",</span></span>
<span id="cb32-2310"><a href="#cb32-2310" aria-hidden="true" tabindex="-1"></a>              <span class="co">// text: "n",</span></span>
<span id="cb32-2311"><a href="#cb32-2311" aria-hidden="true" tabindex="-1"></a>              <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span></span>
<span id="cb32-2312"><a href="#cb32-2312" aria-hidden="true" tabindex="-1"></a>              <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb32-2313"><a href="#cb32-2313" aria-hidden="true" tabindex="-1"></a>              <span class="dt">dx</span><span class="op">:</span> <span class="dv">16</span><span class="op">,</span></span>
<span id="cb32-2314"><a href="#cb32-2314" aria-hidden="true" tabindex="-1"></a>              <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb32-2315"><a href="#cb32-2315" aria-hidden="true" tabindex="-1"></a>              <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb32-2316"><a href="#cb32-2316" aria-hidden="true" tabindex="-1"></a>              <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb32-2317"><a href="#cb32-2317" aria-hidden="true" tabindex="-1"></a>              <span class="op">...</span>options</span>
<span id="cb32-2318"><a href="#cb32-2318" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb32-2319"><a href="#cb32-2319" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb32-2320"><a href="#cb32-2320" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb32-2321"><a href="#cb32-2321" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb32-2322"><a href="#cb32-2322" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb32-2323"><a href="#cb32-2323" aria-hidden="true" tabindex="-1"></a>    <span class="co">// observation counts bold hover</span></span>
<span id="cb32-2324"><a href="#cb32-2324" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb32-2325"><a href="#cb32-2325" aria-hidden="true" tabindex="-1"></a>      data<span class="op">,</span></span>
<span id="cb32-2326"><a href="#cb32-2326" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">pointerY</span>(</span>
<span id="cb32-2327"><a href="#cb32-2327" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb32-2328"><a href="#cb32-2328" aria-hidden="true" tabindex="-1"></a>          { <span class="dt">text</span><span class="op">:</span> (values) <span class="kw">=&gt;</span> values<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> <span class="fu">textFormat</span>(d)) }<span class="op">,</span></span>
<span id="cb32-2329"><a href="#cb32-2329" aria-hidden="true" tabindex="-1"></a>          Plot<span class="op">.</span><span class="fu">groupY</span>(</span>
<span id="cb32-2330"><a href="#cb32-2330" aria-hidden="true" tabindex="-1"></a>            { <span class="dt">text</span><span class="op">:</span> <span class="st">"sum"</span> }<span class="op">,</span></span>
<span id="cb32-2331"><a href="#cb32-2331" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb32-2332"><a href="#cb32-2332" aria-hidden="true" tabindex="-1"></a>              <span class="co">// y: "factor",</span></span>
<span id="cb32-2333"><a href="#cb32-2333" aria-hidden="true" tabindex="-1"></a>              <span class="co">// text: "n",</span></span>
<span id="cb32-2334"><a href="#cb32-2334" aria-hidden="true" tabindex="-1"></a>              <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span></span>
<span id="cb32-2335"><a href="#cb32-2335" aria-hidden="true" tabindex="-1"></a>              <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb32-2336"><a href="#cb32-2336" aria-hidden="true" tabindex="-1"></a>              <span class="dt">dx</span><span class="op">:</span> <span class="dv">16</span><span class="op">,</span></span>
<span id="cb32-2337"><a href="#cb32-2337" aria-hidden="true" tabindex="-1"></a>              <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span></span>
<span id="cb32-2338"><a href="#cb32-2338" aria-hidden="true" tabindex="-1"></a>              <span class="op">...</span>options</span>
<span id="cb32-2339"><a href="#cb32-2339" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb32-2340"><a href="#cb32-2340" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb32-2341"><a href="#cb32-2341" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb32-2342"><a href="#cb32-2342" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb32-2343"><a href="#cb32-2343" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb32-2344"><a href="#cb32-2344" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb32-2345"><a href="#cb32-2345" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-32-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-32-2" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-32-3" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-32-4" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-32-5" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-32-6" data-nodetype="declaration"></div></div></div></div></section></section><section id="imports" class="level2"><h2 data-anchor-id="imports">Imports</h2><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb33" data-startfrom="2350" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 2349"><span id="cb33-2350"><a href="#cb33-2350" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { T } <span class="im">from</span> <span class="st">"@pbeshai/tidyjs"</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-33" data-nodetype="declaration"></div></div></div><div class="ojs-auto-generated hidden"><script type="ojs-module-contents">eyJjb250ZW50cyI6WyAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7T3ZlcnZpZXd9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0xIn0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtfbGFuZyhuYlRleHQub3ZlcnZpZXcuYmxvY2tzLm9wZW5lcjEpfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMiJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7SW50ZXJ2ZW50aW9uc308L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTMifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke1ByYWN0aWNhbEltcGFjdH08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTQifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke19sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QubWVhbkNyb3BEaWZmLmJsb2Nrcy5vcGVuZXIxKX08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTUifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke0Nyb3BEaWZmfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtNiJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7cXVpY2tJbnNpZ2h0fTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtNyJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7Y3JvcF9kaWZmX2Flen08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTgifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke19sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QubWVhbkNyb3BEaWZmQUVaLmJsb2Nrcy5vcGVuZXIxKX08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTkifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke3F1aWNrSW5zaWdodH08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTEwIn0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtSaXNrc308L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTExIn0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtfbGFuZyhuYlRleHQucmlza3MuYmxvY2tzLm9wZW5lcil9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0xMiJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7cXVpY2tJbnNpZ2h0fTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMTMifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke0ZhY3RvcnN9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0xNCJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7X2xhbmcobmJUZXh0LmFkb3B0aW9uRmFjdG9ycy5ibG9ja3Mub3BlbmVyMSl9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0xNSJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7cXVpY2tJbnNpZ2h0fTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMTYifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke1N1bW1hcnl9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0xNyJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7X2xhbmcobmJUZXh0LnN1bW1hcnkuYmxvY2tzLm9wZW5lcjEpfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMTgifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke19sYW5nKG5iVGV4dC5zdW1tYXJ5LmJsb2Nrcy5vcGVuZXIyKX08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTE5In0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtNZXRob2RzfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMjAifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke19sYW5nKG5iVGV4dC5tZXRob2RzU291cmNlcy5pbnRybyl9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0yMSJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7ZGF0YV9zb3VyY2VzfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMjIifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke21ldGhvZHN9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0yMyJ9XX0=</script></div></section></section></main><script type="ojs-module-contents">eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImltcG9ydCB7IGhlcm9JbWFnZSB9IGZyb20gXCIvaGVscGVycy9oZXJvLmpzXCI7XG5oZXJvX3VybCA9IFwiLi8uLi8uLi9pbWFnZXMvc29sdXRpb24ud2VicFwiO1xuXG5oZXJvID0gaGVyb0ltYWdlKG5iVGl0bGUsIGhlcm9fdXJsKTtcbmh0bWxgJHtoZXJvfWA7XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJpbXBvcnQgeyBhdGxhc1RPQyB9IGZyb20gJy9oZWxwZXJzL3RvYy5vanMnIFxue1xuICBhd2FpdCBuYlRleHQgLy8gZm9yY2Ugd2FpdC9yZWxvYWQgd2l0aCBuYlRleHQgdG8gbG9hZCBzbyBoZWFkaW5ncyBoYXZlIGNvcnJlY3QgbGFiZWxzL2xhbmd1YWdlc1xuICByZXR1cm4gYXRsYXNUT0Moe1xuICAgICAgaGVhZGluZzogYDxiPiR7X2xhbmcoe2VuOlwiSW4gdGhpcyBub3RlYm9va1wiLCBmcjpcIkRhbnMgY2Ugbm90ZWJvb2tcIn0pfTwvYj5gLFxuICAgICAgc2tpcDogW25iVGl0bGUsIFwiQXBwZW5kaXhcIiwgXCJzb3VyY2UtY29kZVwiXVxuICAgICAgfSlcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBwcmV0dHlMYW5ndWFnZVZpZXcgPSB7XG4gIHJldHVybiBJbnB1dHMuYmluZChcbiAgICBJbnB1dHMucmFkaW8obGFuZ3VhZ2VzLCB7XG4gICAgICBsYWJlbDogX2xhbmcoe2VuOiBcIkxhbmd1YWdlXCIsIGZyOiBcIkxhbmd1ZVwifSksXG4gICAgICBmb3JtYXQ6IChkKSA9PiBkLmxhYmVsXG4gICAgfSksXG4gICAgdmlld29mIGxhbmd1YWdlXG4gICk7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ7XG4gIC8vIGZpbmQgdG90YWwgb2JzZXJ2YXRpb25zXG4gIGNvbnN0IHJhdyA9IGQzLnN1bShcbiAgICBkYXRhX2V4dGVuZGVkVGFibGUyX3RvdGFsLFxuICAgIChkKSA9PiBkLm9ic2VydmF0aW9uc1xuICApO1xuICBjb25zdCBmb3JtYXR0ZWQgPSBNYXRoLnJvdW5kKHJhdyAvIDEwMDApICogMTAwMDtcbiAgY29uc3QgdG90YWxPYnMgPSBmb3JtYXROdW1TdGFuZGFyZChmb3JtYXR0ZWQsIHtcbiAgICBsb2NhbGU6IGxhbmd1YWdlLmxvY2FsZVxuICB9KTtcblxuICBjb25zdCBsYW5nU3RyaW5nID0gX2xhbmcobmJUZXh0LmludGVydmVudGlvbnMuYmxvY2tzLm9wZW5lcjEpO1xuICBjb25zdCBmb3JtYXR0ZWRTdHJpbmcgPSBsYW5nU3RyaW5nLnJlcGxhY2UoXG4gICAgTGFuZy5nZXRSZWdleEZvck5hbWVkSW5zZXJ0aW9uKFwidG90YWxPYnNcIiksXG4gICAgdG90YWxPYnNcbiAgKTtcblxuICByZXR1cm4gbWRgJHtmb3JtYXR0ZWRTdHJpbmd9YDtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcbiAgY29uc3QgZGF0YSA9IGRhdGFfZXh0ZW5kZWRUYWJsZTJfdG90YWw7XG4gIGNvbnN0IGNvbG9yRmlsbCA9IFwiIzIxNjcyOVwiO1xuICBjb25zdCBsYW5nTG9vayA9IHtcbiAgICBvYnM6IExhbmcudG9TZW50ZW5jZUNhc2UoXG4gICAgICBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5wbHVyYWwpXG4gICAgKVxuICB9O1xuICBjb25zdCB5ID0gKGQpID0+IF9sYW5nKHRkLlByYWN0aWNlLnZhbHVlcz8uW2RdKTtcblxuICByZXR1cm4gUGxvdC5wbG90KHtcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQ6IDcwMCxcbiAgICBtYXJnaW5MZWZ0OiAxOTAsXG4gICAgbWFyZ2luUmlnaHQ6IDUwLFxuICAgIG1hcmdpblRvcDogNjAsXG4gICAgeDoge1xuICAgICAgdGlja0Zvcm1hdDogXCJzXCIsXG4gICAgICBheGlzOiBcInRvcFwiLFxuICAgICAgbGFiZWw6IGxhbmdMb29rLm9icyxcbiAgICAgIGxhYmVsT2Zmc2V0OiA0MCxcbiAgICAgIGxhYmVsQW5jaG9yOiBcImNlbnRlclwiLFxuICAgICAgbGFiZWxBcnJvdzogXCJub25lXCIsXG4gICAgICBncmlkOiB0cnVlXG4gICAgfSxcbiAgICB5OiB7XG4gICAgICBsYWJlbDogbnVsbFxuICAgIH0sXG4gICAgbWFya3M6IFtcbiAgICAgIFBsb3QucnVsZVgoWzBdKSxcbiAgICAgIFBsb3QuYmFyWChkYXRhLCB7XG4gICAgICAgIHg6IFwib2JzZXJ2YXRpb25zXCIsXG4gICAgICAgIHk6IChkKSA9PiB5KGQucHJhY3RpY2UpLFxuICAgICAgICBzb3J0OiB7IHk6IFwieFwiLCByZXZlcnNlOiB0cnVlIH0sXG4gICAgICAgIGZpbGw6IGNvbG9yRmlsbFxuICAgICAgfSksXG4gICAgICBQbG90LnRleHRYKFxuICAgICAgICBkYXRhLFxuICAgICAgICBQbG90Lm1hcChcbiAgICAgICAgICB7IHRleHQ6ICh2KSA9PiB2Lm1hcCgoZCkgPT4gYCR7ZDMuZm9ybWF0KFwiLjJzXCIpKGQpfSBvYnMuYCkgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB4OiBcIm9ic2VydmF0aW9uc1wiLFxuICAgICAgICAgICAgeTogKGQpID0+IHkoZC5wcmFjdGljZSksXG4gICAgICAgICAgICB0ZXh0OiBcIm9ic2VydmF0aW9uc1wiLFxuICAgICAgICAgICAgdGV4dEFuY2hvcjogXCJzdGFydFwiLFxuICAgICAgICAgICAgZHg6IDUsXG4gICAgICAgICAgICBmaWxsOiBcIiMzMzNcIlxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgKVxuICAgIF1cbiAgfSk7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ2aWV3b2Ygc2VsZWN0Q3JvcE1lYW5EaWZmX25ldyA9IHtcbiAgY29uc3QgZGF0YSA9IFsuLi5uZXcgU2V0KGRhdGFfbWVhbkRpZmZfcHJhY3RpY2VDcm9wX25ldy5tYXAoKGQpID0+IGQuQ3JvcCkpXVxuICAgIC5tYXAoKGQpID0+IHtcbiAgICAgIHJldHVybiB7IGZpZWxkOiBkLCB0cmFuc2xhdGlvbjogdGQuQ3JvcC52YWx1ZXM/LltkXSB9O1xuICAgIH0pXG4gICAgLnNvcnQoKGEsIGIpID0+IF9sYW5nKGEudHJhbnNsYXRpb24pID4gX2xhbmcoYi50cmFuc2xhdGlvbikpO1xuICByZXR1cm4gSW5wdXRzLnNlbGVjdChkYXRhLCB7XG4gICAgbGFiZWw6IF9sYW5nKHRkLkNyb3ApLFxuICAgIHZhbHVlOiBkYXRhLmZpbmQoeCA9PiB4LmZpZWxkID09ICdNYWl6ZScpLFxuICAgIGZvcm1hdDogKHgpID0+IF9sYW5nKHgudHJhbnNsYXRpb24pXG4gIH0pO1xufVxuXG52aWV3b2YgcmFkaW9Tb3J0RG90UGxvdENyb3BfbmV3ID0ge1xuICBjb25zdCBkYXRhID0gW1xuICAgIHtcbiAgICAgIGtleTogXCJtZWFuXCIsXG4gICAgICBsYWJlbDogX2xhbmcobmJUZXh0LmlucHV0cy5yYWRpb1NvcnQuZmllbGRzLm1lYW4pLFxuICAgICAgY2hhbm5lbDogXCJ4XCIsXG4gICAgICByZXZlcnNlOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAga2V5OiBcIm9ic2VydmF0aW9uc1wiLFxuICAgICAgbGFiZWw6IF9sYW5nKG5iVGV4dC5pbnB1dHMucmFkaW9Tb3J0LmZpZWxkcy5vYnNlcnZhdGlvbnMpLFxuICAgICAgY2hhbm5lbDogXCJuT2JzXCIsXG4gICAgICByZXZlcnNlOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAga2V5OiBcImFscGhhXCIsXG4gICAgICBsYWJlbDogX2xhbmcobmJUZXh0LmlucHV0cy5yYWRpb1NvcnQuZmllbGRzLmFscGhhKSxcbiAgICAgIGNoYW5uZWw6IFwieVwiLFxuICAgICAgcmV2ZXJzZTogZmFsc2UsXG4gICAgfSxcbiAgXVxuICByZXR1cm4gSW5wdXRzLnJhZGlvKGRhdGEsIHsgbGFiZWw6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LmxhYmVscy5zb3J0KSwgZm9ybWF0OiBkID0+IGQubGFiZWwsIHZhbHVlOiBkYXRhLmZpbmQoeCA9PiB4LmtleSA9PT0gJ21lYW4nKSB9KTtcbn1cblxudmlld29mIHRvZ2dsZUNJc0Nyb3BfbmV3ID0ge1xuICBjb25zdCBkYXRhID0gW1xuICAgIF9sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QuaW5wdXRzLnRvZ2dsZUNvbmZJbnQuZmllbGRzLnZpc2libGUpXG4gIF1cbiAgcmV0dXJuIElucHV0cy5jaGVja2JveChkYXRhLCB7XG4gICAgbGFiZWw6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LmxhYmVscy5jb25maWRlbmNlSW50ZXJ2YWxzKVxuICB9KTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcbiAgY29uc3QgcGxvdERhdGEgPSBkYXRhX21lYW5EaWZmX3ByYWN0aWNlQ3JvcF9uZXcuZmlsdGVyKFxuICAgIChkKSA9PiBkLkNyb3AgPT09IHNlbGVjdENyb3BNZWFuRGlmZl9uZXcuZmllbGRcbiAgKTtcbiAgY29uc3QgbWFyZ2luQm90dG9tID0gMDtcbiAgY29uc3QgbWFyZ2luVG9wID0gNjA7XG4gIGNvbnN0IHlIZWlnaHQgPSAyNTtcbiAgY29uc3QgaGVpZ2h0ID1cbiAgICBtYXJnaW5Ub3AgK1xuICAgIG1hcmdpbkJvdHRvbSArXG4gICAgZDMuZ3JvdXAocGxvdERhdGEsIChkKSA9PiBkLlByYWN0aWNlKS5zaXplICogeUhlaWdodDtcbiAgY29uc3QgX2Zvcm1hdE51bSA9IGZvcm1hdE51bTtcbiAgY29uc3QgX3RvZ2dsZUNJcyA9IHRvZ2dsZUNJc0Nyb3BfbmV3O1xuICBjb25zdCBfcmFkaW9Tb3J0ID0gcmFkaW9Tb3J0RG90UGxvdENyb3BfbmV3O1xuICBjb25zdCBsYW5nTG9va3VwID0ge1xuICAgIHhMYWJlbDogX2xhbmcobmJUZXh0LnByYWN0aWNhbEltcGFjdC5sYWJlbHMueE1lYW5EaWZmKSxcbiAgICB0b29sdGlwOiB7XG4gICAgICBhZXo6IF9sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QudG9vbHRpcHMuYWV6KSxcbiAgICAgIG1lYW5EaWZmOiBfbGFuZyhuYlRleHQucHJhY3RpY2FsSW1wYWN0LnRvb2x0aXBzLm1lYW5EaWZmKSxcbiAgICAgIG1lYW5Db250cm9sOiBfbGFuZyhuYlRleHQucHJhY3RpY2FsSW1wYWN0LnRvb2x0aXBzLm1lYW5Db250cm9sKSxcbiAgICAgIGNyb3A6IExhbmcudG9TZW50ZW5jZUNhc2UoX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMuY3JvcC5zaW5ndWxhcikpLFxuICAgICAgY2lMbzogX2xhbmcobmJUZXh0LnByYWN0aWNhbEltcGFjdC50b29sdGlwcy5jaUxvd2VyKSxcbiAgICAgIGNpSGk6IF9sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QudG9vbHRpcHMuY2lVcHBlciksXG4gICAgICBvYnM6IExhbmcudG9TZW50ZW5jZUNhc2UoX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMub2JzZXJ2YXRpb24ucGx1cmFsKSksXG4gICAgICBwcmFjdGljZTogTGFuZy50b1NlbnRlbmNlQ2FzZShfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5wcmFjdGljZS5zaW5ndWxhcikpXG4gICAgfVxuICB9XG4gIGNvbnN0IHkgPSAoZCkgPT4gX2xhbmcodGQuUHJhY3RpY2UudmFsdWVzPy5bZF0pO1xuXG4gIHJldHVybiBQbG90LnBsb3Qoe1xuICAgIGhlaWdodCxcbiAgICBtYXJnaW5Cb3R0b20sXG4gICAgbWFyZ2luVG9wLFxuICAgIG1hcmdpbkxlZnQ6IDIwMCxcbiAgICBtYXJnaW5SaWdodDogNzAsXG4gICAgd2lkdGgsXG4gICAgeDoge1xuICAgICAgYXhpczogXCJ0b3BcIixcbiAgICAgIG5pY2U6IHRydWUsXG4gICAgICBncmlkOiB0cnVlLFxuICAgICAgbGFiZWw6IGxhbmdMb29rdXAueExhYmVsLFxuICAgICAgbGFiZWxBbmNob3I6IFwiY2VudGVyXCIsXG4gICAgICBsYWJlbE9mZnNldDogNDAsXG4gICAgICBsYWJlbEFycm93OiBcIm5vbmVcIlxuICAgIH0sXG4gICAgeToge1xuICAgICAgdGlja1NpemU6IDAsXG4gICAgICBsYWJlbDogbnVsbFxuICAgIH0sXG4gICAgY29sb3I6IHtcbiAgICAgIHJhbmdlOiBjb2xvclllbGxvd0dyZWVuXG4gICAgfSxcbiAgICBtYXJrczogW1xuICAgICAgLy8gbWFpbiB5LWF4aXNcbiAgICAgIFBsb3QuYXhpc1koe1xuICAgICAgICB0aWNrU2l6ZTogMFxuICAgICAgfSksXG4gICAgICAvLyBwb2ludGVyIHdoaXRlLW91dFxuICAgICAgUGxvdC5heGlzWShcbiAgICAgICAgUGxvdC5wb2ludGVyWSh7XG4gICAgICAgICAgZmlsbDogXCJ3aGl0ZVwiLFxuICAgICAgICAgIHRleHRTdHJva2U6IFwid2hpdGVcIixcbiAgICAgICAgICB0ZXh0U3Ryb2tlV2lkdGg6IDIsXG4gICAgICAgICAgdGlja1NpemU6IDBcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICAvLyBib2xkIHBvaW50ZXJcbiAgICAgIFBsb3QuYXhpc1koXG4gICAgICAgIFBsb3QucG9pbnRlclkoe1xuICAgICAgICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLFxuICAgICAgICAgIHRpY2tTaXplOiAwXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgLy8gemVybyBwb2ludFxuICAgICAgUGxvdC5ydWxlWChbMF0sIHsgc3Ryb2tlOiBcIiMzMzNcIiwgc3Ryb2tlRGFzaGFycmF5OiBbNF0gfSksXG4gICAgICAvLyBzcGFuIGxpbmVzOiBDSVxuICAgICAgUGxvdC5ydWxlWShfdG9nZ2xlQ0lzLmxlbmd0aCA+IDAgPyBwbG90RGF0YSA6IFtdLCB7XG4gICAgICAgIHk6IChkKSA9PiB5KGQuUHJhY3RpY2UpLFxuICAgICAgICB4MTogKGQpID0+IGQuTG93ZXIsXG4gICAgICAgIHgyOiAoZCkgPT4gZC5VcHBlcixcbiAgICAgICAgc3Ryb2tlOiBcIiMzMzNcIlxuICAgICAgfSksXG4gICAgICAvLyBtZWFuIGRpZmYgZG90c1xuICAgICAgUGxvdC5kb3QocGxvdERhdGEsIHtcbiAgICAgICAgeDogXCJNZWFuX0RpZmZlcmVuY2VcIixcbiAgICAgICAgeTogKGQpID0+IHkoZC5QcmFjdGljZSksXG4gICAgICAgIHNvcnQ6IHsgeTogX3JhZGlvU29ydC5jaGFubmVsLCByZXZlcnNlOiBfcmFkaW9Tb3J0LnJldmVyc2UgfSxcbiAgICAgICAgZmlsbDogKGQpID0+IGQuTWVhbl9EaWZmZXJlbmNlLFxuICAgICAgICByOiA4LFxuICAgICAgICBzdHJva2U6IFwiI2ZmZlwiLFxuICAgICAgICBzdHJva2VXaWR0aDogMC43LFxuICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgIG5PYnM6IHtcbiAgICAgICAgICAgIHZhbHVlOiBcIk5fT2JzXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByYWM6IHtcbiAgICAgICAgICAgIHZhbHVlOiAoZCkgPT4geShkLlByYWN0aWNlKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNyb3A6IHtcbiAgICAgICAgICAgIHZhbHVlOiBcIkNyb3BcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlmZjoge1xuICAgICAgICAgICAgbGFiZWw6IGxhbmdMb29rdXAudG9vbHRpcC5tZWFuRGlmZixcbiAgICAgICAgICAgIHZhbHVlOiBcIk1lYW5fRGlmZmVyZW5jZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb250cm9sOiB7XG4gICAgICAgICAgICBsYWJlbDogbGFuZ0xvb2t1cC50b29sdGlwLm1lYW5Db250cm9sLFxuICAgICAgICAgICAgdmFsdWU6ICdNZWFuX0NvbnRyb2wnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2lMb3c6IHtcbiAgICAgICAgICAgIGxhYmVsOiBsYW5nTG9va3VwLnRvb2x0aXAuY2lMbyxcbiAgICAgICAgICAgIHZhbHVlOiBcIkxvd2VyXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNpSGlnaDoge1xuICAgICAgICAgICAgbGFiZWw6IGxhbmdMb29rdXAudG9vbHRpcC5jaUhpLFxuICAgICAgICAgICAgdmFsdWU6IFwiVXBwZXJcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdGlwOiB7XG4gICAgICAgICAgZm9ybWF0OiB7XG4gICAgICAgICAgICB4OiBmYWxzZSxcbiAgICAgICAgICAgIHk6IGZhbHNlLFxuICAgICAgICAgICAgZmlsbDogZmFsc2UsXG4gICAgICAgICAgICBwcmFjOiBmYWxzZSxcbiAgICAgICAgICAgIGNyb3A6IGZhbHNlLFxuICAgICAgICAgICAgbk9iczogZmFsc2UsXG4gICAgICAgICAgICBkaWZmOiAoZCkgPT4gX2Zvcm1hdE51bShkKSxcbiAgICAgICAgICAgIGNvbnRyb2w6IChkKSA9PiBfZm9ybWF0TnVtKGQpLFxuICAgICAgICAgICAgY2lMb3c6IChkKSA9PiBfZm9ybWF0TnVtKGQpLFxuICAgICAgICAgICAgY2lIaWdoOiAoZCkgPT4gX2Zvcm1hdE51bShkKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICAvLyBkb3QgaGlnaGxpZ2h0IG9uIGhvdmVyXG4gICAgICBQbG90LmRvdChwbG90RGF0YSwgUGxvdC5wb2ludGVyKHtcbiAgICAgICAgeDogXCJNZWFuX0RpZmZlcmVuY2VcIixcbiAgICAgICAgeTogKGQpID0+IHkoZC5QcmFjdGljZSksXG4gICAgICAgIHI6IDgsXG4gICAgICAgIHN0cm9rZTogXCIjMzMzXCIsXG4gICAgICAgIHN0cm9rZVdpZHRoOiAwLjcsXG4gICAgICAgIGNoYW5uZWxzOiB7XG4gICAgICAgICAgbk9iczoge1xuICAgICAgICAgICAgbGFiZWw6IFwiIyBPYnNlcnZhdGlvbnNcIixcbiAgICAgICAgICAgIHZhbHVlOiBcIk5fT2JzXCJcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICB9KSksXG4gICAgICAvLyBvYnNlcnZhdGlvbiBjb3VudHNcbiAgICAgIFBsb3QudGV4dFkocGxvdERhdGEsIHtcbiAgICAgICAgeTogKGQpID0+IHkoZC5QcmFjdGljZSksXG4gICAgICAgIHRleHQ6IChkKSA9PiBkLk5fT2JzICsgXCIgb2JzLlwiLFxuICAgICAgICBmcmFtZUFuY2hvcjogXCJyaWdodFwiLFxuICAgICAgICB0ZXh0QW5jaG9yOiBcInN0YXJ0XCIsXG4gICAgICAgIGR4OiAxNlxuICAgICAgfSksXG4gICAgICAvLyBjb3VudHMgd2hpdGUtb3V0XG4gICAgICBQbG90LnRleHRZKFxuICAgICAgICBwbG90RGF0YSxcbiAgICAgICAgUGxvdC5wb2ludGVyWSh7XG4gICAgICAgICAgeTogKGQpID0+IHkoZC5QcmFjdGljZSksXG4gICAgICAgICAgdGV4dDogKGQpID0+IGQuTl9PYnMgKyBcIiBvYnMuXCIsXG4gICAgICAgICAgZmlsbDogXCJ3aGl0ZVwiLFxuICAgICAgICAgIHN0cm9rZTogXCJ3aGl0ZVwiLFxuICAgICAgICAgIHN0cm9rZVdpZHRoOiAyLFxuICAgICAgICAgIGZyYW1lQW5jaG9yOiBcInJpZ2h0XCIsXG4gICAgICAgICAgdGV4dEFuY2hvcjogXCJzdGFydFwiLFxuICAgICAgICAgIGR4OiAxNlxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIC8vIGNvdW50cyBib2xkIGhvdmVyXG4gICAgICBQbG90LnRleHRZKFxuICAgICAgICBwbG90RGF0YSxcbiAgICAgICAgUGxvdC5wb2ludGVyWSh7XG4gICAgICAgICAgeTogKGQpID0+IHkoZC5QcmFjdGljZSksXG4gICAgICAgICAgdGV4dDogKGQpID0+IGQuTl9PYnMgKyBcIiBvYnMuXCIsXG4gICAgICAgICAgZm9udFdlaWdodDogXCJib2xkXCIsXG4gICAgICAgICAgZnJhbWVBbmNob3I6IFwicmlnaHRcIixcbiAgICAgICAgICB0ZXh0QW5jaG9yOiBcInN0YXJ0XCIsXG4gICAgICAgICAgZHg6IDE2XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgXVxuICB9KTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ii8vIGluc2lnaHRzXG57XG4gIGNvbnN0IGxhbmdSb290ID0gbmJUZXh0O1xuICBjb25zdCBsYW5nQmFzZVBhdGggPSBsYW5nUm9vdC5wcmFjdGljYWxJbXBhY3QubWVhbkNyb3BEaWZmLmluc2lnaHRzOyAvLyBiYXNlIHBhdGggZm9yIGxhbmd1YWdlXG5cbiAgY29uc3QgZGF0YSA9IGRhdGFfbWVhbkRpZmZfcHJhY3RpY2VDcm9wX25ldztcbiAgY29uc3Qgc2VsZWN0aW9uID0gc2VsZWN0Q3JvcE1lYW5EaWZmX25ldy5maWVsZDtcblxuICBjb25zdCB0bF9jcm9wID0gKGNyb3ApID0+IF9sYW5nKHRkLkNyb3AudmFsdWVzPy5bY3JvcF0pO1xuICBjb25zdCB0bF9jcm9wX2FydGljbGUgPSAoY3JvcCkgPT4gX2xhbmcodGQuQ3JvcF93aXRoX2FydGljbGVzLnZhbHVlcz8uW2Nyb3BdKTtcbiAgY29uc3QgdGxfcHJhYyA9IChwcmFjKSA9PiBfbGFuZyh0ZC5QcmFjdGljZS52YWx1ZXM/LltwcmFjXSk7XG5cbiAgLy8gdG9wIDUgY3JvcHMgYnkgdW5pcXVlIHByYWN0aWNlc1xuICBjb25zdCB0b3A1Q3JvcHNCeVByYWN0aWNlcyA9IFQudGlkeShcbiAgICBkYXRhLFxuICAgIFQuY291bnQoW1wiQ3JvcFwiXSksXG4gICAgVC5hcnJhbmdlKFQuZGVzYyhcIm5cIikpLFxuICAgIFQuc2xpY2VIZWFkKDUpXG4gICk7XG4gIGNvbnN0IHRvcDVDcm9wc0J5UHJhY3RpY2VzU3RyaW5nID0gdG9wNUNyb3BzQnlQcmFjdGljZXNcbiAgICAubWFwKChkLCBpKSA9PiB7XG4gICAgICBpZiAoaSA9PSB0b3A1Q3JvcHNCeVByYWN0aWNlcy5sZW5ndGggLSAxKSByZXR1cm4gYGFuZCAqKiR7dGxfY3JvcChkLkNyb3ApfSoqYDtcbiAgICAgIHJldHVybiBgKioke3RsX2Nyb3AoZC5Dcm9wKX0qKmA7XG4gICAgfSlcbiAgICAuam9pbihcIiwgXCIpO1xuICBjb25zdCBsYW5nVG9wNSA9IF9sYW5nKGxhbmdCYXNlUGF0aC50b3A1KTtcbiAgY29uc3QgbGFuZ1RvcDVGb3JtYXQgPSBsYW5nVG9wNS5yZXBsYWNlKFxuICAgIExhbmcuZ2V0UmVnZXhGb3JOYW1lZEluc2VydGlvbihcInRvcDVDcm9wc0J5UHJhY3RpY2VzU3RyaW5nXCIpLFxuICAgIHRvcDVDcm9wc0J5UHJhY3RpY2VzU3RyaW5nXG4gICk7XG4gIGNvbnN0IGluc2lnaHRUb3A1ID0gbWRgJHtsYW5nVG9wNUZvcm1hdH1gO1xuXG4gIC8vIGNyb3Agc2VsZWN0aW9uXG4gIGNvbnN0IHNlbGVjdGVkQ3JvcCA9IHNlbGVjdGlvbjtcbiAgY29uc3QgZGF0YUNyb3AgPSBULnRpZHkoXG4gICAgZGF0YSxcbiAgICBULmZpbHRlcigoZCkgPT4gZC5Dcm9wID09IHNlbGVjdGVkQ3JvcClcbiAgKTtcblxuICAvLyBjcm9wIG92ZXJ2aWV3XG4gIGNvbnN0IGNyb3BPdmVydmlldyA9IFQudGlkeShcbiAgICBkYXRhQ3JvcCxcbiAgICBULnN1bW1hcml6ZSh7XG4gICAgICB0b3RhbE9iczogVC5zdW0oXCJOX09ic1wiKSxcbiAgICAgIHRvdGFsUHJhY3RpY2VzOiBULm4oKVxuICAgIH0pXG4gICk/LlswXTtcbiAgY29uc3QgbGFuZ0Nyb3BPdmVydmlldyA9IF9sYW5nKGxhbmdCYXNlUGF0aC5jcm9wT3ZlcnZpZXcpO1xuICBjb25zdCBsYW5nQ3JvcE92ZXJ2aWV3SXRlbXMgPSBbXG4gICAgeyBpbnNlcnROYW1lOiBcInNlbGVjdGVkQ3JvcFwiLCB2YWx1ZTogTGFuZy50b1NlbnRlbmNlQ2FzZSh0bF9jcm9wX2FydGljbGUoc2VsZWN0ZWRDcm9wKSkgfSxcbiAgICB7IGluc2VydE5hbWU6IFwidG90YWxPYnNcIiwgdmFsdWU6IGZvcm1hdENvbW1hKGNyb3BPdmVydmlldy50b3RhbE9icykgfSxcbiAgICB7IGluc2VydE5hbWU6IFwidG90YWxQcmFjdGljZXNcIiwgdmFsdWU6IGNyb3BPdmVydmlldy50b3RhbFByYWN0aWNlcyB9XG4gIF07XG4gIGNvbnN0IGluc2lnaHRDcm9wT3ZlcnZpZXcgPSBsYW5nQ3JvcE92ZXJ2aWV3SXRlbXMucmVkdWNlKChvdmVydmlldywgaXRlbSkgPT4ge1xuICAgIHJldHVybiBvdmVydmlldy5yZXBsYWNlKFxuICAgICAgTGFuZy5nZXRSZWdleEZvck5hbWVkSW5zZXJ0aW9uKGl0ZW0uaW5zZXJ0TmFtZSksXG4gICAgICBpdGVtLnZhbHVlXG4gICAgKTtcbiAgfSwgbGFuZ0Nyb3BPdmVydmlldyk7XG5cbiAgLy8gcG9zaXRpdmUgeWllbGRcbiAgY29uc3QgY3JvcFBvc2l0aXZlID0gVC50aWR5KFxuICAgIGRhdGFDcm9wLFxuICAgIFQuZmlsdGVyKChkKSA9PiBkLk1lYW5fRGlmZmVyZW5jZSA+IDApXG4gICk/Lmxlbmd0aDtcbiAgY29uc3QgbGFuZ0Nyb3BQb3NpdGl2ZSA9IF9sYW5nKGxhbmdCYXNlUGF0aC5jcm9wUG9zaXRpdmUubWFpbik7XG4gIGNvbnN0IGxhbmdDcm9wU3Vic3RyaW5nID0gYCoqJHtjcm9wUG9zaXRpdmV9KiogJHtcbiAgICBjcm9wUG9zaXRpdmUgPT0gMVxuICAgICAgPyBfbGFuZyhsYW5nQmFzZVBhdGguY3JvcFBvc2l0aXZlLnNpbmd1bGFyKVxuICAgICAgOiBfbGFuZyhsYW5nQmFzZVBhdGguY3JvcFBvc2l0aXZlLnBsdXJhbClcbiAgfWA7XG4gIGNvbnN0IGluc2lnaHRDcm9wUG9zaXRpdmUgPSBsYW5nQ3JvcFBvc2l0aXZlLnJlcGxhY2UoXG4gICAgTGFuZy5nZXRSZWdleEZvck5hbWVkSW5zZXJ0aW9uKFwiY3JvcFBvc2l0aXZlVGV4dFwiKSxcbiAgICBsYW5nQ3JvcFN1YnN0cmluZ1xuICApO1xuXG4gIC8vIHRvcCBmb3Igc2VsZWN0ZWQgY3JvcFxuICBjb25zdCBuID0gMjsgLy8gIyB0b3AgY3JvcHMgdG8gaW5jbHVkZVxuICBjb25zdCB0b3BDcm9wID0gVC50aWR5KFxuICAgIGRhdGFDcm9wLFxuICAgIFQuc2xpY2VNYXgobiwgXCJNZWFuX0RpZmZlcmVuY2VcIiksXG4gICAgVC5hcnJhbmdlKFQuZGVzYyhcIk1lYW5fRGlmZmVyZW5jZVwiKSlcbiAgKTtcbiAgY29uc3QgZGlmZjEgPSB0b3BDcm9wPy5bMF07XG4gIGNvbnN0IGRpZmYyID0gdG9wQ3JvcD8uWzFdO1xuXG4gIGNvbnN0IGxhbmdEaWZmRmlyc3QgPSBfbGFuZyhsYW5nQmFzZVBhdGguZGlmZkZpcnN0Lm1haW4pO1xuICBjb25zdCBsYW5nRGlmZkZpcnN0X2luY0RlYyA9XG4gICAgZGlmZjEuTWVhbl9EaWZmZXJlbmNlID49IDBcbiAgICAgID8gX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMuaW5jcmVhc2UpXG4gICAgICA6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLmRlY3JlYXNlKTtcbiAgY29uc3QgbGFuZ0RpZmZGaXJzdF9vYnNlcnZhdGlvbnMgPSBkaWZmMS5OX09icztcbiAgY29uc3QgbGFuZ0RpZmZGaXJzdEl0ZW1zID0gW1xuICAgIHsgaW5zZXJ0TmFtZTogXCJwcmFjdGljZVwiLCB2YWx1ZTogdGxfcHJhYyhkaWZmMS5QcmFjdGljZSkgfSxcbiAgICB7XG4gICAgICBpbnNlcnROYW1lOiBcImluY0RlY1wiLFxuICAgICAgdmFsdWU6XG4gICAgICAgIGRpZmYxLk1lYW5fRGlmZmVyZW5jZSA+PSAwXG4gICAgICAgICAgPyBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5pbmNyZWFzZSlcbiAgICAgICAgICA6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLmRlY3JlYXNlKVxuICAgIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcIm1lYW5EaWZmXCIsIHZhbHVlOiBmb3JtYXROdW0oZGlmZjEuTWVhbl9EaWZmZXJlbmNlKSB9LFxuICAgIHsgaW5zZXJ0TmFtZTogXCJvYnNlcnZhdGlvbkNvdW50XCIsIHZhbHVlOiBmb3JtYXRDb21tYShkaWZmMS5OX09icykgfSxcbiAgICB7XG4gICAgICBpbnNlcnROYW1lOiBcIm9ic2VydmF0aW9uU3RyaW5nXCIsXG4gICAgICB2YWx1ZTpcbiAgICAgICAgZGlmZjEuTl9PYnMgPiAxXG4gICAgICAgICAgPyBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5wbHVyYWwpXG4gICAgICAgICAgOiBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5zaW5ndWxhcilcbiAgICB9XG4gIF07XG4gIGNvbnN0IGluc2lnaHREaWZmRmlyc3QgPSBsYW5nRGlmZkZpcnN0SXRlbXMucmVkdWNlKChvdmVydmlldywgaXRlbSkgPT4ge1xuICAgIHJldHVybiBvdmVydmlldy5yZXBsYWNlKFxuICAgICAgTGFuZy5nZXRSZWdleEZvck5hbWVkSW5zZXJ0aW9uKGl0ZW0uaW5zZXJ0TmFtZSksXG4gICAgICBpdGVtLnZhbHVlXG4gICAgKTtcbiAgfSwgbGFuZ0RpZmZGaXJzdCk7XG5cbiAgY29uc3QgbGFuZ0RpZmZTZWNvbmQgPSBfbGFuZyhsYW5nQmFzZVBhdGguZGlmZlNlY29uZC5tYWluKTtcbiAgY29uc3QgbGFuZ0RpZmZTZWNvbmRfaW5jRGVjID1cbiAgICBkaWZmMj8uTWVhbl9EaWZmZXJlbmNlID49IDBcbiAgICAgID8gX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMuaW5jcmVhc2UpXG4gICAgICA6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLmRlY3JlYXNlKTtcbiAgY29uc3QgbGFuZ0RpZmZTZWNvbmRfb2JzZXJ2YXRpb25zID0gZGlmZjI/Lk5fT2JzO1xuICBjb25zdCBsYW5nRGlmZlNlY29uZEl0ZW1zID0gW1xuICAgIHsgaW5zZXJ0TmFtZTogXCJwcmFjdGljZVwiLCB2YWx1ZTogdGxfcHJhYyhkaWZmMj8uUHJhY3RpY2UpIH0sXG4gICAge1xuICAgICAgaW5zZXJ0TmFtZTogXCJpbmNEZWNcIixcbiAgICAgIHZhbHVlOlxuICAgICAgICBkaWZmMj8uTWVhbl9EaWZmZXJlbmNlID49IDBcbiAgICAgICAgICA/IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLmluY3JlYXNlKVxuICAgICAgICAgIDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMuZGVjcmVhc2UpXG4gICAgfSxcbiAgICB7IGluc2VydE5hbWU6IFwibWVhbkRpZmZcIiwgdmFsdWU6IGZvcm1hdE51bShkaWZmMj8uTWVhbl9EaWZmZXJlbmNlKSB9LFxuICAgIHsgaW5zZXJ0TmFtZTogXCJvYnNlcnZhdGlvbkNvdW50XCIsIHZhbHVlOiBmb3JtYXRDb21tYShkaWZmMj8uTl9PYnMpIH0sXG4gICAge1xuICAgICAgaW5zZXJ0TmFtZTogXCJvYnNlcnZhdGlvblN0cmluZ1wiLFxuICAgICAgdmFsdWU6XG4gICAgICAgIGRpZmYyPy5OX09icyA+IDFcbiAgICAgICAgICA/IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLm9ic2VydmF0aW9uLnBsdXJhbClcbiAgICAgICAgICA6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLm9ic2VydmF0aW9uLnNpbmd1bGFyKVxuICAgIH1cbiAgXTtcbiAgY29uc3QgaW5zaWdodERpZmZTZWNvbmQgPSBkaWZmMlxuICAgID8gbGFuZ0RpZmZTZWNvbmRJdGVtcy5yZWR1Y2UoKG92ZXJ2aWV3LCBpdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiBvdmVydmlldy5yZXBsYWNlKFxuICAgICAgICAgIExhbmcuZ2V0UmVnZXhGb3JOYW1lZEluc2VydGlvbihpdGVtLmluc2VydE5hbWUpLFxuICAgICAgICAgIGl0ZW0udmFsdWVcbiAgICAgICAgKTtcbiAgICAgIH0sIGxhbmdEaWZmU2Vjb25kKVxuICAgIDogXCJcIjtcblxuICByZXR1cm4gbWRgJHtpbnNpZ2h0VG9wNX1cblxuJHtpbnNpZ2h0Q3JvcE92ZXJ2aWV3fSAke2luc2lnaHRDcm9wUG9zaXRpdmV9XG5cbiR7aW5zaWdodERpZmZGaXJzdH0gJHtpbnNpZ2h0RGlmZlNlY29uZH1gO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC05IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIHNlbGVjdENyb3BNZWFuRGlmZkFFWiA9IHtcbiAgY29uc3QgZGF0YSA9IFtcbiAgICAuLi5uZXcgU2V0KGRhdGFfbWVhbkRpZmZfYWV6UHJhY3RpY2VDcm9wX25ldy5tYXAoKGQpID0+IGQuQ3JvcCkpXG4gIF1cbiAgICAubWFwKChkKSA9PiB7XG4gICAgICByZXR1cm4geyBmaWVsZDogZCwgdHJhbnNsYXRpb246IHRkLkNyb3AudmFsdWVzPy5bZF0gfTtcbiAgICB9KVxuICAgIC5zb3J0KChhLCBiKSA9PiBfbGFuZyhhLnRyYW5zbGF0aW9uKSA+IF9sYW5nKGIudHJhbnNsYXRpb24pKTtcbiAgcmV0dXJuIElucHV0cy5zZWxlY3QoZGF0YSwge1xuICAgIGxhYmVsOiBfbGFuZyh0ZC5Dcm9wKSxcbiAgICB2YWx1ZTogZGF0YS5maW5kKCh4KSA9PiB4LmZpZWxkID09IFwiTWFpemVcIiksXG4gICAgZm9ybWF0OiAoeCkgPT4gX2xhbmcoeC50cmFuc2xhdGlvbilcbiAgfSk7XG59XG5cbnZpZXdvZiByYWRpb1NvcnREb3RQbG90Q3JvcEFFWl9uZXcgPSB7XG4gIGNvbnN0IGRhdGEgPSBbXG4gICAge1xuICAgICAga2V5OiBcIm1lYW5cIixcbiAgICAgIGxhYmVsOiBfbGFuZyhuYlRleHQuaW5wdXRzLnJhZGlvU29ydC5maWVsZHMubWVhbiksXG4gICAgICBjaGFubmVsOiBcInhcIixcbiAgICAgIHJldmVyc2U6IHRydWVcbiAgICB9LFxuICAgIHtcbiAgICAgIGtleTogXCJvYnNlcnZhdGlvbnNcIixcbiAgICAgIGxhYmVsOiBfbGFuZyhuYlRleHQuaW5wdXRzLnJhZGlvU29ydC5maWVsZHMub2JzZXJ2YXRpb25zKSxcbiAgICAgIGNoYW5uZWw6IFwibk9ic1wiLFxuICAgICAgcmV2ZXJzZTogdHJ1ZVxuICAgIH0sXG4gICAge1xuICAgICAga2V5OiBcImFscGhhXCIsXG4gICAgICBsYWJlbDogX2xhbmcobmJUZXh0LmlucHV0cy5yYWRpb1NvcnQuZmllbGRzLmFscGhhKSxcbiAgICAgIGNoYW5uZWw6IFwieVwiLFxuICAgICAgcmV2ZXJzZTogZmFsc2VcbiAgICB9XG4gIF07XG4gIHJldHVybiBJbnB1dHMucmFkaW8oZGF0YSwge1xuICAgIGxhYmVsOiBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC5sYWJlbHMuc29ydCksXG4gICAgZm9ybWF0OiAoZCkgPT4gZC5sYWJlbCxcbiAgICB2YWx1ZTogZGF0YS5maW5kKCh4KSA9PiB4LmtleSA9PT0gXCJtZWFuXCIpXG4gIH0pO1xufVxuXG52aWV3b2YgYWV6U2VsZWN0X25ldyA9IHtcbiAgY29uc3QgZGF0YSA9IGRhdGFfbWVhbkRpZmZfYWV6UHJhY3RpY2VDcm9wX25ldy5maWx0ZXIoXG4gICAgKGQpID0+IGQuQ3JvcCA9PT0gc2VsZWN0Q3JvcE1lYW5EaWZmQUVaLmZpZWxkXG4gICk7XG4gIGNvbnN0IGFlek5hbWVzID0gZDNcbiAgICAuZ3JvdXBzKGRhdGEsIChkKSA9PiBkLkFFWl9DbGFzc19GQU8pXG4gICAgLm1hcCgoZCkgPT4gZFswXSlcbiAgICAuc29ydCgpO1xuICBjb25zdCBvcHRpb25zID0gYWV6TmFtZXMubWFwKChkKSA9PiAoe1xuICAgIGZpZWxkOiBkLFxuICAgIHRyYW5zbGF0aW9uOiB0ZC5BRVpfQ2xhc3NfRkFPLnZhbHVlcz8uW2RdXG4gIH0pKTtcbiAgY29uc3QgbnVsbFZhbHVlID0ge1xuICAgIGZpZWxkOiBudWxsLFxuICAgIHRyYW5zbGF0aW9uOiBuYlRleHQuaW5wdXRzLmRlZmF1bHRzLmFlelxuICB9O1xuICBjb25zdCBpbnB1dE5hbWVzID0gW251bGxWYWx1ZSwgLi4ub3B0aW9uc107XG4gIHJldHVybiBJbnB1dHMuc2VsZWN0KGlucHV0TmFtZXMsIHtcbiAgICBsYWJlbDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQubGFiZWxzLmhpZ2hsaWdodEFleiksXG4gICAgdmFsdWU6IGFlek5hbWVzLFxuICAgIGZvcm1hdDogeCA9PiBfbGFuZyh4LnRyYW5zbGF0aW9uKVxuICB9KTtcbn1cblxudmlld29mIHRvZ2dsZUNJc0Nyb3BBRVpfbmV3ID0ge1xuICBjb25zdCBkYXRhID0gW1xuICAgIF9sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QuaW5wdXRzLnRvZ2dsZUNvbmZJbnQuZmllbGRzLnZpc2libGUpXG4gIF07XG4gIHJldHVybiBJbnB1dHMuY2hlY2tib3goZGF0YSwge1xuICAgIGxhYmVsOiBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC5sYWJlbHMuY29uZmlkZW5jZUludGVydmFscylcbiAgfSk7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiXG5wbG90RG90QUVaX25ldyA9IHtcbiAgY29uc3QgYmFzZURhdGEgPSBkYXRhX21lYW5EaWZmX2FlelByYWN0aWNlQ3JvcF9uZXc7XG4gIGNvbnN0IHBsb3REYXRhID0gYmFzZURhdGEuZmlsdGVyKFxuICAgIChkKSA9PiBkLkNyb3AgPT09IHNlbGVjdENyb3BNZWFuRGlmZkFFWi5maWVsZFxuICApO1xuICBjb25zdCBhZXpEYXRhID0gVC50aWR5KFxuICAgIHBsb3REYXRhLFxuICAgIFQuZmlsdGVyKChkKSA9PiB7XG4gICAgICBpZiAoYWV6U2VsZWN0X25ldy5maWVsZCA9PSBudWxsKSByZXR1cm4gZDtcbiAgICAgIHJldHVybiBkLkFFWl9DbGFzc19GQU8gPT0gYWV6U2VsZWN0X25ldy5maWVsZDtcbiAgICB9KSxcbiAgICBULmFycmFuZ2UoXCJNZWFuX0RpZmZlcmVuY2VcIilcbiAgKTtcbiAgY29uc3QgY29sb3JEb21haW4gPSBhZXpDb2xvcl9uZXcuZG9tYWluO1xuICBjb25zdCBjb2xvclJhbmdlID0gYWV6Q29sb3JfbmV3LnJhbmdlO1xuICBjb25zdCBtYXJnaW5Cb3R0b20gPSAwO1xuICBjb25zdCBtYXJnaW5Ub3AgPSA4MDtcbiAgY29uc3QgeUhlaWdodCA9IDI1O1xuICBjb25zdCBoZWlnaHQgPVxuICAgIG1hcmdpblRvcCArXG4gICAgbWFyZ2luQm90dG9tICtcbiAgICBkMy5ncm91cChwbG90RGF0YSwgKGQpID0+IGQuUHJhY3RpY2UpLnNpemUgKiB5SGVpZ2h0O1xuICBjb25zdCBfZm9ybWF0TnVtID0gZm9ybWF0TnVtO1xuICBjb25zdCBfdG9nZ2xlQ0lzID0gdG9nZ2xlQ0lzQ3JvcEFFWl9uZXc7XG4gIGNvbnN0IF9yYWRpb1NvcnQgPSByYWRpb1NvcnREb3RQbG90Q3JvcEFFWl9uZXc7XG4gIGNvbnN0IGxhbmdMb29rdXAgPSB7XG4gICAgeExhYmVsOiBfbGFuZyhuYlRleHQucHJhY3RpY2FsSW1wYWN0LmxhYmVscy54TWVhbkRpZmYpLFxuICAgIHRvb2x0aXA6IHtcbiAgICAgIGFlejogX2xhbmcobmJUZXh0LnByYWN0aWNhbEltcGFjdC50b29sdGlwcy5hZXopLFxuICAgICAgbWVhbkRpZmY6IF9sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QudG9vbHRpcHMubWVhbkRpZmYpLFxuICAgICAgbWVhbkNvbnRyb2w6IF9sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QudG9vbHRpcHMubWVhbkNvbnRyb2wpLFxuICAgICAgY3JvcDogTGFuZy50b1NlbnRlbmNlQ2FzZShcbiAgICAgICAgX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMuY3JvcC5zaW5ndWxhcilcbiAgICAgICksXG4gICAgICBjaUxvOiBfbGFuZyhuYlRleHQucHJhY3RpY2FsSW1wYWN0LnRvb2x0aXBzLmNpTG93ZXIpLFxuICAgICAgY2lIaTogX2xhbmcobmJUZXh0LnByYWN0aWNhbEltcGFjdC50b29sdGlwcy5jaVVwcGVyKSxcbiAgICAgIG9iczogTGFuZy50b1NlbnRlbmNlQ2FzZShcbiAgICAgICAgX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMub2JzZXJ2YXRpb24ucGx1cmFsKVxuICAgICAgKSxcbiAgICAgIHByYWN0aWNlOiBMYW5nLnRvU2VudGVuY2VDYXNlKFxuICAgICAgICBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5wcmFjdGljZS5zaW5ndWxhcilcbiAgICAgIClcbiAgICB9XG4gIH07XG4gIGNvbnN0IHkgPSAoZCkgPT4gX2xhbmcodGQuUHJhY3RpY2UudmFsdWVzPy5bZF0pO1xuICBjb25zdCBjb2xvciA9IChkKSA9PiBfbGFuZyh0ZC5BRVpfQ2xhc3NfRkFPLnZhbHVlcz8uW2RdKTtcblxuICByZXR1cm4gUGxvdC5wbG90KHtcbiAgICBoZWlnaHQsXG4gICAgbWFyZ2luQm90dG9tLFxuICAgIG1hcmdpblRvcCxcbiAgICBtYXJnaW5MZWZ0OiAyMDAsXG4gICAgbWFyZ2luUmlnaHQ6IDcwLFxuICAgIHdpZHRoLFxuICAgIHg6IHtcbiAgICAgIGF4aXM6IFwidG9wXCIsXG4gICAgICBuaWNlOiB0cnVlLFxuICAgICAgZ3JpZDogdHJ1ZSxcbiAgICAgIGxhYmVsOiBsYW5nTG9va3VwLnhMYWJlbCxcbiAgICAgIGxhYmVsQW5jaG9yOiBcImNlbnRlclwiLFxuICAgICAgbGFiZWxPZmZzZXQ6IDQwLFxuICAgICAgbGFiZWxBcnJvdzogXCJub25lXCJcbiAgICB9LFxuICAgIHk6IHtcbiAgICAgIHRpY2tTaXplOiAwLFxuICAgICAgbGFiZWw6IG51bGxcbiAgICB9LFxuICAgIGNvbG9yOiB7XG4gICAgICBkb21haW46IGNvbG9yRG9tYWluLFxuICAgICAgcmFuZ2U6IGNvbG9yUmFuZ2VcbiAgICB9LFxuICAgIG1hcmtzOiBbXG4gICAgICAvLyBtYWluIHktYXhpc1xuICAgICAgUGxvdC5heGlzWSh7XG4gICAgICAgIHRpY2tTaXplOiAwXG4gICAgICB9KSxcbiAgICAgIC8vIHBvaW50ZXIgd2hpdGUtb3V0XG4gICAgICBQbG90LmF4aXNZKFxuICAgICAgICBQbG90LnBvaW50ZXJZKHtcbiAgICAgICAgICBmaWxsOiBcIndoaXRlXCIsXG4gICAgICAgICAgdGV4dFN0cm9rZTogXCJ3aGl0ZVwiLFxuICAgICAgICAgIHRleHRTdHJva2VXaWR0aDogMixcbiAgICAgICAgICB0aWNrU2l6ZTogMFxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIC8vIGJvbGQgcG9pbnRlclxuICAgICAgUGxvdC5heGlzWShcbiAgICAgICAgUGxvdC5wb2ludGVyWSh7XG4gICAgICAgICAgZm9udFdlaWdodDogXCJib2xkXCIsXG4gICAgICAgICAgdGlja1NpemU6IDBcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICAvLyB6ZXJvIHBvaW50XG4gICAgICBQbG90LnJ1bGVYKFswXSwgeyBzdHJva2U6IFwiIzMzM1wiLCBzdHJva2VEYXNoYXJyYXk6IFs0XSB9KSxcbiAgICAgIC8vIGJhc2UgZG90c1xuICAgICAgUGxvdC5kb3QocGxvdERhdGEsIHtcbiAgICAgICAgeDogXCJNZWFuX0RpZmZlcmVuY2VcIixcbiAgICAgICAgeTogKGQpID0+IHkoZC5QcmFjdGljZSksXG4gICAgICAgIHNvcnQ6IHsgeTogX3JhZGlvU29ydC5jaGFubmVsLCByZXZlcnNlOiBfcmFkaW9Tb3J0LnJldmVyc2UgfSxcbiAgICAgICAgcjogOCxcbiAgICAgICAgc3Ryb2tlOiBcIiNmZmZcIixcbiAgICAgICAgc3Ryb2tlV2lkdGg6IDAuNyxcbiAgICAgICAgZmlsbDogXCIjZWZlZmVmXCIsXG4gICAgICAgIGNoYW5uZWxzOiB7XG4gICAgICAgICAgbk9iczoge1xuICAgICAgICAgICAgbGFiZWw6IFwiIyBPYnNlcnZhdGlvbnNcIixcbiAgICAgICAgICAgIHZhbHVlOiBcIk5fT2JzXCJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgLy8gc2VsZWN0aW9uOiBzcGFuIGxpbmVzOiBDSVxuICAgICAgUGxvdC5ydWxlWShfdG9nZ2xlQ0lzLmxlbmd0aCA+IDAgPyBhZXpEYXRhIDogW10sIHtcbiAgICAgICAgeTogKGQpID0+IHkoZC5QcmFjdGljZSksXG4gICAgICAgIHgxOiAoZCkgPT4gKGQuTG93ZXIgPT0gXCJOQVwiID8gbnVsbCA6IGQuTG93ZXIpLFxuICAgICAgICB4MjogKGQpID0+IChkLlVwcGVyID09IFwiTkFcIiA/IG51bGwgOiBkLlVwcGVyKSxcbiAgICAgICAgc3Ryb2tlOiBcIiMzMzNcIlxuICAgICAgfSksXG4gICAgICAvLyBzZWxlY3Rpb246IG1lYW4gZGlmZiBkb3RzXG4gICAgICBQbG90LmRvdChhZXpEYXRhLCB7XG4gICAgICAgIHg6IFwiTWVhbl9EaWZmZXJlbmNlXCIsXG4gICAgICAgIHk6IChkKSA9PiB5KGQuUHJhY3RpY2UpLFxuICAgICAgICBmaWxsOiAoZCkgPT4ge1xuICAgICAgICAgIHJldHVybiBjb2xvcihkLkFFWl9DbGFzc19GQU8pO1xuICAgICAgICB9LFxuICAgICAgICByOiA4LFxuICAgICAgICBzdHJva2U6IFwiI2ZmZlwiLFxuICAgICAgICBzdHJva2VXaWR0aDogMC43LFxuICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgIGFlejoge1xuICAgICAgICAgICAgbGFiZWw6IGxhbmdMb29rdXAudG9vbHRpcC5hZXosXG4gICAgICAgICAgICB2YWx1ZTogKGQpID0+IGNvbG9yKGQuQUVaX0NsYXNzX0ZBTylcbiAgICAgICAgICB9LFxuICAgICAgICAgIG5PYnM6IHtcbiAgICAgICAgICAgIGxhYmVsOiBsYW5nTG9va3VwLnRvb2x0aXAub2JzLFxuICAgICAgICAgICAgdmFsdWU6IFwiTl9PYnNcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlmZjoge1xuICAgICAgICAgICAgbGFiZWw6IGxhbmdMb29rdXAudG9vbHRpcC5tZWFuRGlmZixcbiAgICAgICAgICAgIHZhbHVlOiBcIk1lYW5fRGlmZmVyZW5jZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb250cm9sOiB7XG4gICAgICAgICAgICBsYWJlbDogbGFuZ0xvb2t1cC50b29sdGlwLm1lYW5Db250cm9sLFxuICAgICAgICAgICAgdmFsdWU6IFwiTWVhbl9Db250cm9sXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByYWM6IHtcbiAgICAgICAgICAgIGxhYmVsOiBsYW5nTG9va3VwLnRvb2x0aXAucHJhY3RpY2UsXG4gICAgICAgICAgICB2YWx1ZTogKGQpID0+IHkoZC5QcmFjdGljZSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNyb3A6IHtcbiAgICAgICAgICAgIGxhYmVsOiBsYW5nTG9va3VwLnRvb2x0aXAuY3JvcCxcbiAgICAgICAgICAgIHZhbHVlOiBcIkNyb3BcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2lMb3c6IHtcbiAgICAgICAgICAgIGxhYmVsOiBsYW5nTG9va3VwLnRvb2x0aXAuY2lMbyxcbiAgICAgICAgICAgIHZhbHVlOiBcIkxvd2VyXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNpSGlnaDoge1xuICAgICAgICAgICAgbGFiZWw6IGxhbmdMb29rdXAudG9vbHRpcC5jaUhpLFxuICAgICAgICAgICAgdmFsdWU6IFwiVXBwZXJcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdGlwOiB7XG4gICAgICAgICAgZm9ybWF0OiB7XG4gICAgICAgICAgICB4OiBmYWxzZSxcbiAgICAgICAgICAgIHk6IGZhbHNlLFxuICAgICAgICAgICAgZmlsbDogZmFsc2UsXG4gICAgICAgICAgICBwcmFjOiBmYWxzZSxcbiAgICAgICAgICAgIGNyb3A6IGZhbHNlLFxuICAgICAgICAgICAgYWV6OiB0cnVlLFxuICAgICAgICAgICAgZGlmZjogKGQpID0+IF9mb3JtYXROdW0oZCksXG4gICAgICAgICAgICBjb250cm9sOiAoZCkgPT4gX2Zvcm1hdE51bShkKSxcbiAgICAgICAgICAgIGNpTG93OiAoZCkgPT4gX2Zvcm1hdE51bShkKSxcbiAgICAgICAgICAgIGNpSGlnaDogKGQpID0+IF9mb3JtYXROdW0oZCksXG4gICAgICAgICAgICBuT2JzOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIC8vIGRvdCBoaWdobGlnaHQgb24gaG92ZXJcbiAgICAgIFBsb3QuZG90KFxuICAgICAgICBhZXpEYXRhLFxuICAgICAgICBQbG90LnBvaW50ZXIoe1xuICAgICAgICAgIHg6IFwiTWVhbl9EaWZmZXJlbmNlXCIsXG4gICAgICAgICAgeTogKGQpID0+IHkoZC5QcmFjdGljZSksXG4gICAgICAgICAgcjogOCxcbiAgICAgICAgICBmaWxsOiAoZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGQuQUVaX0NsYXNzX0ZBTztcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0cm9rZTogXCIjMzMzXCIsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IDAuNyxcbiAgICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgICAgbk9iczoge1xuICAgICAgICAgICAgICBsYWJlbDogXCIjIE9ic2VydmF0aW9uc1wiLFxuICAgICAgICAgICAgICB2YWx1ZTogXCJOX09ic1wiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIC8vIG9ic2VydmF0aW9uIGNvdW50c1xuICAgICAgUGxvdC50ZXh0WShcbiAgICAgICAgYWV6RGF0YSxcbiAgICAgICAgUGxvdC5tYXAoXG4gICAgICAgICAgeyB0ZXh0OiAodmFsdWVzKSA9PiB2YWx1ZXMubWFwKChkKSA9PiBkICsgXCIgb2JzLlwiKSB9LFxuICAgICAgICAgIFBsb3QuZ3JvdXBZKFxuICAgICAgICAgICAgeyB0ZXh0OiBcInN1bVwiIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHk6IChkKSA9PiB5KGQuUHJhY3RpY2UpLFxuICAgICAgICAgICAgICB0ZXh0OiBcIk5fT2JzXCIsXG4gICAgICAgICAgICAgIGZyYW1lQW5jaG9yOiBcInJpZ2h0XCIsXG4gICAgICAgICAgICAgIHRleHRBbmNob3I6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgZHg6IDE2XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLFxuICAgICAgLy8gZGlnaXRhbCB3aGl0ZS1vdXRcbiAgICAgIFBsb3QudGV4dFkoXG4gICAgICAgIGFlekRhdGEsXG4gICAgICAgIFBsb3QucG9pbnRlclkoXG4gICAgICAgICAgUGxvdC5tYXAoXG4gICAgICAgICAgICB7IHRleHQ6ICh2YWx1ZXMpID0+IHZhbHVlcy5tYXAoKGQpID0+IGQgKyBcIiBvYnMuXCIpIH0sXG4gICAgICAgICAgICBQbG90Lmdyb3VwWShcbiAgICAgICAgICAgICAgeyB0ZXh0OiBcInN1bVwiIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB5OiAoZCkgPT4geShkLlByYWN0aWNlKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIk5fT2JzXCIsXG4gICAgICAgICAgICAgICAgZnJhbWVBbmNob3I6IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICB0ZXh0QW5jaG9yOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgZHg6IDE2LFxuICAgICAgICAgICAgICAgIGZpbGw6IFwid2hpdGVcIixcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLFxuICAgICAgLy8gb2JzZXJ2YXRpb24gY291bnRzIGJvbGQgaG92ZXJcbiAgICAgIFBsb3QudGV4dFkoXG4gICAgICAgIGFlekRhdGEsXG4gICAgICAgIFBsb3QucG9pbnRlclkoXG4gICAgICAgICAgUGxvdC5tYXAoXG4gICAgICAgICAgICB7IHRleHQ6ICh2YWx1ZXMpID0+IHZhbHVlcy5tYXAoKGQpID0+IGQgKyBcIiBvYnMuXCIpIH0sXG4gICAgICAgICAgICBQbG90Lmdyb3VwWShcbiAgICAgICAgICAgICAgeyB0ZXh0OiBcInN1bVwiIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB5OiAoZCkgPT4geShkLlByYWN0aWNlKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIk5fT2JzXCIsXG4gICAgICAgICAgICAgICAgZnJhbWVBbmNob3I6IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgICB0ZXh0QW5jaG9yOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgZHg6IDE2LFxuICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICBdXG4gIH0pO1xufVxuXG5wbG90RG90QUVaX25ldy5sZWdlbmQoJ2NvbG9yJywge2NvbHVtbnM6IDN9KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcbiAgY29uc3QgbGFuZ1Jvb3QgPSBuYlRleHQ7XG4gIGNvbnN0IGxhbmdCYXNlUGF0aCA9IGxhbmdSb290LnByYWN0aWNhbEltcGFjdC5tZWFuQ3JvcERpZmZBRVouaW5zaWdodHM7IC8vIGJhc2UgcGF0aCBmb3IgbGFuZ3VhZ2VcblxuICAvLyB0b3AgcHJhY3RpY2UgYnkgYWV6XG4gIGNvbnN0IHNlbGVjdGVkQ3JvcCA9IHNlbGVjdENyb3BNZWFuRGlmZkFFWi5maWVsZDtcblxuICAvLyBjcm9wIHNlbGVjdGlvblxuICBjb25zdCBkYXRhQ3JvcE5vQUVaID0gVC50aWR5KFxuICAgIGRhdGFfbWVhbkRpZmZfYWV6UHJhY3RpY2VDcm9wX25ldyxcbiAgICBULmZpbHRlcigoZCkgPT4gZC5Dcm9wID09PSBzZWxlY3RlZENyb3ApXG4gICk7XG5cbiAgLy8gZmluZCBhZXogd2l0aCB0aGUgbGFyZ2VzdCBtZWFuIGRpZmZcbiAgY29uc3QgbWF4TWVhbkRpZmYgPSBULnRpZHkoXG4gICAgZGF0YUNyb3BOb0FFWixcbiAgICBULnNsaWNlTWF4KDEsIFwiTWVhbl9EaWZmZXJlbmNlXCIpXG4gICk/LlswXTtcblxuICAvLyB1c2UgYWV6IHdpdGggbWF4IHZhbHVlIGZvciBubyBoaWdobGlnaHRcbiAgY29uc3Qgc2VsZWN0ZWRBRVogPVxuICAgIGFlelNlbGVjdF9uZXcuZmllbGQgPT0gbnVsbCA/IG1heE1lYW5EaWZmLkFFWl9DbGFzc19GQU8gOiBhZXpTZWxlY3RfbmV3LmZpZWxkO1xuICBjb25zdCBzZWxlY3RlZEFFWlRyYW5zbGF0ZWQgPSBfbGFuZyh0ZC5BRVpfQ2xhc3NfRkFPLnZhbHVlc1tzZWxlY3RlZEFFWl0pO1xuXG4gIGNvbnN0IGRhdGFDcm9wID0gVC50aWR5KFxuICAgIGRhdGFDcm9wTm9BRVosXG4gICAgVC5maWx0ZXIoKGQpID0+IGQuQUVaX0NsYXNzX0ZBTyA9PSBzZWxlY3RlZEFFWilcbiAgKTtcblxuICAvLyBzZWxlY3RlZCBhZXogc3F1YXJlXG4gIGNvbnN0IGFlelN3YXRjaENvbG9yID1cbiAgICBhZXpDb2xvcl9uZXcucmFuZ2VbYWV6Q29sb3JfbmV3LmRvbWFpbi5pbmRleE9mKHNlbGVjdGVkQUVaVHJhbnNsYXRlZCldO1xuICBjb25zdCBzcXVhcmVTaXplID0gMTM7XG4gIGNvbnN0IGFlelNxdWFyZSA9IGA8c3ZnIHdpZHRoPVwiJHtzcXVhcmVTaXplfVwiIGhlaWdodD1cIiR7c3F1YXJlU2l6ZX1cIj5cbiAgICA8cmVjdCB3aWR0aD1cIiR7c3F1YXJlU2l6ZX1cIiBoZWlnaHQ9XCIke3NxdWFyZVNpemV9XCIgZmlsbD0ke2FlelN3YXRjaENvbG9yfSAgLz5cbiAgPC9zdmc+YDtcblxuICAvLyBjcm9wIG92ZXJ2aWV3XG4gIGNvbnN0IGNyb3BPdmVydmlldyA9IFQudGlkeShcbiAgICBkYXRhQ3JvcCxcbiAgICBULnN1bW1hcml6ZSh7XG4gICAgICB0b3RhbE9iczogVC5zdW0oXCJOX09ic1wiKSxcbiAgICAgIHRvdGFsUHJhY3RpY2VzOiBULm4oKVxuICAgIH0pXG4gICk/LlswXTtcbiAgY29uc3QgbGFuZ0Nyb3BPdmVydmlldyA9IF9sYW5nKFxuICAgIGxhbmdCYXNlUGF0aC5jcm9wT3ZlcnZpZXcubWFpblxuICApO1xuICBjb25zdCBsYW5nQ3JvcE92ZXJ2aWV3SXRlbXMgPSBbXG4gICAgeyBpbnNlcnROYW1lOiBcInNlbGVjdGVkQ3JvcFwiLCB2YWx1ZTogX2xhbmcodGQuQ3JvcF93aXRoX2FydGljbGVzLnZhbHVlc1tzZWxlY3RlZENyb3BdKSB9LFxuICAgIHsgaW5zZXJ0TmFtZTogXCJzZWxlY3RlZEFFWlNxdWFyZVwiLCB2YWx1ZTogYWV6U3F1YXJlIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcInNlbGVjdGVkQUVaXCIsIHZhbHVlOiBzZWxlY3RlZEFFWlRyYW5zbGF0ZWQgfSxcbiAgICB7IGluc2VydE5hbWU6IFwidG90YWxPYnNcIiwgdmFsdWU6IGZvcm1hdENvbW1hKGNyb3BPdmVydmlldy50b3RhbE9icykgfSxcbiAgICB7XG4gICAgICBpbnNlcnROYW1lOiBcInRvdGFsT2JzU3RyaW5nXCIsXG4gICAgICB2YWx1ZTpcbiAgICAgICAgY3JvcE92ZXJ2aWV3LnRvdGFsT2JzID09IDFcbiAgICAgICAgICA/IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLm9ic2VydmF0aW9uLnNpbmd1bGFyKVxuICAgICAgICAgIDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMub2JzZXJ2YXRpb24ucGx1cmFsKVxuICAgIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcInRvdGFsUHJhY3RpY2VzXCIsIHZhbHVlOiBjcm9wT3ZlcnZpZXcudG90YWxQcmFjdGljZXMgfSxcbiAgICB7XG4gICAgICBpbnNlcnROYW1lOiBcInRvdGFsUHJhY3RpY2VzU3RyaW5nXCIsXG4gICAgICB2YWx1ZTpcbiAgICAgICAgY3JvcE92ZXJ2aWV3LnRvdGFsUHJhY3RpY2VzID09IDFcbiAgICAgICAgICA/IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLnByYWN0aWNlLnNpbmd1bGFyKVxuICAgICAgICAgIDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMucHJhY3RpY2UucGx1cmFsKVxuICAgIH1cbiAgXTtcbiAgY29uc3QgaW5zaWdodENyb3BPdmVydmlldyA9IGxhbmdDcm9wT3ZlcnZpZXdJdGVtcy5yZWR1Y2UoKG92ZXJ2aWV3LCBpdGVtKSA9PiB7XG4gICAgcmV0dXJuIG92ZXJ2aWV3LnJlcGxhY2UoXG4gICAgICBMYW5nLmdldFJlZ2V4Rm9yTmFtZWRJbnNlcnRpb24oaXRlbS5pbnNlcnROYW1lKSxcbiAgICAgIGl0ZW0udmFsdWVcbiAgICApO1xuICB9LCBsYW5nQ3JvcE92ZXJ2aWV3KTtcblxuICAvLyBwb3NpdGl2ZSB5aWVsZFxuICBjb25zdCBjcm9wUG9zaXRpdmUgPSBULnRpZHkoXG4gICAgZGF0YUNyb3AsXG4gICAgVC5maWx0ZXIoKGQpID0+IGQuTWVhbl9EaWZmZXJlbmNlID4gMClcbiAgKT8ubGVuZ3RoO1xuICBjb25zdCBsYW5nQ3JvcFBvc2l0aXZlID0gX2xhbmcoXG4gICAgbmJUZXh0LnByYWN0aWNhbEltcGFjdC5tZWFuQ3JvcERpZmZBRVouaW5zaWdodHMuY3JvcFBvc2l0aXZlLm1haW5cbiAgKTtcbiAgY29uc3QgbGFuZ0Nyb3BTdWJzdHJpbmcgPSBgKioke2Nyb3BQb3NpdGl2ZX0qKiAke1xuICAgIGNyb3BQb3NpdGl2ZSA9PSAxXG4gICAgICA/IF9sYW5nKFxuICAgICAgICAgIG5iVGV4dC5wcmFjdGljYWxJbXBhY3QubWVhbkNyb3BEaWZmQUVaLmluc2lnaHRzLmNyb3BQb3NpdGl2ZS5zaW5ndWxhclxuICAgICAgICApXG4gICAgICA6IF9sYW5nKFxuICAgICAgICAgIG5iVGV4dC5wcmFjdGljYWxJbXBhY3QubWVhbkNyb3BEaWZmQUVaLmluc2lnaHRzLmNyb3BQb3NpdGl2ZS5wbHVyYWxcbiAgICAgICAgKVxuICB9YDtcbiAgY29uc3QgaW5zaWdodENyb3BQb3NpdGl2ZSA9IGxhbmdDcm9wUG9zaXRpdmUucmVwbGFjZShcbiAgICBMYW5nLmdldFJlZ2V4Rm9yTmFtZWRJbnNlcnRpb24oXCJjcm9wUG9zaXRpdmVUZXh0XCIpLFxuICAgIGxhbmdDcm9wU3Vic3RyaW5nXG4gICk7XG5cbiAgLy8gdG9wIGZvciBzZWxlY3RlZCBjcm9wXG4gIGNvbnN0IG4gPSAyOyAvLyAjIHRvcCBjcm9wcyB0byBpbmNsdWRlXG4gIGNvbnN0IHRvcENyb3AgPSBULnRpZHkoXG4gICAgZGF0YUNyb3AsXG4gICAgVC5zbGljZU1heChuLCBcIk1lYW5fRGlmZmVyZW5jZVwiKSxcbiAgICBULmFycmFuZ2UoVC5kZXNjKFwiTWVhbl9EaWZmZXJlbmNlXCIpKVxuICApO1xuICBjb25zdCBkaWZmMSA9IHRvcENyb3A/LlswXTtcbiAgY29uc3QgZGlmZjIgPSB0b3BDcm9wPy5bMV07XG5cbiAgY29uc3QgbGFuZ0RpZmZGaXJzdCA9IF9sYW5nKGxhbmdCYXNlUGF0aC5kaWZmRmlyc3QubWFpbik7XG4gIGNvbnN0IGxhbmdEaWZmRmlyc3RfaW5jRGVjID1cbiAgICBkaWZmMS5NZWFuX0RpZmZlcmVuY2UgPj0gMFxuICAgICAgPyBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5pbmNyZWFzZSlcbiAgICAgIDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMuZGVjcmVhc2UpO1xuICBjb25zdCBsYW5nRGlmZkZpcnN0X29ic2VydmF0aW9ucyA9IGRpZmYxLk5fT2JzO1xuICBjb25zdCBsYW5nRGlmZkZpcnN0SXRlbXMgPSBbXG4gICAgeyBpbnNlcnROYW1lOiBcInByYWN0aWNlXCIsIHZhbHVlOiBfbGFuZyh0ZC5QcmFjdGljZS52YWx1ZXNbZGlmZjEuUHJhY3RpY2VdKSB9LFxuICAgIHtcbiAgICAgIGluc2VydE5hbWU6IFwiaW5jRGVjXCIsXG4gICAgICB2YWx1ZTpcbiAgICAgICAgZGlmZjEuTWVhbl9EaWZmZXJlbmNlID49IDBcbiAgICAgICAgICA/IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLmluY3JlYXNlKVxuICAgICAgICAgIDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMuZGVjcmVhc2UpXG4gICAgfSxcbiAgICB7IGluc2VydE5hbWU6IFwibWVhbkRpZmZcIiwgdmFsdWU6IGZvcm1hdE51bShkaWZmMS5NZWFuX0RpZmZlcmVuY2UpIH0sXG4gICAge1xuICAgICAgaW5zZXJ0TmFtZTogXCJvYnNlcnZhdGlvbkNvdW50XCIsXG4gICAgICB2YWx1ZTogZm9ybWF0Q29tbWEobGFuZ0RpZmZGaXJzdF9vYnNlcnZhdGlvbnMpXG4gICAgfSxcbiAgICB7XG4gICAgICBpbnNlcnROYW1lOiBcIm9ic2VydmF0aW9uU3RyaW5nXCIsXG4gICAgICB2YWx1ZTpcbiAgICAgICAgbGFuZ0RpZmZGaXJzdF9vYnNlcnZhdGlvbnMgPiAxXG4gICAgICAgICAgPyBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5wbHVyYWwpXG4gICAgICAgICAgOiBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5zaW5ndWxhcilcbiAgICB9XG4gIF07XG4gIGNvbnN0IGluc2lnaHREaWZmRmlyc3QgPSBsYW5nRGlmZkZpcnN0SXRlbXMucmVkdWNlKChvdmVydmlldywgaXRlbSkgPT4ge1xuICAgIHJldHVybiBvdmVydmlldy5yZXBsYWNlKFxuICAgICAgTGFuZy5nZXRSZWdleEZvck5hbWVkSW5zZXJ0aW9uKGl0ZW0uaW5zZXJ0TmFtZSksXG4gICAgICBpdGVtLnZhbHVlXG4gICAgKTtcbiAgfSwgbGFuZ0RpZmZGaXJzdCk7XG5cbiAgY29uc3QgbGFuZ0RpZmZTZWNvbmQgPSBfbGFuZyhsYW5nQmFzZVBhdGguZGlmZlNlY29uZC5tYWluKTtcbiAgY29uc3QgbGFuZ0RpZmZTZWNvbmRfaW5jRGVjID1cbiAgICBkaWZmMj8uTWVhbl9EaWZmZXJlbmNlID49IDBcbiAgICAgID8gX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMuaW5jcmVhc2UpXG4gICAgICA6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLmRlY3JlYXNlKTtcbiAgY29uc3QgbGFuZ0RpZmZTZWNvbmRfb2JzZXJ2YXRpb25zID0gZGlmZjI/Lk5fT2JzO1xuICBjb25zdCBsYW5nRGlmZlNlY29uZEl0ZW1zID0gW1xuICAgIHsgaW5zZXJ0TmFtZTogXCJwcmFjdGljZVwiLCB2YWx1ZTogX2xhbmcodGQuUHJhY3RpY2UudmFsdWVzW2RpZmYyPy5QcmFjdGljZV0pIH0sXG4gICAge1xuICAgICAgaW5zZXJ0TmFtZTogXCJpbmNEZWNcIixcbiAgICAgIHZhbHVlOlxuICAgICAgICBkaWZmMj8uTWVhbl9EaWZmZXJlbmNlID49IDBcbiAgICAgICAgICA/IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLmluY3JlYXNlKVxuICAgICAgICAgIDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMuZGVjcmVhc2UpXG4gICAgfSxcbiAgICB7IGluc2VydE5hbWU6IFwibWVhbkRpZmZcIiwgdmFsdWU6IGZvcm1hdE51bShkaWZmMj8uTWVhbl9EaWZmZXJlbmNlKSB9LFxuICAgIHtcbiAgICAgIGluc2VydE5hbWU6IFwib2JzZXJ2YXRpb25Db3VudFwiLFxuICAgICAgdmFsdWU6IGZvcm1hdENvbW1hKGxhbmdEaWZmU2Vjb25kX29ic2VydmF0aW9ucylcbiAgICB9LFxuICAgIHtcbiAgICAgIGluc2VydE5hbWU6IFwib2JzZXJ2YXRpb25TdHJpbmdcIixcbiAgICAgIHZhbHVlOlxuICAgICAgICBsYW5nRGlmZlNlY29uZF9vYnNlcnZhdGlvbnMgPiAxXG4gICAgICAgICAgPyBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5wbHVyYWwpXG4gICAgICAgICAgOiBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5zaW5ndWxhcilcbiAgICB9XG4gIF07XG4gIGNvbnN0IGluc2lnaHREaWZmU2Vjb25kID0gZGlmZjJcbiAgICA/IGxhbmdEaWZmU2Vjb25kSXRlbXMucmVkdWNlKChvdmVydmlldywgaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gb3ZlcnZpZXcucmVwbGFjZShcbiAgICAgICAgICBMYW5nLmdldFJlZ2V4Rm9yTmFtZWRJbnNlcnRpb24oaXRlbS5pbnNlcnROYW1lKSxcbiAgICAgICAgICBpdGVtLnZhbHVlXG4gICAgICAgICk7XG4gICAgICB9LCBsYW5nRGlmZlNlY29uZClcbiAgICA6IFwiXCI7XG5cbiAgcmV0dXJuIG1kYCR7aW5zaWdodENyb3BPdmVydmlld30gJHtpbnNpZ2h0Q3JvcFBvc2l0aXZlfVxuXG4ke2luc2lnaHREaWZmRmlyc3R9ICR7aW5zaWdodERpZmZTZWNvbmQgPz8gXCJcIn1gO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBzZWxlY3RQcmFjdGljZSA9IHtcbiAgY29uc3QgZGF0YSA9IGQzXG4gICAgLmdyb3VwcyhcbiAgICAgIGRhdGFfbGNsUmlzay5tYXAoKGQpID0+IGQucHJhY3RpY2UpLFxuICAgICAgKGQpID0+IGRcbiAgICApXG4gICAgLm1hcCgoZCkgPT4gZFswXSlcbiAgICAuc29ydCgpO1xuICBjb25zdCBvcHRpb25zID0gZGF0YS5tYXAoKGQpID0+IHtcbiAgICByZXR1cm4geyBmaWVsZDogZCwgdHJhbnNsYXRpb246IHRkLlByYWN0aWNlLnZhbHVlc1tkXSB9O1xuICB9KS5zb3J0KChhLGIpID0+IF9sYW5nKGEudHJhbnNsYXRpb24pID4gX2xhbmcoYi50cmFuc2xhdGlvbikpO1xuICBjb25zdCBudWxsVmFsdWUgPSB7XG4gICAgZmllbGQ6IG51bGwsXG4gICAgdHJhbnNsYXRpb246IG5iVGV4dC5pbnB1dHMuZGVmYXVsdHMucHJhY3RpY2VcbiAgfTtcbiAgY29uc3QgaW5wdXREYXRhID0gW251bGxWYWx1ZSwgLi4ub3B0aW9uc107XG4gIHJldHVybiBJbnB1dHMuc2VsZWN0KGlucHV0RGF0YSwge1xuICAgIGxhYmVsOiBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC5sYWJlbHMuaGlnaGxpZ2h0UHJhY3RpY2UpLFxuICAgIGZvcm1hdDogeCA9PiBfbGFuZyh4LnRyYW5zbGF0aW9uKVxuICB9KTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJcbnBsb3RSaXNrQmVlc3dhcm0gPSB7XG4gIGNvbnN0IGRhdGEgPSBkYXRhX2xjbFJpc2s7XG4gIGNvbnN0IGxhbmdMb29rID0ge1xuICAgIGNhcHRpb246IF9sYW5nKG5iVGV4dC5yaXNrcy5wbG90LmNhcHRpb24pLFxuICAgIHhMYWJlbDogX2xhbmcobmJUZXh0LnJpc2tzLnBsb3QueExhYmVsKSxcbiAgICB0b29sdGlwOiB7XG4gICAgICBwcmFjdGljZTogTGFuZy50b1NlbnRlbmNlQ2FzZShcbiAgICAgICAgX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMucHJhY3RpY2Uuc2luZ3VsYXIpXG4gICAgICApLFxuICAgICAgY29tYm86IExhbmcudG9TZW50ZW5jZUNhc2UoXG4gICAgICAgIF9sYW5nKG5iVGV4dC5yaXNrcy5wbG90LnRvb2x0aXAuaW5Db21iaW5hdGlvbilcbiAgICAgICksXG4gICAgICBjcm9wOiBMYW5nLnRvU2VudGVuY2VDYXNlKFxuICAgICAgICBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5jcm9wLnNpbmd1bGFyKVxuICAgICAgKSxcbiAgICAgIG9iczogTGFuZy50b1NlbnRlbmNlQ2FzZShcbiAgICAgICAgX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMub2JzZXJ2YXRpb24ucGx1cmFsKVxuICAgICAgKVxuICAgIH1cbiAgfTtcbiAgY29uc3QgX3ByYWN0aWNlID0gc2VsZWN0UHJhY3RpY2UuZmllbGQ7XG5cbiAgY29uc3QgcGxvdCA9IFBsb3QucGxvdCh7XG4gICAgY2FwdGlvbjogbGFuZ0xvb2suY2FwdGlvbixcbiAgICBoZWlnaHQ6IDQwMCxcbiAgICB3aWR0aCxcbiAgICBtYXJnaW5Ub3A6IDYwLFxuICAgIHg6IHtcbiAgICAgIGF4aXM6IFwidG9wXCIsXG4gICAgICBncmlkOiB0cnVlLFxuICAgICAgZG9tYWluOiBbMCwgMV0sXG4gICAgICBsYWJlbDogbGFuZ0xvb2sueExhYmVsLFxuICAgICAgbGFiZWxPZmZzZXQ6IDQwLFxuICAgICAgbGFiZWxBbmNob3I6IFwiY2VudGVyXCIsXG4gICAgICBsYWJlbEFycm93OiBcIm5vbmVcIlxuICAgIH0sXG4gICAgY29sb3I6IHtcbiAgICAgIGRvbWFpbjogWzAsIDFdLFxuICAgICAgcmFuZ2U6IGNvbG9yWWVsbG93R3JlZW4sXG4gICAgICBsZWdlbmQ6IGZhbHNlLFxuICAgICAgdW5rbm93bjogXCIjZWZlZmVmXCJcbiAgICB9LFxuICAgIHI6IHtcbiAgICAgIHJhbmdlOiBbMiwgMzBdXG4gICAgfSxcbiAgICBtYXJrczogW1xuICAgICAgUGxvdC5kb3QoXG4gICAgICAgIGRhdGEsXG4gICAgICAgIFBsb3QuZG9kZ2VZKFxuICAgICAgICAgIHsgYW5jaG9yOiBcIm1pZGRsZVwiIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDogXCJ2YWx1ZVwiLFxuICAgICAgICAgICAgcjogXCJvYnNlcnZhdGlvbnNcIixcbiAgICAgICAgICAgIGZpbGw6IChkKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChfcHJhY3RpY2UgPT09IG51bGwpIHJldHVybiBkLnZhbHVlOyAvLyBzaG93IGFsbCBwcmFjdGljZXNcbiAgICAgICAgICAgICAgLy8gc2hvdyBoaWdobGlnaHRlZCBwcmFjdGljZSBvbmx5XG4gICAgICAgICAgICAgIHJldHVybiBkLnByYWN0aWNlID09PSBfcHJhY3RpY2UgPyBkLnZhbHVlIDogbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHJva2U6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDEsXG4gICAgICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgICAgICBwcmFjdGljZToge1xuICAgICAgICAgICAgICAgIGxhYmVsOiBsYW5nTG9vay50b29sdGlwLnByYWN0aWNlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAoZCkgPT4gX2xhbmcodGQuUHJhY3RpY2UudmFsdWVzW2QucHJhY3RpY2VdKVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm9kdWN0OiB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IGxhbmdMb29rLnRvb2x0aXAuY3JvcCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogKGQpID0+IGQucHJvZHVjdFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBuT2JzOiB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IGxhbmdMb29rLnRvb2x0aXAub2JzLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAoZCkgPT4gZC5vYnNlcnZhdGlvbnNcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY29tYm86IHtcbiAgICAgICAgICAgICAgICBsYWJlbDogbGFuZ0xvb2sudG9vbHRpcC5jb21ibyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogKGQpID0+XG4gICAgICAgICAgICAgICAgICBkLmlzX2NvbWJvXG4gICAgICAgICAgICAgICAgICAgID8gTGFuZy50b1RpdGxlQ2FzZShfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC5ib29scy55ZXMpKVxuICAgICAgICAgICAgICAgICAgICA6IExhbmcudG9UaXRsZUNhc2UoX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQuYm9vbHMubm8pKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGlwOiB7XG4gICAgICAgICAgICAgIHB4OiAoZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChfcHJhY3RpY2UgPT09IG51bGwpIHJldHVybiBkLnZhbHVlOyAvLyBzaG93IGFsbCBwcmFjdGljZXNcbiAgICAgICAgICAgICAgICAvLyBzaG93IGhpZ2hsaWdodGVkIHByYWN0aWNlIG9ubHlcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5wcmFjdGljZSA9PT0gX3ByYWN0aWNlID8gZC52YWx1ZSA6IG51bGw7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG1heFJhZGl1czogNixcbiAgICAgICAgICAgICAgZm9ybWF0OiB7XG4gICAgICAgICAgICAgICAgeDogZmFsc2UsXG4gICAgICAgICAgICAgICAgeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZmlsbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJhY3RpY2U6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tYm86IHRydWUsXG4gICAgICAgICAgICAgICAgcHJvZHVjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBweDogKGQpID0+IGZvcm1hdE51bShkKSxcbiAgICAgICAgICAgICAgICBuT2JzOiB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIClcbiAgICBdXG4gIH0pO1xuXG4gIHJldHVybiBwbG90O1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InF1aWNrSW5zaWdodHNSaXNrQmVlc3dhcm0gPSB7XG4gIGNvbnN0IGxhbmdSb290ID0gbmJUZXh0O1xuICBjb25zdCBsYW5nQmFzZVBhdGggPSBsYW5nUm9vdC5yaXNrcy5pbnNpZ2h0cy5iZWVzd2FybTsgLy8gYmFzZSBwYXRoIGZvciBsYW5ndWFnZVxuXG4gIGNvbnN0IHNlbGVjdGVkUHJhY3RpY2UgPSBzZWxlY3RQcmFjdGljZS5maWVsZDtcbiAgY29uc3QgZGF0YSA9IFQudGlkeShcbiAgICBkYXRhX2xjbFJpc2ssXG4gICAgVC5maWx0ZXIoKGQpID0+IHtcbiAgICAgIGlmIChzZWxlY3RlZFByYWN0aWNlID09IG51bGwpIHJldHVybiBkO1xuICAgICAgcmV0dXJuIGQucHJhY3RpY2UgPT0gc2VsZWN0ZWRQcmFjdGljZTtcbiAgICB9KVxuICApO1xuXG4gIGNvbnN0IGRhdGFPdmVydmlldyA9IFQudGlkeShcbiAgICBkYXRhLFxuICAgIFQuc3VtbWFyaXplKHtcbiAgICAgIHRvdGFsT2JzOiBULnN1bShcIm9ic2VydmF0aW9uc1wiKSxcbiAgICAgIHRvdGFsUHJhY3RpY2VzOiBULmNvdW50KFwicHJhY3RpY2VcIilcbiAgICB9KVxuICApPy5bMF07XG4gIGNvbnN0IG51bVByYWN0aWNlcyA9IGRhdGFPdmVydmlldy50b3RhbFByYWN0aWNlcy5sZW5ndGg7XG4gIGNvbnN0IGxhbmdEYXRhT3ZlcnZpZXdfc2VsZWN0aW9uID1cbiAgICBzZWxlY3RlZFByYWN0aWNlID09IG51bGwgPyB7cGhyYXNlOiBcImluVG90YWxcIiwgdGVtcGxhdGU6IFwidG90YWxcIn0gOiBcbiAgICB7cGhyYXNlOiBcInNwZWNpZmljSGFzXCIsIHRlbXBsYXRlOiBcInNwZWNpZmljXCJ9O1xuICBjb25zdCBsYW5nRGF0YU92ZXJ2aWV3ID0gX2xhbmcoXG4gICAgbGFuZ0Jhc2VQYXRoLmRhdGFPdmVydmlld1tsYW5nRGF0YU92ZXJ2aWV3X3NlbGVjdGlvbi50ZW1wbGF0ZV0sXG5cbiAgKTtcbiAgY29uc3QgbGFuZ0RhdGFPdmVydmlld0l0ZW1zID0gW1xuICAgIHtcbiAgICAgIGluc2VydE5hbWU6IFwic3RhcnRTdHJpbmdcIixcbiAgICAgIHZhbHVlOiBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC5waHJhc2VzW2xhbmdEYXRhT3ZlcnZpZXdfc2VsZWN0aW9uLnBocmFzZV0pXG4gICAgfSxcbiAgICB7IGluc2VydE5hbWU6IFwidG90YWxPYnNcIiwgdmFsdWU6IGZvcm1hdENvbW1hKGRhdGFPdmVydmlldy50b3RhbE9icykgfSxcbiAgICB7XG4gICAgICBpbnNlcnROYW1lOiBcIm9ic2VydmF0aW9uU3RyaW5nXCIsXG4gICAgICB2YWx1ZTpcbiAgICAgICAgZGF0YU92ZXJ2aWV3LnRvdGFsT2JzID09IDFcbiAgICAgICAgICA/IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLm9ic2VydmF0aW9uLnNpbmd1bGFyKVxuICAgICAgICAgIDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMub2JzZXJ2YXRpb24ucGx1cmFsKVxuICAgIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcIml0ZW1cIiwgdmFsdWU6IHNlbGVjdGVkUHJhY3RpY2UgfSxcbiAgICB7IGluc2VydE5hbWU6IFwidG90YWxQcmFjdGljZXNcIiwgdmFsdWU6IG51bVByYWN0aWNlcyB9LFxuICAgIHtcbiAgICAgIGluc2VydE5hbWU6IFwicHJhY3RpY2VzU3RyaW5nXCIsXG4gICAgICB2YWx1ZTpcbiAgICAgICAgbnVtUHJhY3RpY2VzID09IDFcbiAgICAgICAgICA/IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLnByYWN0aWNlLnNpbmd1bGFyKVxuICAgICAgICAgIDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMucHJhY3RpY2UucGx1cmFsKVxuICAgIH1cbiAgXTtcbiAgY29uc3QgaW5zaWdodERhdGFPdmVydmlldyA9IGxhbmdEYXRhT3ZlcnZpZXdJdGVtcy5yZWR1Y2UoKG92ZXJ2aWV3LCBpdGVtKSA9PiB7XG4gICAgcmV0dXJuIG92ZXJ2aWV3LnJlcGxhY2UoXG4gICAgICBMYW5nLmdldFJlZ2V4Rm9yTmFtZWRJbnNlcnRpb24oaXRlbS5pbnNlcnROYW1lKSxcbiAgICAgIGl0ZW0udmFsdWVcbiAgICApO1xuICB9LCBsYW5nRGF0YU92ZXJ2aWV3KTtcblxuICAvLyB0b3AgZm9yIHNlbGVjdGVkIGNyb3BcbiAgY29uc3QgbiA9IDI7IC8vICMgdG9wIGNyb3BzIHRvIGluY2x1ZGVcbiAgY29uc3QgdG9wQ3JvcCA9IFQudGlkeShcbiAgICBkYXRhLFxuICAgIFQuc2xpY2VNYXgobiwgXCJ2YWx1ZVwiKSxcbiAgICBULmFycmFuZ2UoVC5kZXNjKFwidmFsdWVcIikpXG4gICk7XG4gIGNvbnN0IGRpZmYxID0gdG9wQ3JvcD8uWzBdO1xuICBjb25zdCBkaWZmMiA9IHRvcENyb3A/LlsxXTtcblxuICBjb25zdCBsYW5nRGlmZkZpcnN0ID0gX2xhbmcobGFuZ0Jhc2VQYXRoLmRpZmZGaXJzdC5tYWluKTtcbiAgY29uc3QgbGFuZ0RpZmZGaXJzdF9vYnNlcnZhdGlvbnMgPSBkaWZmMS5vYnNlcnZhdGlvbnM7XG4gIGNvbnN0IGxhbmdEaWZmRmlyc3RJdGVtcyA9IFtcbiAgICB7IGluc2VydE5hbWU6IFwicHJhY3RpY2VcIiwgdmFsdWU6IF9sYW5nKHRkLlByYWN0aWNlLnZhbHVlc1tkaWZmMS5wcmFjdGljZV0pIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcImNyb3BcIiwgdmFsdWU6IF9sYW5nKHRkLkNyb3Bfd2l0aF9hcnRpY2xlcy52YWx1ZXNbZGlmZjEucHJvZHVjdF0pIH0sXG4gICAge1xuICAgICAgaW5zZXJ0TmFtZTogXCJjb21ib1N0cmluZ1wiLFxuICAgICAgdmFsdWU6IGRpZmYxLmlzX2NvbWJvXG4gICAgICAgID8gX2xhbmcobGFuZ0Jhc2VQYXRoLmRpZmZHZW5lcmFsLmNvbWJvLnBsdXJhbClcbiAgICAgICAgOiBfbGFuZyhsYW5nQmFzZVBhdGguZGlmZkdlbmVyYWwuY29tYm8uc2luZ3VsYXIpXG4gICAgfSxcbiAgICB7IGluc2VydE5hbWU6IFwicHJvYllpZWxkXCIsIHZhbHVlOiBmb3JtYXROdW0oZGlmZjEudmFsdWUpIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcInRvdGFsT2JzXCIsIHZhbHVlOiBmb3JtYXRDb21tYShsYW5nRGlmZkZpcnN0X29ic2VydmF0aW9ucykgfSxcbiAgICB7XG4gICAgICBpbnNlcnROYW1lOiBcIm9ic2VydmF0aW9uU3RyaW5nXCIsXG4gICAgICB2YWx1ZTpcbiAgICAgICAgbGFuZ0RpZmZGaXJzdF9vYnNlcnZhdGlvbnMgPiAxXG4gICAgICAgICAgPyBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5wbHVyYWwpXG4gICAgICAgICAgOiBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5zaW5ndWxhcilcbiAgICB9XG4gIF07XG4gIGNvbnN0IGluc2lnaHREaWZmRmlyc3QgPSBsYW5nRGlmZkZpcnN0SXRlbXMucmVkdWNlKChvdmVydmlldywgaXRlbSkgPT4ge1xuICAgIHJldHVybiBvdmVydmlldy5yZXBsYWNlKFxuICAgICAgTGFuZy5nZXRSZWdleEZvck5hbWVkSW5zZXJ0aW9uKGl0ZW0uaW5zZXJ0TmFtZSksXG4gICAgICBpdGVtLnZhbHVlXG4gICAgKTtcbiAgfSwgbGFuZ0RpZmZGaXJzdCk7XG5cbiAgY29uc3QgbGFuZ0RpZmZTZWNvbmQgPSBfbGFuZyhsYW5nQmFzZVBhdGguZGlmZlNlY29uZC5tYWluKTtcbiAgY29uc3QgbGFuZ0RpZmZTZWNvbmRfb2JzZXJ2YXRpb25zID0gZGlmZjI/Lm9ic2VydmF0aW9ucztcbiAgY29uc3QgbGFuZ0RpZmZTZWNvbmRJdGVtcyA9IFtcbiAgICB7IGluc2VydE5hbWU6IFwicHJhY3RpY2VcIiwgdmFsdWU6IF9sYW5nKHRkLlByYWN0aWNlLnZhbHVlc1tkaWZmMi5wcmFjdGljZV0pIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcImNyb3BcIiwgdmFsdWU6IF9sYW5nKHRkLkNyb3Bfd2l0aF9hcnRpY2xlcy52YWx1ZXNbZGlmZjIucHJvZHVjdF0pIH0sXG4gICAge1xuICAgICAgaW5zZXJ0TmFtZTogXCJjb21ib1N0cmluZ1wiLFxuICAgICAgdmFsdWU6IGRpZmYyLmlzX2NvbWJvXG4gICAgICAgID8gX2xhbmcobGFuZ0Jhc2VQYXRoLmRpZmZHZW5lcmFsLmNvbWJvLnBsdXJhbClcbiAgICAgICAgOiBfbGFuZyhsYW5nQmFzZVBhdGguZGlmZkdlbmVyYWwuY29tYm8uc2luZ3VsYXIpXG4gICAgfSxcbiAgICB7IGluc2VydE5hbWU6IFwicHJvYllpZWxkXCIsIHZhbHVlOiBmb3JtYXROdW0oZGlmZjIudmFsdWUpIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcInRvdGFsT2JzXCIsIHZhbHVlOiBmb3JtYXRDb21tYShsYW5nRGlmZlNlY29uZF9vYnNlcnZhdGlvbnMpIH0sXG4gICAge1xuICAgICAgaW5zZXJ0TmFtZTogXCJvYnNlcnZhdGlvblN0cmluZ1wiLFxuICAgICAgdmFsdWU6XG4gICAgICAgIGxhbmdEaWZmU2Vjb25kX29ic2VydmF0aW9ucyA+IDFcbiAgICAgICAgICA/IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLm9ic2VydmF0aW9uLnBsdXJhbClcbiAgICAgICAgICA6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLm9ic2VydmF0aW9uLnNpbmd1bGFyKVxuICAgIH1cbiAgXTtcbiAgY29uc3QgaW5zaWdodERpZmZTZWNvbmQgPSBkaWZmMlxuICAgID8gbGFuZ0RpZmZTZWNvbmRJdGVtcy5yZWR1Y2UoKG92ZXJ2aWV3LCBpdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiBvdmVydmlldy5yZXBsYWNlKFxuICAgICAgICAgIExhbmcuZ2V0UmVnZXhGb3JOYW1lZEluc2VydGlvbihpdGVtLmluc2VydE5hbWUpLFxuICAgICAgICAgIGl0ZW0udmFsdWVcbiAgICAgICAgKTtcbiAgICAgIH0sIGxhbmdEaWZmU2Vjb25kKVxuICAgIDogXCJcIjtcblxuICByZXR1cm4gbWRgJHtpbnNpZ2h0RGF0YU92ZXJ2aWV3fVxuXG4ke2luc2lnaHREaWZmRmlyc3R9ICR7aW5zaWdodERpZmZTZWNvbmR9YDtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ2aWV3b2YgZGF0YUFkb3B0aW9uRmFjdG9yc19zZWxlY3QgPSB7XG4gIGNvbnN0IG9wdGlvbnMgPSBbLi4uZGF0YUFkb3B0aW9uRmFjdG9yc01hcC5rZXlzKCldXG4gICAgLm1hcCgoZCkgPT4ge1xuICAgICAgcmV0dXJuIHsgZmllbGQ6IGQsIHRyYW5zbGF0aW9uOiB0ZC5wcmFjdGljZXMudmFsdWVzPy5bZF0gfTtcbiAgICB9KVxuICAgIC5tYXAoKGQpID0+IHtcbiAgICAgIGlmIChkLmZpZWxkID09IFwiQWxsIHByYWN0aWNlc1wiKVxuICAgICAgICByZXR1cm4geyAuLi5kLCB0cmFuc2xhdGlvbjogbmJUZXh0LmlucHV0cy5kZWZhdWx0cy5wcmFjdGljZSB9O1xuICAgICAgcmV0dXJuIHsgLi4uZCB9O1xuICAgIH0pO1xuICBjb25zdCBzb3J0ZWQgPSBbXG4gICAgLi4ub3B0aW9uc1xuICAgICAgLmZpbHRlcigoZCkgPT4gZC5maWVsZCA9PSBcIkFsbCBwcmFjdGljZXNcIiksXG4gICAgLi4ub3B0aW9uc1xuICAgICAgLmZpbHRlcigoZCkgPT4gZC5maWVsZCAhPT0gXCJBbGwgcHJhY3RpY2VzXCIpXG4gICAgICAuc29ydCgoYSwgYikgPT4gX2xhbmcoYS50cmFuc2xhdGlvbikgPiBfbGFuZyhiLnRyYW5zbGF0aW9uKSlcbiAgXTtcbiAgcmV0dXJuIElucHV0cy5zZWxlY3Qoc29ydGVkLCB7XG4gICAgbGFiZWw6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LndvcmRzLnByYWN0aWNlLnNpbmd1bGFyKSxcbiAgICBmb3JtYXQ6ICh4KSA9PiBfbGFuZyh4LnRyYW5zbGF0aW9uKVxuICB9KTtcbn1cblxudmlld29mIHJhZGlvU29ydEFkb3B0aW9uRmFjdG9ycyA9IHtcbiAgY29uc3QgZGF0YSA9IFtcbiAgICB7XG4gICAgICBrZXk6IFwib2JzZXJ2YXRpb25zXCIsXG4gICAgICBsYWJlbDogX2xhbmcobmJUZXh0LmlucHV0cy5yYWRpb1NvcnQuZmllbGRzLm9ic2VydmF0aW9ucyksXG4gICAgICBjaGFubmVsOiBcInRvdGFsXCIsXG4gICAgICByZXZlcnNlOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAga2V5OiBcImFscGhhXCIsXG4gICAgICBsYWJlbDogX2xhbmcobmJUZXh0LmlucHV0cy5yYWRpb1NvcnQuZmllbGRzLmFscGhhKSxcbiAgICAgIGNoYW5uZWw6IFwieVwiLFxuICAgICAgcmV2ZXJzZTogZmFsc2UsXG4gICAgfSxcbiAgXVxuICByZXR1cm4gSW5wdXRzLnJhZGlvKGRhdGEsIHsgbGFiZWw6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LmxhYmVscy5zb3J0QmFycyksIGZvcm1hdDogZCA9PiBkLmxhYmVsLCB2YWx1ZTogZGF0YS5maW5kKHggPT4geC5rZXkgPT09ICdvYnNlcnZhdGlvbnMnKSB9KTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJcbntcbiAgY29uc3QgcGxvdERhdGEgPSBkYXRhQWRvcHRpb25GYWN0b3JzTWFwLmdldChkYXRhQWRvcHRpb25GYWN0b3JzX3NlbGVjdC5maWVsZCk7XG4gIGNvbnN0IF9maWxsTG9va3VwID0gYWRvcHRpb25GYWN0b3JzTG9va3VwO1xuICBjb25zdCBfc29ydGVyID0gcmFkaW9Tb3J0QWRvcHRpb25GYWN0b3JzO1xuICBjb25zdCBjb2xvck9yZGVyID0gW1xuICAgIF9maWxsTG9va3VwW1wiTmVnYXRpdmVcIl0sXG4gICAgX2ZpbGxMb29rdXBbXCJOb3Qgc2lnbmlmaWNhbnRcIl0sXG4gICAgX2ZpbGxMb29rdXBbXCJQb3NpdGl2ZVwiXVxuICBdO1xuICBjb25zdCBjb2xvclJhbmdlID0gW1wiI0VDNUE0N1wiLCBcIiNGNEJCMjFcIiwgXCIjMjE2NzI5XCJdO1xuICBjb25zdCB5ID0gKGQpID0+IF9sYW5nKHRkLmFkb3B0aW9uX2ZhY3RvcnMudmFsdWVzPy5bZF0pO1xuXG4gIHJldHVybiBQbG90LnBsb3Qoe1xuICAgIHdpZHRoLFxuICAgIGhlaWdodDogNjAwLFxuICAgIG1hcmdpbkxlZnQ6IDE4MCxcbiAgICBtYXJnaW5SaWdodDogNTAsXG4gICAgeDoge1xuICAgICAgYXhpczogbnVsbFxuICAgICAgLy8gbGFiZWw6IFwiJSBUb3RhbFwiXG4gICAgICAvLyBsYWJlbE9mZnNldDogNDAsXG4gICAgICAvLyBsYWJlbEFuY2hvcjogXCJjZW50ZXJcIlxuICAgIH0sXG4gICAgeToge1xuICAgICAgbGFiZWw6IG51bGwsXG4gICAgICB0aWNrU2l6ZTogMCxcbiAgICAgIHBhZGRpbmc6IDBcbiAgICB9LFxuICAgIGNvbG9yOiB7XG4gICAgICBkb21haW46IGNvbG9yT3JkZXIsXG4gICAgICByYW5nZTogY29sb3JSYW5nZSxcbiAgICAgIGxlZ2VuZDogdHJ1ZVxuICAgIH0sXG4gICAgbWFya3M6IFtcbiAgICAgIC8vIG1haW4geS1heGlzXG4gICAgICBQbG90LmF4aXNZKHtcbiAgICAgICAgdGlja1NpemU6IDBcbiAgICAgIH0pLFxuICAgICAgLy8gcG9pbnRlciB3aGl0ZS1vdXRcbiAgICAgIFBsb3QuYXhpc1koXG4gICAgICAgIFBsb3QucG9pbnRlclkoe1xuICAgICAgICAgIGZpbGw6IFwid2hpdGVcIixcbiAgICAgICAgICB0ZXh0U3Ryb2tlOiBcIndoaXRlXCIsXG4gICAgICAgICAgdGV4dFN0cm9rZVdpZHRoOiAyLFxuICAgICAgICAgIHRpY2tTaXplOiAwXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgLy8gYm9sZCBwb2ludGVyXG4gICAgICBQbG90LmF4aXNZKFxuICAgICAgICBQbG90LnBvaW50ZXJZKHtcbiAgICAgICAgICBmb250V2VpZ2h0OiBcImJvbGRcIixcbiAgICAgICAgICB0aWNrU2l6ZTogMFxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIC8vIGJhcnNcbiAgICAgIFBsb3QuYmFyWChcbiAgICAgICAgcGxvdERhdGEsXG4gICAgICAgIFBsb3Quc3RhY2tYKHtcbiAgICAgICAgICB4OiBcInBlcmNcIixcbiAgICAgICAgICB5OiAoZCkgPT4geShkLmZhY3RvciksXG4gICAgICAgICAgc29ydDogeyB5OiBfc29ydGVyLmNoYW5uZWwsIHJldmVyc2U6IF9zb3J0ZXIucmV2ZXJzZSB9LFxuICAgICAgICAgIGZpbGw6IChkKSA9PiBfZmlsbExvb2t1cFtkLmRpcmVjdGlvbl0sXG4gICAgICAgICAgb3JkZXI6IGNvbG9yT3JkZXIsXG4gICAgICAgICAgc3Ryb2tlOiBcIiNmZmZcIixcbiAgICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgICAgcGVyY2VudGFnZToge1xuICAgICAgICAgICAgICBsYWJlbDogTGFuZy50b1NlbnRlbmNlQ2FzZShcbiAgICAgICAgICAgICAgICBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5wZXJjZW50YWdlLnNpbmd1bGFyKVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICB2YWx1ZTogXCJwZXJjXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3RhbDogXCJ0b3RhbFwiLFxuICAgICAgICAgICAgbjoge1xuICAgICAgICAgICAgICBsYWJlbDogTGFuZy50b1NlbnRlbmNlQ2FzZShcbiAgICAgICAgICAgICAgICBfbGFuZyhuYlRleHQuc3VwcG9ydE5iVGV4dC53b3Jkcy5vYnNlcnZhdGlvbi5wbHVyYWwpXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIHZhbHVlOiBcIm5cIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGlwOiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHtcbiAgICAgICAgICAgICAgeDogZmFsc2UsXG4gICAgICAgICAgICAgIHk6IGZhbHNlLFxuICAgICAgICAgICAgICBmaWxsOiBmYWxzZSxcbiAgICAgICAgICAgICAgdG90YWw6IGZhbHNlLFxuICAgICAgICAgICAgICBwZXJjZW50YWdlOiAoZCkgPT4gYCR7ZDMuZm9ybWF0KFwiZFwiKShkKX0lYCxcbiAgICAgICAgICAgICAgbjogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICBtYXJrQm9sZFNpZGViYXJUZXh0KHBsb3REYXRhLCB7XG4gICAgICAgIHk6IChkKSA9PiB5KGQuZmFjdG9yKSxcbiAgICAgICAgdGV4dDogXCJuXCIsXG4gICAgICAgIGR4OiA3XG4gICAgICB9KVxuICAgIF1cbiAgfSk7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZGF0YSA9IHtcbiAgY29uc3QgbGFuZ1Jvb3QgPSBuYlRleHQ7XG4gIGNvbnN0IGxhbmdCYXNlUGF0aCA9IGxhbmdSb290LmFkb3B0aW9uRmFjdG9ycy5pbnNpZ2h0cy5wZXJjQmFyOyAvLyBiYXNlIHBhdGggZm9yIGxhbmd1YWdlXG5cbiAgY29uc3Qgc2VsZWN0ZWRQcmFjdGljZSA9IGRhdGFBZG9wdGlvbkZhY3RvcnNfc2VsZWN0LmZpZWxkO1xuICBjb25zdCBkYXRhID0gZGF0YUFkb3B0aW9uRmFjdG9yc01hcC5nZXQoc2VsZWN0ZWRQcmFjdGljZSk7XG5cbiAgY29uc3QgdGxfcHJhYyA9IChwcmFjKSA9PiBfbGFuZyh0ZC5wcmFjdGljZXMudmFsdWVzPy5bcHJhY10pO1xuICBjb25zdCB0bF9mYWN0ID0gKGZhY3QpID0+IF9sYW5nKHRkLmFkb3B0aW9uX2ZhY3RvcnNfd2l0aF9hcnRpY2xlcy52YWx1ZXM/LltmYWN0XSk7XG5cbiAgLy8gdG90YWwgb2JzZXJ2YXRpb25zIG92ZXJ2aWV3XG4gIGNvbnN0IHRvdGFsID0gVC50aWR5KFxuICAgIGRhdGEsXG4gICAgVC5ncm91cEJ5KFxuICAgICAgW1wicHJhY3RpY2VcIl0sXG4gICAgICBbXG4gICAgICAgIFQuc3VtbWFyaXplKHtcbiAgICAgICAgICB0b3RhbE9ic2VydmF0aW9uczogVC5zdW0oXCJuXCIpLFxuICAgICAgICAgIGZhY3RvckNvdW50OiBULmNvdW50KFwiZmFjdG9yXCIpXG4gICAgICAgIH0pXG4gICAgICBdXG4gICAgKVxuICApWzBdO1xuICAvLyBjb25zdCBtZFRvdGFsID1cbiAgLy8gICB0b3RhbC5wcmFjdGljZSA9PSBhZG9wdGlvbkZhY3RvckFsbExhYmVsXG4gIC8vICAgICA/IGBJbiB0b3RhbCwgdGhlcmUgYXJlYFxuICAvLyAgICAgOiBgKioke3RvdGFsfSoqIGhhc2A7XG4gIGNvbnN0IGxhbmdUb3RhbF9zZWxlY3Rpb24gPVxuICAgIHRvdGFsLnByYWN0aWNlID09IGFkb3B0aW9uRmFjdG9yQWxsTGFiZWwgPyBcImluVG90YWxcIiA6IFwic3BlY2lmaWNIYXNcIjtcbiAgY29uc3QgbGFuZ1RvdGFsID0gX2xhbmcobGFuZ0Jhc2VQYXRoLm92ZXJ2aWV3KTtcbiAgY29uc3QgbGFuZ1RvdGFsSXRlbXMgPSBbXG4gICAge1xuICAgICAgaW5zZXJ0TmFtZTogXCJzdGFydFN0cmluZ1wiLFxuICAgICAgdmFsdWU6IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LnBocmFzZXNbbGFuZ1RvdGFsX3NlbGVjdGlvbl0pXG4gICAgfSxcbiAgICB7IGluc2VydE5hbWU6IFwidG90YWxPYnNcIiwgdmFsdWU6IGZvcm1hdENvbW1hKHRvdGFsLnRvdGFsT2JzZXJ2YXRpb25zKSB9LFxuICAgIHsgaW5zZXJ0TmFtZTogXCJpdGVtXCIsIHZhbHVlOiB0bF9wcmFjKHRvdGFsLnByYWN0aWNlKSB9LFxuICAgIHsgaW5zZXJ0TmFtZTogXCJ0b3RhbEZhY3RvcnNcIiwgdmFsdWU6IHRvdGFsLmZhY3RvckNvdW50Lmxlbmd0aCB9XG4gIF07XG4gIGNvbnN0IG1kT3ZlcnZpZXcgPSBsYW5nVG90YWxJdGVtcy5yZWR1Y2UoKG92ZXJ2aWV3LCBpdGVtKSA9PiB7XG4gICAgcmV0dXJuIG92ZXJ2aWV3LnJlcGxhY2UoXG4gICAgICBMYW5nLmdldFJlZ2V4Rm9yTmFtZWRJbnNlcnRpb24oaXRlbS5pbnNlcnROYW1lKSxcbiAgICAgIGl0ZW0udmFsdWVcbiAgICApO1xuICB9LCBsYW5nVG90YWwpO1xuXG4gIC8vIHRvdGFsIHNpZ25pZmljYW50IHN1bSAobmVlZGxlIG1vdmUpXG4gIGNvbnN0IHRvcE5lZWRsZU1vdmUgPSBULnRpZHkoXG4gICAgZGF0YSxcbiAgICBULmZpbHRlcigoZCkgPT4gZC5kaXJlY3Rpb24gIT09IFwiTm90IHNpZ25pZmljYW50XCIpLFxuICAgIFQuZ3JvdXBCeShbXCJmYWN0b3JcIl0sIFtULnN1bW1hcml6ZSh7IHBlcmNfc2lnOiBULnN1bShcInBlcmNcIikgfSldKSxcbiAgICBULmFycmFuZ2UoVC5kZXNjKFwicGVyY19zaWdcIikpLFxuICAgIFQuc2xpY2VNYXgoMSwgXCJwZXJjX3NpZ1wiKVxuICApWzBdO1xuICBjb25zdCBsYW5nVG9wTmVlZGxlID0gX2xhbmcobGFuZ0Jhc2VQYXRoLm1vc3RJbXBhY3RmdWxGYWN0b3IpO1xuICBjb25zdCBsYW5nVG9wTmVlZGxlSXRlbXMgPSBbXG4gICAgeyBpbnNlcnROYW1lOiBcImZhY3RvclwiLCB2YWx1ZTogdGxfZmFjdCh0b3BOZWVkbGVNb3ZlLmZhY3RvcikgfSxcbiAgICB7IGluc2VydE5hbWU6IFwicHJhY3RpY2VcIiwgdmFsdWU6IHRsX3ByYWMoc2VsZWN0ZWRQcmFjdGljZSkgfSxcbiAgICB7IGluc2VydE5hbWU6IFwiaW5mbHVlbmNlXCIsIHZhbHVlOiBkMy5mb3JtYXQoXCJkXCIpKHRvcE5lZWRsZU1vdmUucGVyY19zaWcpIH1cbiAgXTtcbiAgY29uc3QgbWRUb3BOZWVkbGUgPSBsYW5nVG9wTmVlZGxlSXRlbXMucmVkdWNlKChvdmVydmlldywgaXRlbSkgPT4ge1xuICAgIHJldHVybiBvdmVydmlldy5yZXBsYWNlKFxuICAgICAgTGFuZy5nZXRSZWdleEZvck5hbWVkSW5zZXJ0aW9uKGl0ZW0uaW5zZXJ0TmFtZSksXG4gICAgICBpdGVtLnZhbHVlXG4gICAgKTtcbiAgfSwgbGFuZ1RvcE5lZWRsZSk7XG5cbiAgLy8gaGlnaCBuZWcgaW5mbHVlbmNlXG4gIGNvbnN0IGxhcmdlTmVnSW5mbHVlbmNlID0gVC50aWR5KFxuICAgIGRhdGEsXG4gICAgVC5maWx0ZXIoKGQpID0+IGQuZGlyZWN0aW9uID09IFwiTmVnYXRpdmVcIiksXG4gICAgVC5zbGljZU1heCgxLCBcInBlcmNcIilcbiAgKVswXTtcbiAgY29uc3QgbGFyZ2VQb3NJbmZsdWVuY2UgPSBULnRpZHkoXG4gICAgZGF0YSxcbiAgICBULmZpbHRlcigoZCkgPT4gZC5kaXJlY3Rpb24gPT0gXCJQb3NpdGl2ZVwiKSxcbiAgICBULnNsaWNlTWF4KDEsIFwicGVyY1wiKVxuICApWzBdO1xuXG4gIGNvbnN0IGxhbmdCaWdJbmZsdWVuY2UgPSBfbGFuZyhsYW5nQmFzZVBhdGguYmlnZ2VzdEluZmx1ZW5jZXMpXG4gIGNvbnN0IGxhbmdCaWdJbmZsdWVuY2VJdGVtcyA9IFtcbiAgICB7IGluc2VydE5hbWU6IFwiZmFjdG9yTmVnXCIsIHZhbHVlOiB0bF9mYWN0KGxhcmdlTmVnSW5mbHVlbmNlLmZhY3RvcikgfSxcbiAgICB7IGluc2VydE5hbWU6IFwiaW5mbHVlbmNlTmVnXCIsIHZhbHVlOiBkMy5mb3JtYXQoXCJkXCIpKGxhcmdlTmVnSW5mbHVlbmNlLnBlcmMpIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcImZhY3RvclBvc1wiLCB2YWx1ZTogdGxfZmFjdChsYXJnZVBvc0luZmx1ZW5jZS5mYWN0b3IpIH0sXG4gICAgeyBpbnNlcnROYW1lOiBcImluZmx1ZW5jZVBvc1wiLCB2YWx1ZTogZDMuZm9ybWF0KFwiZFwiKShsYXJnZVBvc0luZmx1ZW5jZS5wZXJjKSB9LFxuICBdO1xuICBjb25zdCBtZEJpZ0luZmx1ZW5jZSA9IGxhbmdCaWdJbmZsdWVuY2VJdGVtcy5yZWR1Y2UoKG92ZXJ2aWV3LCBpdGVtKSA9PiB7XG4gICAgcmV0dXJuIG92ZXJ2aWV3LnJlcGxhY2UoXG4gICAgICBMYW5nLmdldFJlZ2V4Rm9yTmFtZWRJbnNlcnRpb24oaXRlbS5pbnNlcnROYW1lKSxcbiAgICAgIGl0ZW0udmFsdWVcbiAgICApO1xuICB9LCBsYW5nQmlnSW5mbHVlbmNlKTtcblxuICByZXR1cm4gbWRgJHttZE92ZXJ2aWV3fVxuXG4ke21kVG9wTmVlZGxlfVxuXG4ke21kQmlnSW5mbHVlbmNlfWA7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE4IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIHNlbGVjdFJlc291cmNlUHJhY3RpY2UgPSB7XG4gIGNvbnN0IGRhdGEgPSBfLnVuaXEoY3NhTWFudWFscy5tYXAoKGQpID0+IGQucHJhY3RpY2UpKVxuICAgIC5tYXAoKGQpID0+IHtcbiAgICAgIHJldHVybiB7IGZpZWxkOiBkLCB0cmFuc2xhdGlvbjogdGQuc3VtbWFyeVByYWN0aWNlcy52YWx1ZXM/LltkXSB9O1xuICAgIH0pXG4gICAgLnNvcnQoKGEsIGIpID0+IF9sYW5nKGEudHJhbnNsYXRpb24pID4gX2xhbmcoYi50cmFuc2xhdGlvbikpO1xuXG4gIHJldHVybiBJbnB1dHMuc2VsZWN0KGRhdGEsIHtcbiAgICBsYWJlbDogX2xhbmcobmJUZXh0LnN1cHBvcnROYlRleHQud29yZHMucHJhY3RpY2Uuc2luZ3VsYXIpLFxuICAgIGZvcm1hdDogeCA9PiBfbGFuZyh4LnRyYW5zbGF0aW9uKSxcbiAgICB2YWx1ZTogZGF0YS5maW5kKHggPT4geC5maWVsZCA9PSBcIklub3JnYW5pYyBGZXJ0aWxpemVyXCIpXG4gIH0pO1xufVxuXG5odG1sYCR7Y3NhUmVzb3VyY2VIdG1sfWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAke19sYW5nKG5iVGV4dC5tZXRob2RzU291cmNlcy5oMkRhdGFTb3VyY2VzU3Vic2VjdGlvbil9YDtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBcbiMjIyAke19sYW5nKG5iVGV4dC5tZXRob2RzU291cmNlcy5oM0VyYSl9XG4ke19sYW5nKG5iVGV4dC5tZXRob2RzU291cmNlcy5oM0VyYVN1YnNlY3Rpb24pfVxuYDtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjEiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJuYlRpdGxlID0gX2xhbmcoeyBlbjogXCJEaXNjb3ZlciBTb2x1dGlvbnNcIiwgZnI6IFwiRMOpY291dnJpciBkZXMgc29sdXRpb25zXCIgfSk7XG4vLyBoMVxuT3ZlcnZpZXcgPSBfbGFuZyhuYlRleHQub3ZlcnZpZXcuaDEpO1xuXG5JbnRlcnZlbnRpb25zID0gX2xhbmcobmJUZXh0LmludGVydmVudGlvbnMuaDEpO1xuXG5QcmFjdGljYWxJbXBhY3QgPSBfbGFuZyhuYlRleHQucHJhY3RpY2FsSW1wYWN0Lm1lYW5Dcm9wRGlmZi5oMSk7XG5cblJpc2tzID0gX2xhbmcobmJUZXh0LnJpc2tzLmgxKTtcblxuRmFjdG9ycyA9IF9sYW5nKG5iVGV4dC5hZG9wdGlvbkZhY3RvcnMuaDEpO1xuXG5TdW1tYXJ5ID0gX2xhbmcobmJUZXh0LnN1bW1hcnkuaDEpO1xuXG5NZXRob2RzID0gX2xhbmcobmJUZXh0Lm1ldGhvZHNTb3VyY2VzLmgxKTtcblxuLy8gaDJcbmNyb3BfZGlmZiA9IF9sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QubWVhbkNyb3BEaWZmLmgyLm1lYW5EaWZmKTtcblxuY3JvcF9kaWZmX2FleiA9IF9sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QubWVhbkNyb3BEaWZmQUVaLmgyKTtcblxuYWV6X2RpZiA9IF9sYW5nKG5iVGV4dC5wcmFjdGljYWxJbXBhY3QubWVhbkNyb3BEaWZmQUVaLmgyKTtcblxuZGF0YV9zb3VyY2VzID0gX2xhbmcobmJUZXh0Lm1ldGhvZHNTb3VyY2VzLmgyRGF0YVNvdXJjZXMpO1xuXG5tZXRob2RzID0gX2xhbmcobmJUZXh0Lm1ldGhvZHNTb3VyY2VzLmgyTWV0aG9kcyk7XG5cbnF1aWNrSW5zaWdodCA9IF9sYW5nKG5iVGV4dC5zdXBwb3J0TmJUZXh0LmxhYmVscy5xdWlja0luc2lnaHRzKTtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJpbXBvcnQge25iVGV4dH0gZnJvbSBcIi9kYXRhL0Rpc2NvdmVyU29sdXRpb25zL25iVGV4dC5vanNcIlxuXG5pbXBvcnQge2xhbmcgYXMgTGFuZyB9IGZyb20gXCIvaGVscGVycy9sYW5nLmpzXCJcblxuX2xhbmcgPSBhd2FpdCBMYW5nLmxnKGxhbmd1YWdlLmtleSlcblxuZGVmYXVsdExhbmdLZXkgPSB7XG4gIGNvbnN0IGxpc3QgPSBsYW5ndWFnZXMubWFwKChkKSA9PiBkLmtleSk7XG4gIGNvbnN0IGRlZmF1bHRLZXkgPSBcImVuXCI7XG4gIGNvbnN0IHF1ZXJ5UGFyYW0gPSBhd2FpdCBMYW5nLmdldFBhcmFtRnJvbUxpc3QoeyBuYW1lOiBcImxhbmdcIiwgbGlzdCB9KTtcbiAgcmV0dXJuIHF1ZXJ5UGFyYW0gPz8gZGVmYXVsdEtleTtcbn1cblxubGFuZ3VhZ2VzID0gW1xuICB7IGtleTogXCJlblwiLCBsYWJlbDogXCJFbmdsaXNoXCIsIGxvY2FsZTogJ2VuLVVTJyB9LFxuICB7IGtleTogXCJmclwiLCBsYWJlbDogXCJGcmFuw6dhaXNcIiwgbG9jYWxlOiAnZnItRlInIH1cbl1cblxudmlld29mIGxhbmd1YWdlID0gSW5wdXRzLnJhZGlvKGxhbmd1YWdlcywge1xuICBsYWJlbDogXCJNYWluIGxhbmd1YWdlIHRvZ2dsZVwiLFxuICBmb3JtYXQ6IChkKSA9PiBkLmtleSxcbiAgdmFsdWU6IGxhbmd1YWdlcy5maW5kKCh4KSA9PiB4LmtleSA9PT0gZGVmYXVsdExhbmdLZXkpLFxufSlcblxuLy8gZGF0YSB0cmFuc2xhdGlvbiB2YWx1ZXNcbnRkID0ge1xuICBsZXQgZGF0YSA9IGF3YWl0IEZpbGVBdHRhY2htZW50KFwiL2RhdGEvRGlzY292ZXJTb2x1dGlvbnMvdHJhbnNsYXRpb25fdjJAMS5qc29uXCIpLmpzb24oKTtcblxuICAvKiBBZGRpdGlvbnMgKi9cbiAgZGF0YS5wcmFjdGljZXMudmFsdWVzW1wiQWxsIHByYWN0aWNlc1wiXSA9IHtcbiAgICBlbjogXCJBbGwgcHJhY3RpY2VzXCIsXG4gICAgZnI6IFwiVG91dGVzIGxlcyBwcmF0aXF1ZXNcIlxuICB9O1xuXG4gIGRhdGEuc3VtbWFyeVN5c3RlbXMgPSB7XG4gICAgZW46IFwic3lzdGVtXCIsXG4gICAgZnI6IFwic3lzdMOobWVcIixcbiAgICB2YWx1ZXM6IHtcbiAgICAgIEFncm9mb3Jlc3R5OiB7XG4gICAgICAgIGVuOiBcIkFncm9mb3Jlc3RyeVwiLFxuICAgICAgICBmcjogXCJBZ3JvZm9yZXN0acOocmVcIlxuICAgICAgfSxcbiAgICAgIFwiQ2VyZWFsLWJhc2VkXCI6IHtcbiAgICAgICAgZW46IFwiQ2VyZWFsLWJhc2VkXCIsXG4gICAgICAgIGZyOiBcIsOAIGJhc2UgZGUgY8OpcsOpYWxlc1wiXG4gICAgICB9LFxuICAgICAgXCJDZXJlYWwtYmFzZWQsIFJpY2UtYmFzZWRcIjoge1xuICAgICAgICBlbjogXCJDZXJlYWwtYmFzZWQsIFJpY2UtYmFzZWRcIixcbiAgICAgICAgZnI6IFwiw4AgYmFzZSBkZSBjw6lyw6lhbGVzLCDDgCBiYXNlIGRlIHJpelwiXG4gICAgICB9LFxuICAgICAgXCJNYWl6ZSwgTmFwaWVyIGdyYXNzLCBEZXNtb2RpdW0gbGVndW1lXCI6IHtcbiAgICAgICAgZW46IFwiTWFpemUsIE5hcGllciBncmFzcywgRGVzbW9kaXVtIGxlZ3VtZVwiLFxuICAgICAgICBmcjogXCJNYcOvcywgaGVyYmUgTmFwaWVyLCBsw6lndW1pbmV1c2UgRGVzbW9kaXVtXCJcbiAgICAgIH0sXG4gICAgICBcIk1haXplLCBPdGhlclwiOiB7XG4gICAgICAgIGVuOiBcIk1haXplLCBPdGhlclwiLFxuICAgICAgICBmcjogXCJNYcOvcywgYXV0cmVcIlxuICAgICAgfSxcbiAgICAgIFwiUmljZS1iYXNlZFwiOiB7XG4gICAgICAgIGVuOiBcIlJpY2UtYmFzZWRcIixcbiAgICAgICAgZnI6IFwiw4AgYmFzZSBkZSByaXpcIlxuICAgICAgfSxcbiAgICAgIFVuc3BlY2lmaWVkOiB7XG4gICAgICAgIGVuOiBcIlVuc3BlY2lmaWVkXCIsXG4gICAgICAgIGZyOiBcIk5vbiBzcMOpY2lmacOpXCJcbiAgICAgIH0sXG4gICAgICBcIlZlZ2V0YWJsZXMsIEZydWl0cywgUmljZVwiOiB7XG4gICAgICAgIGVuOiBcIlZlZ2V0YWJsZXMsIEZydWl0cywgUmljZVwiLFxuICAgICAgICBmcjogXCJMw6lndW1lcywgRnJ1aXRzLCBSaXpcIlxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBkYXRhLnN1bW1hcnlQcmFjdGljZXMgPSB7XG4gICAgZW46IFwiUHJhY3RpY2VcIixcbiAgICBmcjogXCJQcmF0aXF1ZVwiLFxuICAgIHZhbHVlczoge1xuICAgICAgXCJBZ3JvZm9yZXN0cnkgRmFsbG93XCI6IHtcbiAgICAgICAgZW46IFwiQWdyb2ZvcmVzdHJ5IEZhbGxvd1wiLFxuICAgICAgICBmcjogXCJKYWNow6hyZSBhZ3JvZm9yZXN0acOocmVcIlxuICAgICAgfSxcbiAgICAgIFwiQWdyb2ZvcmVzdHJ5IFBydW5pbmdcIjoge1xuICAgICAgICBlbjogXCJBZ3JvZm9yZXN0cnkgUHJ1bmluZ1wiLFxuICAgICAgICBmcjogXCJUYWlsbGUgYWdyb2ZvcmVzdGnDqHJlXCJcbiAgICAgIH0sXG4gICAgICBBbGxleWNyb3BwaW5nOiB7XG4gICAgICAgIGVuOiBcIkFsbGV5Y3JvcHBpbmdcIixcbiAgICAgICAgZnI6IFwiQ3VsdHVyZSBlbiBhbGzDqWVzXCJcbiAgICAgIH0sXG4gICAgICBCaW9jaGFyOiB7XG4gICAgICAgIGVuOiBcIkJpb2NoYXJcIixcbiAgICAgICAgZnI6IFwiQmlvY2hhclwiXG4gICAgICB9LFxuICAgICAgXCJCb3VuZGFyeSBQbGFudGluZ1wiOiB7XG4gICAgICAgIGVuOiBcIkJvdW5kYXJ5IFBsYW50aW5nXCIsXG4gICAgICAgIGZyOiBcIlBsYW50YXRpb24gZW4gYm9yZHVyZVwiXG4gICAgICB9LFxuICAgICAgQ29tcG9zdGluZzoge1xuICAgICAgICBlbjogXCJDb21wb3N0aW5nXCIsXG4gICAgICAgIGZyOiBcIkNvbXBvc3RhZ2VcIlxuICAgICAgfSxcbiAgICAgIFwiQ3JvcCBSZXNpZHVlIEluY29ycG9yYXRpb25cIjoge1xuICAgICAgICBlbjogXCJDcm9wIFJlc2lkdWUgSW5jb3Jwb3JhdGlvblwiLFxuICAgICAgICBmcjogXCJJbmNvcnBvcmF0aW9uIGRlcyByw6lzaWR1cyBkZSByw6ljb2x0ZVwiXG4gICAgICB9LFxuICAgICAgXCJDcm9wIFJlc2lkdWUgTWFuYWdlbWVudFwiOiB7XG4gICAgICAgIGVuOiBcIkNyb3AgUmVzaWR1ZSBNYW5hZ2VtZW50XCIsXG4gICAgICAgIGZyOiBcIkdlc3Rpb24gZGVzIHLDqXNpZHVzIGRlIHLDqWNvbHRlXCJcbiAgICAgIH0sXG4gICAgICBcIkNyb3AgUm90YXRpb25cIjoge1xuICAgICAgICBlbjogXCJDcm9wIFJvdGF0aW9uXCIsXG4gICAgICAgIGZyOiBcIlJvdGF0aW9uIGRlcyBjdWx0dXJlc1wiXG4gICAgICB9LFxuICAgICAgXCJEZWZpY2l0IElycmlnYXRpb25cIjoge1xuICAgICAgICBlbjogXCJEZWZpY2l0IElycmlnYXRpb25cIixcbiAgICAgICAgZnI6IFwiSXJyaWdhdGlvbiBkw6lmaWNpdGFpcmVcIlxuICAgICAgfSxcbiAgICAgIFwiR3JlZW4gTWFudXJlXCI6IHtcbiAgICAgICAgZW46IFwiR3JlZW4gTWFudXJlXCIsXG4gICAgICAgIGZyOiBcIkVuZ3JhaXMgdmVydFwiXG4gICAgICB9LFxuICAgICAgXCJJbXByb3ZlZCBGYWxsb3dzXCI6IHtcbiAgICAgICAgZW46IFwiSW1wcm92ZWQgRmFsbG93c1wiLFxuICAgICAgICBmcjogXCJKYWNow6hyZXMgYW3DqWxpb3LDqWVzXCJcbiAgICAgIH0sXG4gICAgICBcIkltcHJvdmVkIFZhcmlldGllc1wiOiB7XG4gICAgICAgIGVuOiBcIkltcHJvdmVkIFZhcmlldGllc1wiLFxuICAgICAgICBmcjogXCJWYXJpw6l0w6lzIGFtw6lsaW9yw6llc1wiXG4gICAgICB9LFxuICAgICAgXCJJbm9yZ2FuaWMgRmVydGlsaXplclwiOiB7XG4gICAgICAgIGVuOiBcIklub3JnYW5pYyBGZXJ0aWxpemVyXCIsXG4gICAgICAgIGZyOiBcIkVuZ3JhaXMgaW5vcmdhbmlxdWVcIlxuICAgICAgfSxcbiAgICAgIEludGVyY3JvcHBpbmc6IHtcbiAgICAgICAgZW46IFwiSW50ZXJjcm9wcGluZ1wiLFxuICAgICAgICBmcjogXCJDdWx0dXJlIGludGVyY2FsYWlyZVwiXG4gICAgICB9LFxuICAgICAgTXVsY2hpbmc6IHtcbiAgICAgICAgZW46IFwiTXVsY2hpbmdcIixcbiAgICAgICAgZnI6IFwiUGFpbGxhZ2VcIlxuICAgICAgfSxcbiAgICAgIFwiT3JnYW5pYyBGZXJ0aWxpemVyXCI6IHtcbiAgICAgICAgZW46IFwiT3JnYW5pYyBGZXJ0aWxpemVyXCIsXG4gICAgICAgIGZyOiBcIkVuZ3JhaXMgb3JnYW5pcXVlXCJcbiAgICAgIH0sXG4gICAgICBcIk90aGVyIEFncm9mb3Jlc3RyeVwiOiB7XG4gICAgICAgIGVuOiBcIk90aGVyIEFncm9mb3Jlc3RyeVwiLFxuICAgICAgICBmcjogXCJBdXRyZSBhZ3JvZm9yZXN0acOocmVcIlxuICAgICAgfSxcbiAgICAgIFBhcmtsYW5kczoge1xuICAgICAgICBlbjogXCJQYXJrbGFuZHNcIixcbiAgICAgICAgZnI6IFwiUGFyY3MgYWdyb2ZvcmVzdGllcnNcIlxuICAgICAgfSxcbiAgICAgIFwicEggQ29udHJvbFwiOiB7XG4gICAgICAgIGVuOiBcInBIIENvbnRyb2xcIixcbiAgICAgICAgZnI6IFwiQ29udHLDtGxlIGR1IHBIXCJcbiAgICAgIH0sXG4gICAgICBTaWx2b3Bhc3R1cmU6IHtcbiAgICAgICAgZW46IFwiU2lsdm9wYXN0dXJlXCIsXG4gICAgICAgIGZyOiBcIlN5bHZvcGFzdG9yYWxpc21lXCJcbiAgICAgIH0sXG4gICAgICBcIlN1cHBsZW1lbnRhbCBJcnJpZ2F0aW9uXCI6IHtcbiAgICAgICAgZW46IFwiU3VwcGxlbWVudGFsIElycmlnYXRpb25cIixcbiAgICAgICAgZnI6IFwiSXJyaWdhdGlvbiBzdXBwbMOpbWVudGFpcmVcIlxuICAgICAgfSxcbiAgICAgIFwiVGlsbGFnZSBNYW5hZ2VtZW50XCI6IHtcbiAgICAgICAgZW46IFwiVGlsbGFnZSBNYW5hZ2VtZW50XCIsXG4gICAgICAgIGZyOiBcIkdlc3Rpb24gZHUgdHJhdmFpbCBkdSBzb2xcIlxuICAgICAgfSxcbiAgICAgIFwiV2F0ZXIgSGFydmVzdGluZ1wiOiB7XG4gICAgICAgIGVuOiBcIldhdGVyIEhhcnZlc3RpbmdcIixcbiAgICAgICAgZnI6IFwiQ29sbGVjdGUgZGVzIGVhdXhcIlxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBhZG9wdGlvbiBmYWN0b3JzLCB3aXRoIGFydGljbGVzXG4gIGRhdGEuYWRvcHRpb25fZmFjdG9yc193aXRoX2FydGljbGVzID0ge1xuICAgIGVuOiBcImFkb3B0aW9uX2ZhY3RvcnNcIixcbiAgICBmcjogXCJmYWN0ZXVyc19kYWRvcHRpb25cIixcbiAgICB2YWx1ZXM6IHtcbiAgICAgIFwiQWNjZXNzIHRvIGNyZWRpdFwiOiB7IGVuOiBcIkFjY2VzcyB0byBjcmVkaXRcIiwgZnI6IFwiTCdBY2PDqHMgYXUgY3LDqWRpdFwiIH0sXG4gICAgICBcIkFjY2VzcyB0byBpbmZvcm1hdGlvblwiOiB7XG4gICAgICAgIGVuOiBcIkFjY2VzcyB0byBpbmZvcm1hdGlvblwiLFxuICAgICAgICBmcjogXCJMJ0FjY8OocyDDoCBsJ2luZm9ybWF0aW9uXCJcbiAgICAgIH0sXG4gICAgICBcIkF2YWlsYWJpbGl0eSBvZiBsYWJvclwiOiB7XG4gICAgICAgIGVuOiBcIkF2YWlsYWJpbGl0eSBvZiBsYWJvclwiLFxuICAgICAgICBmcjogXCJMYSBEaXNwb25pYmlsaXTDqSBkZSBsYSBtYWluLWQnxZN1dnJlXCJcbiAgICAgIH0sXG4gICAgICBcIkJpb3BoeWlzY2FsIGZhY3RvcnNcIjoge1xuICAgICAgICBlbjogXCJCaW9waHlpc2NhbCBmYWN0b3JzXCIsXG4gICAgICAgIGZyOiBcIkxlcyBGYWN0ZXVycyBiaW9waHlzaXF1ZXNcIlxuICAgICAgfSxcbiAgICAgIFwiQ2hhbmdlcyBpbiB3ZWF0aGVyXCI6IHtcbiAgICAgICAgZW46IFwiQ2hhbmdlcyBpbiB3ZWF0aGVyXCIsXG4gICAgICAgIGZyOiBcIkxlcyBDaGFuZ2VtZW50cyBjbGltYXRpcXVlc1wiXG4gICAgICB9LFxuICAgICAgXCJEaXN0YW5jZSB0byBtYXJrZXRcIjoge1xuICAgICAgICBlbjogXCJEaXN0YW5jZSB0byBtYXJrZXRcIixcbiAgICAgICAgZnI6IFwiTGEgRGlzdGFuY2UgYXUgbWFyY2jDqVwiXG4gICAgICB9LFxuICAgICAgXCJFeHBvc3VyZSB0byByaXNrcyBhbmQgc2hvY2tzXCI6IHtcbiAgICAgICAgZW46IFwiRXhwb3N1cmUgdG8gcmlza3MgYW5kIHNob2Nrc1wiLFxuICAgICAgICBmcjogXCJMJ0V4cG9zaXRpb24gYXV4IHJpc3F1ZXMgZXQgY2hvY3NcIlxuICAgICAgfSxcbiAgICAgIE90aGVyOiB7IGVuOiBcIk90aGVyXCIsIGZyOiBcIkF1dHJlXCIgfSxcbiAgICAgIFwiUmVzb3VyY2UgZW5kb3dtZW50c1wiOiB7XG4gICAgICAgIGVuOiBcIlJlc291cmNlIGVuZG93bWVudHNcIixcbiAgICAgICAgZnI6IFwiTGEgRG90YXRpb24gZW4gcmVzc291cmNlc1wiXG4gICAgICB9LFxuICAgICAgXCJTZWN1cmUgdGVudXJlXCI6IHsgZW46IFwiU2VjdXJlIHRlbnVyZVwiLCBmcjogXCJMYSBUZW51cmUgc8OpY3VyaXPDqWVcIiB9LFxuICAgICAgXCJTb2NpYWwgY2FwaXRhbFwiOiB7IGVuOiBcIlNvY2lhbCBjYXBpdGFsXCIsIGZyOiBcIkxhIENhcGl0YWwgc29jaWFsXCIgfSxcbiAgICAgIFwiU29jaW8tZGVtb2dyYXBoaWNzXCI6IHtcbiAgICAgICAgZW46IFwiU29jaW8tZGVtb2dyYXBoaWNzXCIsXG4gICAgICAgIGZyOiBcIkxhIFNvY2lvLWTDqW1vZ3JhcGhpZVwiXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIGNyb3AgYXJ0aWNsZXNcbiAgZGF0YS5Dcm9wX3dpdGhfYXJ0aWNsZXMgPSB7XG4gICAgZW46IFwiY3JvcF93aXRoX2FydGljbGVzXCIsXG4gICAgZnI6IFwiY3JvcF93aXRoX2FydGljbGVzXCIsXG4gICAgdmFsdWVzOiB7XG4gICAgICBNYWl6ZTogeyBlbjogXCJtYWl6ZVwiLCBmcjogXCJsZSBtYcOvc1wiIH0sXG4gICAgICBSaWNlOiB7IGVuOiBcInJpY2VcIiwgZnI6IFwibGUgcml6XCIgfSxcbiAgICAgIFwiUGVhcmwgTWlsbGV0XCI6IHsgZW46IFwicGVhcmwgbWlsbGV0XCIsIGZyOiBcImxlIG1pbGxldCBwZXJsw6lcIiB9LFxuICAgICAgU29yZ2h1bTogeyBlbjogXCJzb3JnaHVtXCIsIGZyOiBcImxlIHNvcmdob1wiIH0sXG4gICAgICBDb3dwZWE6IHsgZW46IFwiY293cGVhXCIsIGZyOiBcImxlIG5pw6liw6lcIiB9LFxuICAgICAgXCJDb21tb24gQmVhblwiOiB7IGVuOiBcImNvbW1vbiBiZWFuXCIsIGZyOiBcImxlIGhhcmljb3QgY29tbXVuXCIgfSxcbiAgICAgIFNveWJlYW46IHsgZW46IFwic295YmVhblwiLCBmcjogXCJsZSBzb2phXCIgfSxcbiAgICAgIENhc3NhdmE6IHsgZW46IFwiY2Fzc2F2YVwiLCBmcjogXCJsZSBtYW5pb2NcIiB9LFxuICAgICAgR3JvdW5kbnV0OiB7IGVuOiBcImdyb3VuZG51dFwiLCBmcjogXCJsJ2FyYWNoaWRlXCIgfSxcbiAgICAgIFdoZWF0OiB7IGVuOiBcIndoZWF0XCIsIGZyOiBcImxlIGJsw6lcIiB9LFxuICAgICAgWWFtOiB7IGVuOiBcInlhbVwiLCBmcjogXCJsJ2lnbmFtZVwiIH0sXG4gICAgICBDb3R0b246IHsgZW46IFwiY290dG9uXCIsIGZyOiBcImNvdG9uXCIgfSxcbiAgICAgIFRlZmY6IHsgZW46IFwidGVmZlwiLCBmcjogXCJsZSB0ZWZmXCIgfSxcbiAgICAgIFRvbWF0bzogeyBlbjogXCJ0b21hdG9cIiwgZnI6IFwibGEgdG9tYXRlXCIgfSxcbiAgICAgIFBvdGF0bzogeyBlbjogXCJwb3RhdG9cIiwgZnI6IFwibGEgcG9tbWUgZGUgdGVycmVcIiB9LFxuICAgICAgXCJTdWdhciBDYW5lXCI6IHsgZW46IFwic3VnYXIgY2FuZVwiLCBmcjogXCJsYSBjYW5uZSDDoCBzdWNyZVwiIH0sXG4gICAgICBcIlBpZ2VvbiBQZWFcIjogeyBlbjogXCJwaWdlb24gcGVhXCIsIGZyOiBcImxlIHBvaXMgY2FqYW5cIiB9LFxuICAgICAgQ2hpY2twZWE6IHsgZW46IFwiY2hpY2twZWFcIiwgZnI6IFwibGUgcG9pcyBjaGljaGVcIiB9LFxuICAgICAgT2tyYTogeyBlbjogXCJva3JhXCIsIGZyOiBcImxlIGdvbWJvXCIgfSxcbiAgICAgIFwiU3dlZXQgUG90YXRvXCI6IHsgZW46IFwic3dlZXQgcG90YXRvXCIsIGZyOiBcImxhIHBhdGF0ZSBkb3VjZVwiIH0sXG4gICAgICBcIkZvZGRlciBMZWd1bWVcIjoge1xuICAgICAgICBlbjogXCJmb2RkZXIgbGVndW1lXCIsXG4gICAgICAgIGZyOiBcImxhIGzDqWd1bWluZXVzZSBmb3VycmFnw6hyZVwiXG4gICAgICB9LFxuICAgICAgQmFybGV5OiB7IGVuOiBcImJhcmxleVwiLCBmcjogXCJsJ29yZ2VcIiB9LFxuICAgICAgT2xpdmU6IHsgZW46IFwib2xpdmVcIiwgZnI6IFwibCdvbGl2ZVwiIH0sXG4gICAgICBDYWJiYWdlOiB7IGVuOiBcImNhYmJhZ2VcIiwgZnI6IFwibGUgY2hvdVwiIH0sXG4gICAgICBcIkJhbmFuYSBTd2VldFwiOiB7IGVuOiBcImJhbmFuYSBzd2VldFwiLCBmcjogXCJsYSBiYW5hbmUgZG91Y2VcIiB9LFxuICAgICAgUmFwZTogeyBlbjogXCJyYXBlXCIsIGZyOiBcImxlIGNvbHphXCIgfSxcbiAgICAgIFN1bmZsb3dlcjogeyBlbjogXCJzdW5mbG93ZXJcIiwgZnI6IFwibGUgdG91cm5lc29sXCIgfSxcbiAgICAgIFwiQ29va2luZyBCYW5hbmFcIjoge1xuICAgICAgICBlbjogXCJjb29raW5nIGJhbmFuYVwiLFxuICAgICAgICBmcjogXCJsYSBiYW5hbmUgZGUgY3Vpc2luZVwiXG4gICAgICB9LFxuICAgICAgU2VzYW1lOiB7IGVuOiBcInNlc2FtZVwiLCBmcjogXCJsZSBzw6lzYW1lXCIgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGF0YTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiIvLyBmb3JtYXQgbnVtYmVyLCBsb25nIG5vdGF0aW9uXG5mb3JtYXROdW1Db21wYWN0TG9uZyA9IGZ1bmN0aW9uIChudW1iZXIsIHsgbG9jYWxlID0gXCJlbi1VU1wiIH0gPSB7fSkge1xuICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZSwge1xuICAgIG5vdGF0aW9uOiBcImNvbXBhY3RcIixcbiAgICBjb21wYWN0RGlzcGxheTogXCJsb25nXCIsXG4gICAgdW5pdERpc3BsYXk6IFwibG9uZ1wiLFxuICB9KS5mb3JtYXQobnVtYmVyKTtcbn07XG5cbmZvcm1hdE51bVN0YW5kYXJkID0gZnVuY3Rpb24gKG51bWJlciwgeyBsb2NhbGUgPSBcImVuLVVTXCIgfSA9IHt9KSB7XG4gIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlLCB7fSkuZm9ybWF0KG51bWJlcik7XG59O1xuXG4vLyBmb3JtYXQgbnVtYmVyLCAyIGRlY2ltYWwgcGxhY2VzXG5mb3JtYXROdW0gPSBkMy5mb3JtYXQoXCIuMmZcIik7XG5cbmZvcm1hdENvbW1hID0gZDMuZm9ybWF0KFwiLFwiKTtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiIvLyBUUlVFIG9yIEZBTFNFIHN0cmluZ3MgKGZyb20gUiksIG90aGVyd2lzZSBudWxsXG5wYXJzZUJvb2wgPSAoZCkgPT4ge1xuICBpZiAoZCA9PT0gXCJUUlVFXCIpIHJldHVybiB0cnVlO1xuICBpZiAoZCA9PT0gXCJGQUxTRVwiKSByZXR1cm4gZmFsc2U7XG4gIGVsc2UgcmV0dXJuIG51bGw7XG59O1xuXG4vLyBQYXJzaW5nIG51bWJlcnMsIGJsYW5rIHN0cmluZ3MgYXMgTmFOJ3NcbnBhcnNlTnVtID0gKGQpID0+IHtcbiAgaWYgKHR5cGVvZiBkID09PSBcIm51bWJlclwiICYmICFpc05hTihkKSkgcmV0dXJuIGQ7XG4gIHJldHVybiBkLnRyaW0oKSA9PT0gXCJcIiA/IE5hTiA6ICtkO1xufTtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJjb2xvclllbGxvd0dyZWVuID0gW1wiI0Y3RDczMlwiLCBcIiMyMTY3MjlcIl1cblxuLy8gYWV6IGNvbG9yIHNjYWxlXG5hZXpDb2xvcl9uZXcgPSB7XG4gIGNvbnN0IGxvb2t1cEFFWiA9IChhZXopID0+IF9sYW5nKHRkLkFFWl9DbGFzc19GQU8udmFsdWVzW2Flel0pXG4gIHJldHVybiB7XG4gICAgZG9tYWluOiBbXG4gICAgICBsb29rdXBBRVooJ0Rlc2VydC9BcmlkIGNsaW1hdGUnKSxcbiAgICAgIGxvb2t1cEFFWihcIlRyb3BpY3MsIGhpZ2hsYW5kOyBzZW1pLWFyaWRcIiksXG4gICAgICBsb29rdXBBRVooXCJUcm9waWNzLCBsb3dsYW5kOyBzZW1pLWFyaWRcIiksXG4gICAgICBsb29rdXBBRVooXCJTdWJ0cm9waWNzLCBtb2RlcmF0ZWx5IGNvb2w7IHN1Yi1odW1pZFwiKSxcbiAgICAgIGxvb2t1cEFFWihcIlRyb3BpY3MsIGhpZ2hsYW5kOyBzdWItaHVtaWRcIiksXG4gICAgICBsb29rdXBBRVooXCJUcm9waWNzLCBsb3dsYW5kOyBzdWItaHVtaWRcIiksXG4gICAgICBsb29rdXBBRVooXCJUcm9waWNzLCBoaWdobGFuZDsgaHVtaWRcIiksXG4gICAgICBsb29rdXBBRVooXCJUcm9waWNzLCBsb3dsYW5kOyBodW1pZFwiKSxcbiAgICAgIGxvb2t1cEFFWihcIkxhbmQgd2l0aCBhbXBsZSBpcnJpZ2F0ZWQgc29pbHNcIiksXG4gICAgICBsb29rdXBBRVooXCJTZXZlcmUgc29pbC90ZXJyYWluIGxpbWl0YXRpb25zXCIpLFxuICAgICAgbG9va3VwQUVaKFwiRG9taW5hbnRseSB1cmJhbi9idWlsdC11cCBsYW5kXCIpLFxuICAgIF0sXG4gICAgcmFuZ2U6IFtcbiAgICAgIFwiI0YzRDZCMFwiLFxuICAgICAgXCIjRkNBMDM0XCIsXG4gICAgICBcIiNGN0Q3MzJcIixcbiAgICAgIFwiIzUyM0Q0RVwiLFxuICAgICAgXCIjRUY2RDk0XCIsXG4gICAgICBcIiNGOUIxQzFcIixcbiAgICAgIFwiIzJBNzlBOFwiLFxuICAgICAgXCIjNzlBMUI3XCIsXG4gICAgICBcIiM3NEI5NUFcIixcbiAgICAgIFwiIzJFNzYzN1wiLFxuICAgICAgXCIjQjFCMUIxXCJcbiAgICBdXG4gIH07XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTI2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiLy8gcmVhZCBleGNlbCBzaGVldFxud29ya2Jvb2tfbWVhbkRpZmZlcmVuY2UgPSBGaWxlQXR0YWNobWVudChcIi9kYXRhL0Rpc2NvdmVyU29sdXRpb25zL01lYW5feWllbGRfZGlmZmVyZW5jZS54bHN4XCIpLnhsc3goKVxuXG5kYXRhX2V4dGVuZGVkVGFibGUyID0ge1xuICAvLyBkYXRhIGZyb20gZmlsZVxuICBjb25zdCBmaWxlID0gRmlsZUF0dGFjaG1lbnQoXCIvZGF0YS9EaXNjb3ZlclNvbHV0aW9ucy9zcG90bGlnaHQyX0V4dGVuZGVkIFRhYmxlIDIuY3N2XCIpLmNzdigpO1xuXG4gIC8vIHJldHVybiBkYXRhXG4gIHJldHVybiBmaWxlLnRoZW4oKHgpID0+IHtcbiAgICByZXR1cm4geC5tYXAoKHJvdykgPT4gKHtcbiAgICAgIHByYWN0aWNlOiBTdHJpbmcocm93LlByYWN0aWNlKSxcbiAgICAgIG91dGNvbWU6IFN0cmluZyhyb3cuT3V0Y29tZSksXG4gICAgICBwcm9kdWN0OiBTdHJpbmcocm93LlByb2R1Y3QpLFxuICAgICAgaXNfY29tYm86IHBhcnNlQm9vbChyb3dbXCJJcy5Db21ib1wiXSksXG4gICAgICBvYnNlcnZhdGlvbnM6IHBhcnNlTnVtKHJvdy5PYnNlcnZhdGlvbnMpLFxuICAgICAgc3R1ZGllczogcGFyc2VOdW0ocm93LlN0dWRpZXMpLFxuICAgICAgdmFsdWU6IHBhcnNlTnVtKHJvdy5WYWx1ZSksXG4gICAgICBzaWc6IHBhcnNlTnVtKHJvdy5TaWcpLFxuICAgICAgdmFsdWVfc2U6IHBhcnNlTnVtKHJvd1tcIlZhbHVlLnNlXCJdKSxcbiAgICAgIGNpX2xvdzogcGFyc2VOdW0ocm93LkNJbG93KSxcbiAgICAgIGNpX2hpZ2g6IHBhcnNlTnVtKHJvdy5DSWhpZ2gpLFxuICAgICAgc291cmNlOiBTdHJpbmcocm93LlNvdXJjZSlcbiAgICB9KSk7XG4gIH0pO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImRhdGFfZXh0ZW5kZWRUYWJsZTJfdG90YWwgPSB7XG4gIC8vIGRhdGEgZnJvbSBmaWxlXG4gIGNvbnN0IGZpbGUgPSBGaWxlQXR0YWNobWVudChcIi9kYXRhL0Rpc2NvdmVyU29sdXRpb25zL3Nwb3RsaWdodDJfRXh0ZW5kZWQgVGFibGUgMkAxLmNzdlwiKS5jc3YoKTtcblxuICAvLyByZXR1cm4gZGF0YVxuICByZXR1cm4gZmlsZS50aGVuKCh4KSA9PiB7XG4gICAgcmV0dXJuIHgubWFwKChyb3cpID0+ICh7XG4gICAgICBwcmFjdGljZTogU3RyaW5nKHJvdy5QcmFjdGljZSksXG4gICAgICBvdXRjb21lOiBTdHJpbmcocm93Lk91dGNvbWUpLFxuICAgICAgcHJvZHVjdDogU3RyaW5nKHJvdy5Qcm9kdWN0KSxcbiAgICAgIC8vIGlzX2NvbWJvOiBwYXJzZUJvb2wocm93W1wiSXMuQ29tYm9cIl0pLFxuICAgICAgb2JzZXJ2YXRpb25zOiBwYXJzZU51bShyb3cuT2JzZXJ2YXRpb25zKSxcbiAgICAgIHN0dWRpZXM6IHBhcnNlTnVtKHJvdy5TdHVkaWVzKSxcbiAgICAgIHZhbHVlOiBwYXJzZU51bShyb3cuVmFsdWUpLFxuICAgICAgc2lnOiBwYXJzZU51bShyb3cuU2lnKSxcbiAgICAgIHZhbHVlX3NlOiBwYXJzZU51bShyb3dbXCJWYWx1ZS5zZVwiXSksXG4gICAgICBjaV9sb3c6IHBhcnNlTnVtKHJvdy5DSWxvdyksXG4gICAgICBjaV9oaWdoOiBwYXJzZU51bShyb3cuQ0loaWdoKSxcbiAgICAgIC8vIHNvdXJjZTogU3RyaW5nKHJvdy5Tb3VyY2UpXG4gICAgfSkpO1xuICB9KTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJjc2FNYW51YWxzID0ge1xuICBjb25zdCBmaWxlID0gRmlsZUF0dGFjaG1lbnQoXCIvZGF0YS9EaXNjb3ZlclNvbHV0aW9ucy9DU0EtTWFudWFsc19TaGVldDEuY3N2XCIpLmNzdigpXG5cbiAgLy8gcGFyc2UgY29sdW1uc1xuICByZXR1cm4gZmlsZS50aGVuKCh4KSA9PiB7XG4gICAgcmV0dXJuIHgubWFwKGQgPT4gKHtcbiAgICAgIHByYWN0aWNlOiBTdHJpbmcoZFsnUHJhY3RpY2UnXSkudHJpbSgpLFxuICAgICAgY291bnRyeV9yZWdpb246IFN0cmluZyhkWydDb3VudHJ5IG9yIFJlZ2lvbiddKS50cmltKCksXG4gICAgICBzeXN0ZW06IFN0cmluZyhkWydTeXN0ZW0nXSkudHJpbSgpLFxuICAgICAgYXV0aG9yOiBTdHJpbmcoZFsnQXV0aG9yJ10pLnRyaW0oKSxcbiAgICAgIHRpdGxlOiBTdHJpbmcoZFsnVGl0bGUnXSkudHJpbSgpLFxuICAgICAgbGluazogU3RyaW5nKGRbJ0xpbmsnXSkudHJpbSgpXG4gICAgfSkpXG4gIH0pXG59XG5cbi8vIHNlbGVjdGlvbnNcbmNzYVJlc291cmNlSHRtbCA9IHtcbiAgY29uc3QgZGF0YSA9IFQudGlkeShcbiAgICBjc2FNYW51YWxzLFxuICAgIFQuZmlsdGVyKChkKSA9PiBkLnByYWN0aWNlID09IHNlbGVjdFJlc291cmNlUHJhY3RpY2UuZmllbGQpLFxuICAgIFQuYXJyYW5nZShbXCJzeXN0ZW1cIiwgXCJ0aXRsZVwiXSlcbiAgKTtcbiAgY29uc3QgdHJhbnNsYXRlU3lzdGVtID0gKGQpID0+IF9sYW5nKHRkLnN1bW1hcnlTeXN0ZW1zLnZhbHVlcz8uW2RdKTtcbiAgY29uc3Qgc3lzdGVtV29yZCA9IExhbmcudG9UaXRsZUNhc2UoX2xhbmcodGQuc3VtbWFyeVN5c3RlbXMpKVxuXG4gIGNvbnN0IGh0bWxMaXN0ID0gZGF0YS5tYXAoKGQpID0+IHtcbiAgICBjb25zdCBzeXN0ZW0gPSB0cmFuc2xhdGVTeXN0ZW0oZC5zeXN0ZW0pO1xuICAgIHJldHVybiBgPGxpIHN0eWxlPSdwYWRkaW5nOiAxMHB4IDAnPiR7c3lzdGVtfTogPGEgaHJlZj0ke2QubGlua30gdGFyZ2V0PSdfYmxhbmsnPiR7ZC50aXRsZX08L2E+PC9saT5gO1xuICB9KTtcblxuICByZXR1cm4gYDxiPiR7c3lzdGVtV29yZH08L2I+XG48dWwgc3R5bGU9J2xpc3Qtc3R5bGUtdHlwZTpub25lOyBwYWRkaW5nOiAwJz4ke2h0bWxMaXN0LmpvaW4oXG4gICAgXCJcIlxuICApfTwvdWw+YDtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkYXRhX21lYW5EaWZmX3ByYWN0aWNlQ3JvcCA9IHtcbiAgY29uc3QgcmF3ID0gd29ya2Jvb2tfbWVhbkRpZmZlcmVuY2Uuc2hlZXQoXCJQcmFjdGljZV9Dcm9wXCIsIHsgaGVhZGVyczogdHJ1ZSB9KTtcbiAgcmV0dXJuIHJhdy5maWx0ZXIoKGQpID0+IHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZCkubGVuZ3RoID4gMFxuICAgICAgJiYgbWVhbkRpZmZDcm9wTGlzdC5pbmNsdWRlcyhkLkNyb3ApXG4gIH0pO1xufVxuXG5kYXRhX21lYW5EaWZmX3ByYWN0aWNlQ3JvcF9uZXcgPSB7XG4gIGNvbnN0IHJhdyA9IGF3YWl0IEZpbGVBdHRhY2htZW50KFwiL2RhdGEvRGlzY292ZXJTb2x1dGlvbnMvZmlndXJlXzJfZGF0YUAxLmNzdlwiKS5jc3Yoe3R5cGVkOiB0cnVlfSlcblxuICByZXR1cm4gcmF3Lm1hcChkID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgUHJhY3RpY2U6IGRbJ1ByYWN0aWNlJ10sXG4gICAgICBDcm9wOiBkWydDcm9wJ10sXG4gICAgICBOX09iczogZFsnTl9PYnMnXSxcbiAgICAgIE5fUHViOiBkW1wiTl9QdWJcIl0sXG4gICAgICBNZWFuX1RyZWF0bWVudDogZFtcIk1lYW5fVFwiXSxcbiAgICAgIE1lYW5fQ29udHJvbDogZFtcIk1lYW5fQ1wiXSxcbiAgICAgIE1lYW5fRGlmZmVyZW5jZTogZFtcIk1lYW5fRGlmZmVyZW5jZVwiXSxcbiAgICAgIFNlOiBkWydTZSddLFxuICAgICAgTG93ZXI6IGRbXCJMb3dlclwiXSxcbiAgICAgIFVwcGVyOiBkW1wiVXBwZXJcIl0sXG4gICAgfVxuICB9KVxufVxuXG4vLyBzaGFyZWQgY29sdW1uIGZvciBtZWFuIGRpZmZlcmVuY2UgZG90IHBsb3RzXG52aWV3b2Ygc2VsZWN0Q3JvcE1lYW5EaWZmID0gSW5wdXRzLnNlbGVjdChtZWFuRGlmZkNyb3BMaXN0LCB7bGFiZWw6IFwiQ3JvcFwiLCB1bmlxdWU6IHRydWUsIHNvcnQ6IHRydWUsIHZhbHVlOiAnTWFpemUnfSlcblxuLy8gbGlzdCBvZiBjcm9wcyB0byBzaG93IGZvciBtZWFuIGRpZmZlcmVuY2UgKHN0dWR5IGN1dG9mZilcbm1lYW5EaWZmQ3JvcExpc3QgPSBbXG4gICdNYWl6ZScsXG4gICdDb3dwZWEnLFxuICAnU29yZ2h1bScsXG4gICdSaWNlJyxcbiAgJ1BlYXJsIE1pbGxldCcsXG4gICdDYXNzYXZhIG9yIFl1Y2EnLFxuICAnQ29tbW9uIEJlYW4nLFxuICAnR3JvdW5kbnV0JyxcbiAgJ1NveWJlYW4nLFxuICAnV2hlYXQnLFxuICAnVG9tYXRvJyxcbiAgJ1BvdGF0bycsXG4gICdZYW0nLFxuICAnQ290dG9uJyxcbiAgJ1N1Z2FyIENhbmUnLFxuICAnT2tyYScsXG4gICdTd2VldCBQb3RhdG8nLFxuICAnVGVmZicsXG4gICdQaWdlb24gUGVhJyxcbiAgJ1Nlc2FtZSBTZWVkJyxcbl1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMzAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkYXRhX21lYW5EaWZmX2FlelByYWN0aWNlQ3JvcF9uZXcgPSB7XG4gIGNvbnN0IHJhdyA9IGF3YWl0IEZpbGVBdHRhY2htZW50KFwiL2RhdGEvRGlzY292ZXJTb2x1dGlvbnMvTWVhbl95aWVsZF9kaWZmZXJlbmNlQDEuY3N2XCIpLmNzdih7dHlwZWQ6IHRydWV9KVxuICBcbiAgY29uc3QgZm9ybWF0dGVkID0gVC50aWR5KFxuICAgIHJhdyxcbiAgICBULmZpbHRlcigoZCkgPT4gT2JqZWN0LmtleXMoZCkubGVuZ3RoID4gMCksXG4gICAgVC5yZW5hbWUoe1xuICAgICAgTWVhbl9UOiAnTWVhbl9UcmVhdG1lbnQnLFxuICAgICAgTWVhbl9DOiAnTWVhbl9Db250cm9sJyxcbiAgICB9KVxuICApXG4gIHJldHVybiBmb3JtYXR0ZWRcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMzEiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkYXRhX2xjbFJpc2sgPSBkYXRhX2V4dGVuZGVkVGFibGUyLmZpbHRlcigoZCkgPT4gZC5vdXRjb21lID09IFwiTENMIFJpc2tcIik7XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTMyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiYWRvcHRpb25GYWN0b3JBbGxMYWJlbCA9IFwiQWxsIHByYWN0aWNlc1wiXG5cbnJhd0Fkb3B0aW9uRmFjdG9ycyA9IHtcbiAgY29uc3QgcmF3ID0gYXdhaXQgRmlsZUF0dGFjaG1lbnQoXCIvZGF0YS9EaXNjb3ZlclNvbHV0aW9ucy9hZG9wdGlvbl9mYWN0b3JzXzIwbWFyMjQuY3N2XCIpLmNzdigpXG5cbiAgcmV0dXJuIHJhdy5tYXAoZCA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGluZGV4OiBkWycnXSxcbiAgICAgIHByYWN0aWNlOiBTdHJpbmcoZFsncHJhY3RpY2VzJ10pLFxuICAgICAgZmFjdG9yOiBTdHJpbmcoZFsnYWRvcHRpb25fZmFjdG9ycyddKSxcbiAgICAgIGRpcmVjdGlvbjogU3RyaW5nKGRbJ2RpcmVjdGlvbiddKSxcbiAgICAgIG46IHBhcnNlTnVtKGQubilcbiAgICB9XG4gIH0pXG59XG5cbmRhdGFBZG9wdGlvbkZhY3RvcnMgPSB7XG4gIGNvbnN0IGFsbFByYWN0aWNlcyA9IFQudGlkeShcbiAgICByYXdBZG9wdGlvbkZhY3RvcnMsXG4gICAgVC5ncm91cEJ5KFxuICAgICAgW1wiZmFjdG9yXCIsIFwiZGlyZWN0aW9uXCJdLFxuICAgICAgW1xuICAgICAgICBULnN1bW1hcml6ZSh7XG4gICAgICAgICAgbjogVC5zdW0oXCJuXCIpXG4gICAgICAgIH0pXG4gICAgICBdXG4gICAgKSxcbiAgICBULmdyb3VwQnkoXG4gICAgICBbXCJmYWN0b3JcIl0sXG4gICAgICBbXG4gICAgICAgIFQubXV0YXRlV2l0aFN1bW1hcnkoe1xuICAgICAgICAgIHRvdGFsOiBULnN1bShcIm5cIilcbiAgICAgICAgfSlcbiAgICAgIF1cbiAgICApLFxuICAgIFQubXV0YXRlKHsgcGVyYzogKGQpID0+IChkLm4gLyBkLnRvdGFsKSAqIDEwMCB9KSxcbiAgICBULm11dGF0ZSh7IHByYWN0aWNlOiAoZCkgPT4gYWRvcHRpb25GYWN0b3JBbGxMYWJlbCB9KSxcbiAgICBULnNlbGVjdChbXCJwcmFjdGljZVwiLCBULmV2ZXJ5dGhpbmcoKV0pXG4gICk7XG5cbiAgY29uc3Qgd3JhbmdsZWQgPSBULnRpZHkoXG4gICAgcmF3QWRvcHRpb25GYWN0b3JzLFxuICAgIFQuc2VsZWN0KFQubmVnYXRlKFwiaW5kZXhcIikpLFxuICAgIFQuZ3JvdXBCeShcbiAgICAgIFtcInByYWN0aWNlXCIsIFwiZmFjdG9yXCJdLFxuICAgICAgW1QubXV0YXRlV2l0aFN1bW1hcnkoeyB0b3RhbDogVC5zdW0oXCJuXCIpIH0pXVxuICAgICksXG4gICAgVC5tdXRhdGUoe1xuICAgICAgcGVyYzogKGQpID0+IChkLm4gLyBkLnRvdGFsKSAqIDEwMFxuICAgIH0pXG4gICk7XG5cbiAgcmV0dXJuIFtcbiAgICAuLi53cmFuZ2xlZCxcbiAgICAuLi5hbGxQcmFjdGljZXNcbiAgXVxufVxuXG4vLyBtYXBwZWQgYWRvcHRpb24gZGF0YVxuZGF0YUFkb3B0aW9uRmFjdG9yc01hcCA9IGQzLmdyb3VwKGRhdGFBZG9wdGlvbkZhY3RvcnMsIGQgPT4gZC5wcmFjdGljZSlcblxuYWRvcHRpb25GYWN0b3JzTG9va3VwID0gKHtcbiAgXCJOb3Qgc2lnbmlmaWNhbnRcIjogX2xhbmcobmJUZXh0LmFkb3B0aW9uRmFjdG9ycy5wbG90LmxhYmVscy5ub3RTaWcpLFxuICBcIk5lZ2F0aXZlXCI6IF9sYW5nKG5iVGV4dC5hZG9wdGlvbkZhY3RvcnMucGxvdC5sYWJlbHMubmVnKSxcbiAgXCJQb3NpdGl2ZVwiOiBfbGFuZyhuYlRleHQuYWRvcHRpb25GYWN0b3JzLnBsb3QubGFiZWxzLnBvcyksXG59KVxuXG5mdW5jdGlvbiBtYXJrQm9sZFNpZGViYXJUZXh0KGRhdGEsIHt0ZXh0Rm9ybWF0PShkKSA9PiBkICsgJyBvYnMuJywgLi4ub3B0aW9ucyB9ID0ge30pIHtcbiAgcmV0dXJuIFBsb3QubWFya3MoXG4gICAgLy8gb2JzZXJ2YXRpb24gY291bnRzXG4gICAgUGxvdC50ZXh0WShcbiAgICAgIGRhdGEsXG4gICAgICBQbG90Lm1hcChcbiAgICAgICAgeyB0ZXh0OiAodmFsdWVzKSA9PiB2YWx1ZXMubWFwKChkKSA9PiB0ZXh0Rm9ybWF0KGQpKSB9LFxuICAgICAgICBQbG90Lmdyb3VwWShcbiAgICAgICAgICB7IHRleHQ6IFwic3VtXCIgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmcmFtZUFuY2hvcjogXCJyaWdodFwiLFxuICAgICAgICAgICAgdGV4dEFuY2hvcjogXCJzdGFydFwiLFxuICAgICAgICAgICAgZHg6IDE2LFxuICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgKVxuICAgICksXG4gICAgLy8gZGlnaXRhbCB3aGl0ZS1vdXRcbiAgICBQbG90LnRleHRZKFxuICAgICAgZGF0YSxcbiAgICAgIFBsb3QucG9pbnRlclkoXG4gICAgICAgIFBsb3QubWFwKFxuICAgICAgICAgIHsgdGV4dDogKHZhbHVlcykgPT4gdmFsdWVzLm1hcCgoZCkgPT4gdGV4dEZvcm1hdChkKSkgfSxcbiAgICAgICAgICBQbG90Lmdyb3VwWShcbiAgICAgICAgICAgIHsgdGV4dDogXCJzdW1cIiB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyB5OiBcImZhY3RvclwiLFxuICAgICAgICAgICAgICAvLyB0ZXh0OiBcIm5cIixcbiAgICAgICAgICAgICAgZnJhbWVBbmNob3I6IFwicmlnaHRcIixcbiAgICAgICAgICAgICAgdGV4dEFuY2hvcjogXCJzdGFydFwiLFxuICAgICAgICAgICAgICBkeDogMTYsXG4gICAgICAgICAgICAgIGZpbGw6IFwid2hpdGVcIixcbiAgICAgICAgICAgICAgc3Ryb2tlOiBcIndoaXRlXCIsXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyLFxuICAgICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKSxcbiAgICAvLyBvYnNlcnZhdGlvbiBjb3VudHMgYm9sZCBob3ZlclxuICAgIFBsb3QudGV4dFkoXG4gICAgICBkYXRhLFxuICAgICAgUGxvdC5wb2ludGVyWShcbiAgICAgICAgUGxvdC5tYXAoXG4gICAgICAgICAgeyB0ZXh0OiAodmFsdWVzKSA9PiB2YWx1ZXMubWFwKChkKSA9PiB0ZXh0Rm9ybWF0KGQpKSB9LFxuICAgICAgICAgIFBsb3QuZ3JvdXBZKFxuICAgICAgICAgICAgeyB0ZXh0OiBcInN1bVwiIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIHk6IFwiZmFjdG9yXCIsXG4gICAgICAgICAgICAgIC8vIHRleHQ6IFwiblwiLFxuICAgICAgICAgICAgICBmcmFtZUFuY2hvcjogXCJyaWdodFwiLFxuICAgICAgICAgICAgICB0ZXh0QW5jaG9yOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgIGR4OiAxNixcbiAgICAgICAgICAgICAgZm9udFdlaWdodDogXCJib2xkXCIsXG4gICAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gICk7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTMzIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaW1wb3J0IHsgVCB9IGZyb20gXCJAcGJlc2hhaS90aWR5anNcIjtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgncHJldHR5TGFuZ3VhZ2VWaWV3JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3NlbGVjdENyb3BNZWFuRGlmZl9uZXcnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgncmFkaW9Tb3J0RG90UGxvdENyb3BfbmV3JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3RvZ2dsZUNJc0Nyb3BfbmV3JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3NlbGVjdENyb3BNZWFuRGlmZkFFWicpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdyYWRpb1NvcnREb3RQbG90Q3JvcEFFWl9uZXcnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnYWV6U2VsZWN0X25ldycpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCd0b2dnbGVDSXNDcm9wQUVaX25ldycpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdzZWxlY3RQcmFjdGljZScpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdkYXRhQWRvcHRpb25GYWN0b3JzX3NlbGVjdCcpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdyYWRpb1NvcnRBZG9wdGlvbkZhY3RvcnMnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnc2VsZWN0UmVzb3VyY2VQcmFjdGljZScpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdsYW5ndWFnZScpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdzZWxlY3RDcm9wTWVhbkRpZmYnKSJ9XX0=</script><script type="module">"file:"===window.location.protocol&&alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."),window._ojs.paths.runtimeToDoc="../../notebooks/solutions",window._ojs.paths.runtimeToRoot="../..",window._ojs.paths.docToRoot="../..",window._ojs.selfContained=!1,window._ojs.runtime.interpretFromScriptTags()</script><script id="quarto-html-after-body" type="application/javascript">window.document.addEventListener("DOMContentLoaded",function(t){const e=t=>{for(const e of t.classList)if(e.startsWith("code-annotation-"))return!0;return!1},n=function(t){const e=t.trigger;e.blur(),e.classList.add("code-copy-button-checked");var n=e.getAttribute("title");let o;e.setAttribute("title","Copied!"),window.bootstrap&&(e.setAttribute("data-bs-toggle","tooltip"),e.setAttribute("data-bs-placement","left"),e.setAttribute("data-bs-title","Copied!"),o=new bootstrap.Tooltip(e,{trigger:"manual",customClass:"code-copy-button-tooltip",offset:[0,-8]}),o.show()),setTimeout(function(){o&&(o.hide(),e.removeAttribute("data-bs-title"),e.removeAttribute("data-bs-toggle"),e.removeAttribute("data-bs-placement")),e.setAttribute("title",n),e.classList.remove("code-copy-button-checked")},1e3),t.clearSelection()},o=function(t){const n=t.parentElement.cloneNode(!0).querySelector("code");for(const t of n.children)e(t)&&t.remove();return n.innerText};if(new window.ClipboardJS(".code-copy-button:not([data-in-quarto-modal])",{text:o}).on("success",n),window.document.getElementById("quarto-embedded-source-code-modal")){new window.ClipboardJS(".code-copy-button[data-in-quarto-modal]",{text:o,container:window.document.getElementById("quarto-embedded-source-code-modal")}).on("success",n)}for(var i=new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//),a=new RegExp(/^mailto:/),l=new RegExp("https://adaptationatlas.github.io/atlas_notebooks/"),r=t=>l.test(t)||i.test(t)||a.test(t),d=window.document.querySelectorAll("a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)"),c=0;c<d.length;c++){const t=d[c];r(t.href)||void 0!==t.dataset.originalHref&&(t.href=t.dataset.originalHref)}function s(t,e,n,o){const i={allowHTML:!0,maxWidth:500,delay:100,arrow:!1,appendTo:function(t){return t.parentElement},interactive:!0,interactiveBorder:10,theme:"quarto",placement:"bottom-start"};e&&(i.content=e),n&&(i.onTrigger=n),o&&(i.onUntrigger=o),window.tippy(t,i)}const u=window.document.querySelectorAll('a[role="doc-noteref"]');for(c=0;c<u.length;c++){const t=u[c];s(t,function(){let e=t.getAttribute("data-footnote-href")||t.getAttribute("href");try{e=new URL(e).hash}catch{}const n=e.replace(/^#\/?/,""),o=window.document.getElementById(n);return o?o.innerHTML:""})}const h=window.document.querySelectorAll("a.quarto-xref"),m=(t,e)=>{const n=t=>{if(t.classList.remove("page-full","page-columns"),t.children)for(const e of t.children)n(e)};if(n(e),null===t||t.startsWith("sec-")){const t=document.createElement("div");if(e.children&&e.children.length>2){t.appendChild(e.children[0].cloneNode(!0));for(let n=1;n<e.children.length;n++){const o=e.children[n];if("P"!==o.tagName||""!==o.innerText){t.appendChild(o.cloneNode(!0));break}}return window.Quarto?.typesetMath&&window.Quarto.typesetMath(t),t.innerHTML}return window.Quarto?.typesetMath&&window.Quarto.typesetMath(e),e.innerHTML}{const t=e.querySelector("a.anchorjs-link");return t&&t.remove(),window.Quarto?.typesetMath&&window.Quarto.typesetMath(e),e.classList.contains("callout")?e.outerHTML:e.innerHTML}};for(c=0;c<h.length;c++){const t=h[c];s(t,void 0,function(e){e.disable();let n,o=t.getAttribute("href");if(o.startsWith("#"))n=o;else try{n=new URL(o).hash}catch{}if(n){const t=n.replace(/^#\/?/,""),i=window.document.getElementById(t);if(null!==i)try{const n=m(t,i.cloneNode(!0));e.setContent(n)}finally{e.enable(),e.show()}else fetch(o.split("#")[0]).then(t=>t.text()).then(n=>{const o=(new DOMParser).parseFromString(n,"text/html").getElementById(t);if(null!==o){const n=m(t,o);e.setContent(n)}}).finally(()=>{e.enable(),e.show()})}else fetch(o).then(t=>t.text()).then(t=>{const n=(new DOMParser).parseFromString(t,"text/html").querySelector("main.content");if(null!==n){n.children.length>0&&"HEADER"===n.children[0].tagName&&n.children[0].remove();const t=m(null,n);e.setContent(t)}}).finally(()=>{e.enable(),e.show()})},function(t){})}let w;const g=t=>{window.document;const e=t.getAttribute("data-target-cell"),n=t.getAttribute("data-target-annotation");const o=window.document.querySelector('span[data-code-cell="'+e+'"][data-code-annotation="'+n+'"]').getAttribute("data-code-lines").split(",").map(t=>e+"-"+t);let i=null,a=null,l=null;if(o.length>0){const n=window.document.getElementById(o[0]);if(i=n.offsetTop,a=n.offsetHeight,l=n.parentElement.parentElement,o.length>1){const t=window.document.getElementById(o[o.length-1]);a=t.offsetTop+t.offsetHeight-i}if(null!==i&&null!==a&&null!==l){let t=window.document.getElementById("code-annotation-line-highlight");null===t&&(t=window.document.createElement("div"),t.setAttribute("id","code-annotation-line-highlight"),t.style.position="absolute",l.appendChild(t)),t.style.top=i-2+"px",t.style.height=a+4+"px",t.style.left=0;let n=window.document.getElementById("code-annotation-line-highlight-gutter");if(null===n){n=window.document.createElement("div"),n.setAttribute("id","code-annotation-line-highlight-gutter"),n.style.position="absolute";window.document.getElementById(e).querySelector(".code-annotation-gutter").appendChild(n)}n.style.top=i-2+"px",n.style.height=a+4+"px"}w=t}},p=()=>{["code-annotation-line-highlight","code-annotation-line-highlight-gutter"].forEach(t=>{const e=window.document.getElementById(t);e&&e.remove()}),w=void 0};window.addEventListener("resize",function(t,e){let n,o=!1;return(...i)=>{o?(n&&clearTimeout(n),n=setTimeout(()=>{t.apply(this,i),n=o=!1},e)):(t.apply(this,i),o=!0)}}(()=>{elRect=void 0,w&&g(w)},10));const f=window.document.querySelectorAll("dt[data-target-cell]");for(const t of f)t.addEventListener("click",t=>{const e=t.target;if(e!==w){p();const t=window.document.querySelector("dt[data-target-cell].code-annotation-active");t&&t.classList.remove("code-annotation-active"),g(e),e.classList.add("code-annotation-active")}else p(),e.classList.remove("code-annotation-active")});const b=t=>{const e=t.parentElement;if(e){const n=e.dataset.cites;return n?{el:t,cites:n.split(" ")}:b(t.parentElement)}};var y=window.document.querySelectorAll('a[role="doc-biblioref"]');for(c=0;c<y.length;c++){const t=y[c],e=b(t);e&&s(e.el,function(){var t=window.document.createElement("div");return e.cites.forEach(function(e){var n=window.document.createElement("div");n.classList.add("hanging-indent"),n.classList.add("csl-entry");var o=window.document.getElementById("ref-"+e);o&&(n.innerHTML=o.innerHTML),t.appendChild(n)}),t.innerHTML})}})</script></div></body></html>