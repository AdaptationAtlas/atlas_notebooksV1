<!doctype html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta charset="utf-8"><meta name="generator" content="quarto-1.8.26"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes"><title>translation</title><style>code{white-space:pre-wrap}span.smallcaps{font-variant:small-caps}div.columns{display:flex;gap:min(4vw,1.5em)}div.column{flex:auto;overflow-x:auto}div.hanging-indent{margin-left:1.5em;text-indent:-1.5em}ul.task-list{list-style:none}ul.task-list li input[type=checkbox]{width:.8em;margin:0 .8em .2em -1em;vertical-align:middle}html{-webkit-text-size-adjust:100%}pre>code.sourceCode{white-space:pre;position:relative}pre>code.sourceCode>span{display:inline-block;line-height:1.25}pre>code.sourceCode>span:empty{height:1.2em}.sourceCode{overflow:visible}code.sourceCode>span{color:inherit;text-decoration:inherit}div.sourceCode{margin:1em 0}pre.sourceCode{margin:0}@media screen{div.sourceCode{overflow:auto}}@media print{pre>code.sourceCode{white-space:pre-wrap}pre>code.sourceCode>span{text-indent:-5em;padding-left:5em}}pre.numberSource code{counter-reset:source-line 0}pre.numberSource code>span{position:relative;left:-4em;counter-increment:source-line}pre.numberSource code>span>a:first-child::before{content:counter(source-line);position:relative;left:-1em;text-align:right;vertical-align:baseline;border:none;display:inline-block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 4px;width:4em}pre.numberSource{margin-left:3em;padding-left:4px}@media screen{pre>code.sourceCode>span>a:first-child::before{text-decoration:underline}}</style><script src="../site_libs/quarto-nav/quarto-nav.js"></script><script src="../site_libs/quarto-nav/headroom.min.js"></script><link href="../images/atlas-icon.svg" rel="icon" type="image/svg+xml"><script src="../site_libs/clipboard/clipboard.min.js"></script><script src="../site_libs/quarto-html/quarto.js" type="module"></script><script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script><script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script><script src="../site_libs/quarto-html/popper.min.js"></script><script src="../site_libs/quarto-html/tippy.umd.min.js"></script><link href="../site_libs/quarto-html/tippy.css" rel="stylesheet"><link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><script src="../site_libs/bootstrap/bootstrap.min.js"></script><link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet"><link href="../site_libs/bootstrap/bootstrap-730ea3c3007e3756c9d7af36786c00c3.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&amp;display=swap" rel="stylesheet"><script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script><link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet"><link rel="stylesheet" href="../styles.css"></head><body class="nav-fixed fullcontent quarto-light"><div id="quarto-search-results"></div><header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg" data-bs-theme="dark"><div class="navbar-container container-fluid"><div class="navbar-brand-container mx-auto"><a href="https://adaptationatlas.cgiar.org" class="navbar-brand navbar-brand-logo"><img src="../images/atlas-logo.svg" alt="The Africa Agriculture Adaptation Atlas" class="navbar-logo light-content"> <img src="../images/atlas-logo.svg" alt="The Africa Agriculture Adaptation Atlas" class="navbar-logo dark-content"></a></div><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="window.quartoToggleHeadroom&&window.quartoToggleHeadroom()"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarCollapse"><ul class="navbar-nav navbar-nav-scroll ms-auto"><li class="nav-item"><a class="nav-link" href="../docs/doc_index.html"><i class="bi bi-info-circle" role="img" aria-label="More Information"></i> <span class="menu-text">Documentation</span></a></li><li class="nav-item"><a class="nav-link" href="https://github.com/AdaptationAtlas/atlas_notebooks/issues/new"><span class="menu-text">Report an Issue</span></a></li><li class="nav-item compact"><a class="nav-link" href="https://github.com/AdaptationAtlas/atlas_notebooks"><i class="bi bi-github" role="img" aria-label="GitHub"></i> <span class="menu-text"></span></a></li></ul></div><div class="quarto-navbar-tools"></div></div></nav></header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar"><main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header><section id="lang-module-guide" class="level1"><h1>Lang Module Guide</h1><p><em>Author: Zach Bogart, Brayden Youngberg</em><br><em>Version: 2.0.1</em></p><section id="overview" class="level2"><h2 data-anchor-id="overview">Overview</h2><p>The <code>Lang</code> module provides a set of helper functions to manage translations, template insertions, and string formatting in JavaScript notebooks and apps. It is especially useful for multi-language support and dynamic text replacement.</p><hr></section><section id="installation-defining-languages" class="level2"><h2 data-anchor-id="installation-defining-languages">Installation &amp; Defining Languages</h2><p>Define available languages with keys, labels, and locales:</p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" data-startfrom="23" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 22"><span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { lang <span class="im">as</span> Lang } <span class="im">from</span> <span class="st">"/helpers/lang.js"</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co">// or if running into errors due to cells running before the import: </span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co">// const lang = await import("/helpers/lang.js");</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co">// or if only needing the main lg function:</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co">// import { lg } from "/helpers/lang.js"</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>languages <span class="op">=</span> [</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">key</span><span class="op">:</span> <span class="st">"en"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"English"</span><span class="op">,</span> <span class="dt">locale</span><span class="op">:</span> <span class="st">"en-US"</span> }<span class="op">,</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">key</span><span class="op">:</span> <span class="st">"fr"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Français"</span><span class="op">,</span> <span class="dt">locale</span><span class="op">:</span> <span class="st">"fr-FR"</span> }</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-1-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-1-2" data-nodetype="declaration"></div></div></div></div></section><section id="setting-up-translation-json" class="level2"><h2 data-anchor-id="setting-up-translation-json">Setting Up Translation JSON</h2><p>Structure your translations as a nested object or external JSON, with language keys for each field:</p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" data-startfrom="39" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 38"><span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>nbText <span class="op">=</span> <span class="kw">new</span> <span class="bu">Object</span>({</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"hello"</span><span class="op">:</span> {</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">"en"</span><span class="op">:</span> <span class="st">"hello"</span><span class="op">,</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">"fr"</span><span class="op">:</span> <span class="st">"Bonjour"</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">"error"</span><span class="op">:</span> {</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">"en"</span><span class="op">:</span> <span class="st">"Whoops"</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"insert"</span><span class="op">:</span> {</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="st">"small"</span><span class="op">:</span> {</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>      <span class="st">"en"</span><span class="op">:</span> <span class="st">"This is an insertion example: :::field:::"</span><span class="op">,</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>      <span class="st">"fr"</span><span class="op">:</span> <span class="st">"Ceci est un exemple d'insertion: :::field:::"</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    <span class="st">"big"</span><span class="op">:</span> {</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">"en"</span><span class="op">:</span> <span class="st">"This is an insertion example: :::field::: :::name:::"</span><span class="op">,</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>      <span class="st">"fr"</span><span class="op">:</span> <span class="st">"Ceci est un exemple d'insertion: :::field::: :::name:::"</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-2" data-nodetype="declaration"></div></div></div></section><section id="language-toggle-ui-observable-example" class="level2"><h2 data-anchor-id="language-toggle-ui-observable-example">Language Toggle UI (Observable Example)</h2><p>Create a master toggle to pick the language key (Observable Inputs):</p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" data-startfrom="65" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 64"><span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>viewof language <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>(languages<span class="op">,</span> {</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Main language toggle"</span><span class="op">,</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>  <span class="dt">format</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">key</span><span class="op">,</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> languages<span class="op">.</span><span class="fu">find</span>((x) <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">key</span> <span class="op">===</span> defaultLangKey)<span class="op">,</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-3" data-nodetype="declaration"></div></div></div><p>A “pretty” toggle with label that changes based on the language:</p><ul><li>NOTE: it is required to do this in a new Input, as there would be a circular definition otherwise</li></ul><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" data-startfrom="77" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 76"><span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>viewof prettyLanguageView <span class="op">=</span> {</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">bind</span>(</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">radio</span>(languages<span class="op">,</span> {</span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> Lang<span class="op">.</span><span class="fu">getText</span>({<span class="dt">en</span><span class="op">:</span> <span class="st">"Language"</span><span class="op">,</span> <span class="dt">fr</span><span class="op">:</span> <span class="st">"Langue"</span>}<span class="op">,</span> { <span class="dt">key</span><span class="op">:</span> language<span class="op">.</span><span class="at">key</span> })<span class="op">,</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>      <span class="dt">format</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">label</span></span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>    viewof language</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-4" data-nodetype="declaration"></div></div></div></section><section id="retrieving-translations" class="level2"><h2 data-anchor-id="retrieving-translations">Retrieving Translations</h2><p>Get a translation for the current language:</p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" data-startfrom="94" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 93"><span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>Lang<span class="op">.</span><span class="fu">getText</span>(nbText<span class="op">.</span><span class="at">hello</span><span class="op">,</span> { <span class="dt">key</span><span class="op">:</span> language<span class="op">.</span><span class="at">key</span> })<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-5" data-nodetype="expression"></div></div></div><section id="shorthand-helper" class="level3"><h3 data-anchor-id="shorthand-helper">Shorthand Helper</h3><p>To avoid repeating the language key, use <code>lg</code>:</p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" data-startfrom="103" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 102"><span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a>_lang <span class="op">=</span> Lang<span class="op">.</span><span class="fu">lg</span>(language<span class="op">.</span><span class="at">key</span>)<span class="op">;</span></span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a><span class="fu">_lang</span>(nbText<span class="op">.</span><span class="at">hello</span>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-6-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-6-2" data-nodetype="expression"></div></div></div></div></section></section><section id="template-insertion" class="level2"><h2 data-anchor-id="template-insertion">Template Insertion</h2><p>Replace placeholders in template strings with dynamic values.</p><section id="example-single-insertion" class="level3"><h3 data-anchor-id="example-single-insertion">Example: Single Insertion</h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" data-startfrom="114" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 113"><span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> template <span class="op">=</span> Lang<span class="op">.</span><span class="fu">getText</span>(nbText<span class="op">.</span><span class="at">insert</span><span class="op">.</span><span class="at">small</span><span class="op">,</span> { <span class="dt">key</span><span class="op">:</span> language<span class="op">.</span><span class="at">key</span> })<span class="op">;</span></span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> items <span class="op">=</span> [{ <span class="dt">name</span><span class="op">:</span> <span class="st">"field"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"hello world!"</span> }]<span class="op">;</span></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Lang<span class="op">.</span><span class="fu">reduceReplaceTemplateItems</span>(template<span class="op">,</span> items)<span class="op">;</span></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-7" data-nodetype="expression"></div></div></div></section><section id="example-multiple-insertions" class="level3"><h3 data-anchor-id="example-multiple-insertions">Example: Multiple Insertions</h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" data-startfrom="125" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 124"><span id="cb8-125"><a href="#cb8-125" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb8-126"><a href="#cb8-126" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> template <span class="op">=</span> Lang<span class="op">.</span><span class="fu">getText</span>(nbText<span class="op">.</span><span class="at">insert</span><span class="op">.</span><span class="at">big</span><span class="op">,</span> { <span class="dt">key</span><span class="op">:</span> language<span class="op">.</span><span class="at">key</span> })<span class="op">;</span></span>
<span id="cb8-127"><a href="#cb8-127" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> greeting <span class="op">=</span> Lang<span class="op">.</span><span class="fu">getText</span>(nbText<span class="op">.</span><span class="at">hello</span><span class="op">,</span> { <span class="dt">key</span><span class="op">:</span> language<span class="op">.</span><span class="at">key</span> })<span class="op">;</span></span>
<span id="cb8-128"><a href="#cb8-128" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> items <span class="op">=</span> [</span>
<span id="cb8-129"><a href="#cb8-129" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">name</span><span class="op">:</span> <span class="st">"field"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> greeting }<span class="op">,</span></span>
<span id="cb8-130"><a href="#cb8-130" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">name</span><span class="op">:</span> <span class="st">"name"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"Alice"</span> }</span>
<span id="cb8-131"><a href="#cb8-131" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb8-132"><a href="#cb8-132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Lang<span class="op">.</span><span class="fu">reduceReplaceTemplateItems</span>(template<span class="op">,</span> items)<span class="op">;</span></span>
<span id="cb8-133"><a href="#cb8-133" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-8" data-nodetype="expression"></div></div></div></section><section id="custom-placeholder-delimiters" class="level3"><h3 data-anchor-id="custom-placeholder-delimiters">Custom Placeholder Delimiters</h3><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" data-startfrom="140" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 139"><span id="cb9-140"><a href="#cb9-140" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb9-141"><a href="#cb9-141" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> customTemplate <span class="op">=</span> <span class="st">"This is a test: &gt;field&lt;"</span><span class="op">;</span></span>
<span id="cb9-142"><a href="#cb9-142" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> result <span class="op">=</span> Lang<span class="op">.</span><span class="fu">reduceReplaceTemplateItems</span>(</span>
<span id="cb9-143"><a href="#cb9-143" aria-hidden="true" tabindex="-1"></a>        customTemplate<span class="op">,</span></span>
<span id="cb9-144"><a href="#cb9-144" aria-hidden="true" tabindex="-1"></a>        [{ <span class="dt">name</span><span class="op">:</span> <span class="st">"field"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"hello world!"</span> }]<span class="op">,</span></span>
<span id="cb9-145"><a href="#cb9-145" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">start</span><span class="op">:</span> <span class="st">"&gt;"</span><span class="op">,</span> <span class="dt">end</span><span class="op">:</span> <span class="st">"&lt;"</span> }</span>
<span id="cb9-146"><a href="#cb9-146" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb9-147"><a href="#cb9-147" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb9-148"><a href="#cb9-148" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-9" data-nodetype="expression"></div></div></div></section></section><section id="checking-for-missing-translations" class="level2"><h2 data-anchor-id="checking-for-missing-translations">Checking for Missing Translations</h2><p>Find missing language keys in your text object:</p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10" data-startfrom="156" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 155"><span id="cb10-156"><a href="#cb10-156" aria-hidden="true" tabindex="-1"></a>Lang<span class="op">.</span><span class="fu">listLeavesMissingObjectKeys</span>(nbText<span class="op">,</span> [<span class="st">"en"</span><span class="op">,</span> <span class="st">"fr"</span>])<span class="op">;</span></span>
<span id="cb10-157"><a href="#cb10-157" aria-hidden="true" tabindex="-1"></a><span class="co">// Returns an array of paths to missing translations</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div id="ojs-cell-10" data-nodetype="expression"></div></div></div></section><section id="string-formatting-helpers" class="level2"><h2 data-anchor-id="string-formatting-helpers">String Formatting Helpers</h2><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11" data-startfrom="165" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 164"><span id="cb11-165"><a href="#cb11-165" aria-hidden="true" tabindex="-1"></a>Lang<span class="op">.</span><span class="fu">toTitleCase</span>(<span class="st">"welcome to my home"</span>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-11-1" data-nodetype="expression"></div></div></div><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12" data-startfrom="166" data-source-offset="-67"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 165"><span id="cb12-166"><a href="#cb12-166" aria-hidden="true" tabindex="-1"></a>Lang<span class="op">.</span><span class="fu">toSentenceCase</span>(<span class="st">"welcome to my home"</span>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-11-2" data-nodetype="expression"></div></div></div></div><hr></section><section id="advanced-default-language-from-url" class="level2"><h2 data-anchor-id="advanced-default-language-from-url">Advanced: Default Language from URL</h2><p>Set the default language using a URL parameter (<code>?lang=fr</code>):</p><div class="cell"><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13" data-startfrom="178" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset:source-line 177"><span id="cb13-178"><a href="#cb13-178" aria-hidden="true" tabindex="-1"></a>queryLanguage <span class="op">=</span> <span class="cf">await</span> Lang<span class="op">.</span><span class="fu">getParamFromList</span>({</span>
<span id="cb13-179"><a href="#cb13-179" aria-hidden="true" tabindex="-1"></a>  <span class="dt">name</span><span class="op">:</span> <span class="st">"lang"</span><span class="op">,</span></span>
<span id="cb13-180"><a href="#cb13-180" aria-hidden="true" tabindex="-1"></a>  <span class="dt">list</span><span class="op">:</span> languages<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">key</span>)</span>
<span id="cb13-181"><a href="#cb13-181" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb13-182"><a href="#cb13-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-183"><a href="#cb13-183" aria-hidden="true" tabindex="-1"></a>defaultLangKey <span class="op">=</span> queryLanguage <span class="op">??</span> <span class="st">"en"</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-12-1" data-nodetype="declaration"></div></div></div><div class="cell-output cell-output-display"><div><div id="ojs-cell-12-2" data-nodetype="declaration"></div></div></div></div><hr></section><section id="api-reference" class="level2"><h2 data-anchor-id="api-reference">API Reference</h2><table class="caption-top table"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead><tr class="header"><th style="text-align:left">Function</th><th style="text-align:left">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align:left"><code>lg(defaultKey)</code></td><td style="text-align:left">Returns a function to fetch text for a default language key.</td></tr><tr class="even"><td style="text-align:left"><code>getText(textObj, { key })</code></td><td style="text-align:left">Gets text for the specified language key.</td></tr><tr class="odd"><td style="text-align:left"><code>getRegexForNamedInsertion(item, opts)</code></td><td style="text-align:left">Returns regex to match placeholders (default: <code>:::item:::</code>).</td></tr><tr class="even"><td style="text-align:left"><code>reduceReplaceTemplateItems(...)</code></td><td style="text-align:left">Replaces all placeholders in a template with provided values.</td></tr><tr class="odd"><td style="text-align:left"><code>listLeavesMissingObjectKeys(obj, keys)</code></td><td style="text-align:left">Lists object leaves missing specified keys.</td></tr><tr class="even"><td style="text-align:left"><code>getParamFromList({ name, list, ... })</code></td><td style="text-align:left">Returns query parameter value if it exists in a provided list.</td></tr><tr class="odd"><td style="text-align:left"><code>toTitleCase(str)</code></td><td style="text-align:left">Converts a string to title case.</td></tr><tr class="even"><td style="text-align:left"><code>toSentenceCase(str)</code></td><td style="text-align:left">Converts a string to sentence case.</td></tr></tbody></table><hr><p><strong>Links:</strong> <a href="https://observablehq.com/d/7d46679f7d0d917e?lang=fr">Observable Notebook Example</a></p><p><em>Happy translating!</em></p></section></section></main><script type="ojs-module-contents">eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImltcG9ydCB7IGxhbmcgYXMgTGFuZyB9IGZyb20gXCIvaGVscGVycy9sYW5nLmpzXCJcbi8vIG9yIGlmIHJ1bm5pbmcgaW50byBlcnJvcnMgZHVlIHRvIGNlbGxzIHJ1bm5pbmcgYmVmb3JlIHRoZSBpbXBvcnQ6IFxuLy8gY29uc3QgbGFuZyA9IGF3YWl0IGltcG9ydChcIi9oZWxwZXJzL2xhbmcuanNcIik7XG4vLyBvciBpZiBvbmx5IG5lZWRpbmcgdGhlIG1haW4gbGcgZnVuY3Rpb246XG4vLyBpbXBvcnQgeyBsZyB9IGZyb20gXCIvaGVscGVycy9sYW5nLmpzXCJcblxubGFuZ3VhZ2VzID0gW1xuICB7IGtleTogXCJlblwiLCBsYWJlbDogXCJFbmdsaXNoXCIsIGxvY2FsZTogXCJlbi1VU1wiIH0sXG4gIHsga2V5OiBcImZyXCIsIGxhYmVsOiBcIkZyYW7Dp2Fpc1wiLCBsb2NhbGU6IFwiZnItRlJcIiB9XG5dO1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibmJUZXh0ID0gbmV3IE9iamVjdCh7XG4gIFwiaGVsbG9cIjoge1xuICAgIFwiZW5cIjogXCJoZWxsb1wiLFxuICAgIFwiZnJcIjogXCJCb25qb3VyXCJcbiAgfSxcbiAgXCJlcnJvclwiOiB7XG4gICAgXCJlblwiOiBcIldob29wc1wiXG4gIH0sXG4gIFwiaW5zZXJ0XCI6IHtcbiAgICBcInNtYWxsXCI6IHtcbiAgICAgIFwiZW5cIjogXCJUaGlzIGlzIGFuIGluc2VydGlvbiBleGFtcGxlOiA6OjpmaWVsZDo6OlwiLFxuICAgICAgXCJmclwiOiBcIkNlY2kgZXN0IHVuIGV4ZW1wbGUgZCdpbnNlcnRpb246IDo6OmZpZWxkOjo6XCJcbiAgICB9LFxuICAgIFwiYmlnXCI6IHtcbiAgICAgIFwiZW5cIjogXCJUaGlzIGlzIGFuIGluc2VydGlvbiBleGFtcGxlOiA6OjpmaWVsZDo6OiA6OjpuYW1lOjo6XCIsXG4gICAgICBcImZyXCI6IFwiQ2VjaSBlc3QgdW4gZXhlbXBsZSBkJ2luc2VydGlvbjogOjo6ZmllbGQ6OjogOjo6bmFtZTo6OlwiXG4gICAgfVxuICB9XG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIGxhbmd1YWdlID0gSW5wdXRzLnJhZGlvKGxhbmd1YWdlcywge1xuICBsYWJlbDogXCJNYWluIGxhbmd1YWdlIHRvZ2dsZVwiLFxuICBmb3JtYXQ6IChkKSA9PiBkLmtleSxcbiAgdmFsdWU6IGxhbmd1YWdlcy5maW5kKCh4KSA9PiB4LmtleSA9PT0gZGVmYXVsdExhbmdLZXkpLFxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBwcmV0dHlMYW5ndWFnZVZpZXcgPSB7XG4gIHJldHVybiBJbnB1dHMuYmluZChcbiAgICBJbnB1dHMucmFkaW8obGFuZ3VhZ2VzLCB7XG4gICAgICBsYWJlbDogTGFuZy5nZXRUZXh0KHtlbjogXCJMYW5ndWFnZVwiLCBmcjogXCJMYW5ndWVcIn0sIHsga2V5OiBsYW5ndWFnZS5rZXkgfSksXG4gICAgICBmb3JtYXQ6IChkKSA9PiBkLmxhYmVsXG4gICAgfSksXG4gICAgdmlld29mIGxhbmd1YWdlXG4gICk7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJMYW5nLmdldFRleHQobmJUZXh0LmhlbGxvLCB7IGtleTogbGFuZ3VhZ2Uua2V5IH0pO1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC02IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiX2xhbmcgPSBMYW5nLmxnKGxhbmd1YWdlLmtleSk7XG5fbGFuZyhuYlRleHQuaGVsbG8pOyAvLyBcImhlbGxvXCIgb3IgXCJCb25qb3VyXCJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IExhbmcuZ2V0VGV4dChuYlRleHQuaW5zZXJ0LnNtYWxsLCB7IGtleTogbGFuZ3VhZ2Uua2V5IH0pO1xuICAgIGNvbnN0IGl0ZW1zID0gW3sgbmFtZTogXCJmaWVsZFwiLCB2YWx1ZTogXCJoZWxsbyB3b3JsZCFcIiB9XTtcbiAgICByZXR1cm4gTGFuZy5yZWR1Y2VSZXBsYWNlVGVtcGxhdGVJdGVtcyh0ZW1wbGF0ZSwgaXRlbXMpO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC04IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xuICAgIGNvbnN0IHRlbXBsYXRlID0gTGFuZy5nZXRUZXh0KG5iVGV4dC5pbnNlcnQuYmlnLCB7IGtleTogbGFuZ3VhZ2Uua2V5IH0pO1xuICAgIGNvbnN0IGdyZWV0aW5nID0gTGFuZy5nZXRUZXh0KG5iVGV4dC5oZWxsbywgeyBrZXk6IGxhbmd1YWdlLmtleSB9KTtcbiAgICBjb25zdCBpdGVtcyA9IFtcbiAgICB7IG5hbWU6IFwiZmllbGRcIiwgdmFsdWU6IGdyZWV0aW5nIH0sXG4gICAgeyBuYW1lOiBcIm5hbWVcIiwgdmFsdWU6IFwiQWxpY2VcIiB9XG4gICAgXTtcbiAgICByZXR1cm4gTGFuZy5yZWR1Y2VSZXBsYWNlVGVtcGxhdGVJdGVtcyh0ZW1wbGF0ZSwgaXRlbXMpO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC05IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xuICAgIGNvbnN0IGN1c3RvbVRlbXBsYXRlID0gXCJUaGlzIGlzIGEgdGVzdDogPmZpZWxkPFwiO1xuICAgIGNvbnN0IHJlc3VsdCA9IExhbmcucmVkdWNlUmVwbGFjZVRlbXBsYXRlSXRlbXMoXG4gICAgICAgIGN1c3RvbVRlbXBsYXRlLFxuICAgICAgICBbeyBuYW1lOiBcImZpZWxkXCIsIHZhbHVlOiBcImhlbGxvIHdvcmxkIVwiIH1dLFxuICAgICAgICB7IHN0YXJ0OiBcIj5cIiwgZW5kOiBcIjxcIiB9XG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiXG5MYW5nLmxpc3RMZWF2ZXNNaXNzaW5nT2JqZWN0S2V5cyhuYlRleHQsIFtcImVuXCIsIFwiZnJcIl0pO1xuLy8gUmV0dXJucyBhbiBhcnJheSBvZiBwYXRocyB0byBtaXNzaW5nIHRyYW5zbGF0aW9uc1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IkxhbmcudG9UaXRsZUNhc2UoXCJ3ZWxjb21lIHRvIG15IGhvbWVcIik7ICAgIC8vIFwiV2VsY29tZSBUbyBNeSBIb21lXCJcbkxhbmcudG9TZW50ZW5jZUNhc2UoXCJ3ZWxjb21lIHRvIG15IGhvbWVcIik7IC8vIFwiV2VsY29tZSB0byBteSBob21lXCJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJcbnF1ZXJ5TGFuZ3VhZ2UgPSBhd2FpdCBMYW5nLmdldFBhcmFtRnJvbUxpc3Qoe1xuICBuYW1lOiBcImxhbmdcIixcbiAgbGlzdDogbGFuZ3VhZ2VzLm1hcCgoZCkgPT4gZC5rZXkpXG59KTtcblxuZGVmYXVsdExhbmdLZXkgPSBxdWVyeUxhbmd1YWdlID8/IFwiZW5cIjtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnbGFuZ3VhZ2UnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgncHJldHR5TGFuZ3VhZ2VWaWV3JykifV19</script><script type="module">"file:"===window.location.protocol&&alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."),window._ojs.paths.runtimeToDoc="../../docs",window._ojs.paths.runtimeToRoot="../..",window._ojs.paths.docToRoot="..",window._ojs.selfContained=!1,window._ojs.runtime.interpretFromScriptTags()</script><script id="quarto-html-after-body" type="application/javascript">window.document.addEventListener("DOMContentLoaded",function(t){const e=t=>{for(const e of t.classList)if(e.startsWith("code-annotation-"))return!0;return!1},n=function(t){const e=t.trigger;e.blur(),e.classList.add("code-copy-button-checked");var n=e.getAttribute("title");let o;e.setAttribute("title","Copied!"),window.bootstrap&&(e.setAttribute("data-bs-toggle","tooltip"),e.setAttribute("data-bs-placement","left"),e.setAttribute("data-bs-title","Copied!"),o=new bootstrap.Tooltip(e,{trigger:"manual",customClass:"code-copy-button-tooltip",offset:[0,-8]}),o.show()),setTimeout(function(){o&&(o.hide(),e.removeAttribute("data-bs-title"),e.removeAttribute("data-bs-toggle"),e.removeAttribute("data-bs-placement")),e.setAttribute("title",n),e.classList.remove("code-copy-button-checked")},1e3),t.clearSelection()},o=function(t){const n=t.parentElement.cloneNode(!0).querySelector("code");for(const t of n.children)e(t)&&t.remove();return n.innerText};if(new window.ClipboardJS(".code-copy-button:not([data-in-quarto-modal])",{text:o}).on("success",n),window.document.getElementById("quarto-embedded-source-code-modal")){new window.ClipboardJS(".code-copy-button[data-in-quarto-modal]",{text:o,container:window.document.getElementById("quarto-embedded-source-code-modal")}).on("success",n)}for(var i=new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//),a=new RegExp(/^mailto:/),l=new RegExp("https://adaptationatlas.github.io/atlas_notebooks/"),r=t=>l.test(t)||i.test(t)||a.test(t),d=window.document.querySelectorAll("a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)"),c=0;c<d.length;c++){const t=d[c];r(t.href)||void 0!==t.dataset.originalHref&&(t.href=t.dataset.originalHref)}function s(t,e,n,o){const i={allowHTML:!0,maxWidth:500,delay:100,arrow:!1,appendTo:function(t){return t.parentElement},interactive:!0,interactiveBorder:10,theme:"quarto",placement:"bottom-start"};e&&(i.content=e),n&&(i.onTrigger=n),o&&(i.onUntrigger=o),window.tippy(t,i)}const u=window.document.querySelectorAll('a[role="doc-noteref"]');for(c=0;c<u.length;c++){const t=u[c];s(t,function(){let e=t.getAttribute("data-footnote-href")||t.getAttribute("href");try{e=new URL(e).hash}catch{}const n=e.replace(/^#\/?/,""),o=window.document.getElementById(n);return o?o.innerHTML:""})}const h=window.document.querySelectorAll("a.quarto-xref"),m=(t,e)=>{const n=t=>{if(t.classList.remove("page-full","page-columns"),t.children)for(const e of t.children)n(e)};if(n(e),null===t||t.startsWith("sec-")){const t=document.createElement("div");if(e.children&&e.children.length>2){t.appendChild(e.children[0].cloneNode(!0));for(let n=1;n<e.children.length;n++){const o=e.children[n];if("P"!==o.tagName||""!==o.innerText){t.appendChild(o.cloneNode(!0));break}}return window.Quarto?.typesetMath&&window.Quarto.typesetMath(t),t.innerHTML}return window.Quarto?.typesetMath&&window.Quarto.typesetMath(e),e.innerHTML}{const t=e.querySelector("a.anchorjs-link");return t&&t.remove(),window.Quarto?.typesetMath&&window.Quarto.typesetMath(e),e.classList.contains("callout")?e.outerHTML:e.innerHTML}};for(c=0;c<h.length;c++){const t=h[c];s(t,void 0,function(e){e.disable();let n,o=t.getAttribute("href");if(o.startsWith("#"))n=o;else try{n=new URL(o).hash}catch{}if(n){const t=n.replace(/^#\/?/,""),i=window.document.getElementById(t);if(null!==i)try{const n=m(t,i.cloneNode(!0));e.setContent(n)}finally{e.enable(),e.show()}else fetch(o.split("#")[0]).then(t=>t.text()).then(n=>{const o=(new DOMParser).parseFromString(n,"text/html").getElementById(t);if(null!==o){const n=m(t,o);e.setContent(n)}}).finally(()=>{e.enable(),e.show()})}else fetch(o).then(t=>t.text()).then(t=>{const n=(new DOMParser).parseFromString(t,"text/html").querySelector("main.content");if(null!==n){n.children.length>0&&"HEADER"===n.children[0].tagName&&n.children[0].remove();const t=m(null,n);e.setContent(t)}}).finally(()=>{e.enable(),e.show()})},function(t){})}let w;const g=t=>{window.document;const e=t.getAttribute("data-target-cell"),n=t.getAttribute("data-target-annotation");const o=window.document.querySelector('span[data-code-cell="'+e+'"][data-code-annotation="'+n+'"]').getAttribute("data-code-lines").split(",").map(t=>e+"-"+t);let i=null,a=null,l=null;if(o.length>0){const n=window.document.getElementById(o[0]);if(i=n.offsetTop,a=n.offsetHeight,l=n.parentElement.parentElement,o.length>1){const t=window.document.getElementById(o[o.length-1]);a=t.offsetTop+t.offsetHeight-i}if(null!==i&&null!==a&&null!==l){let t=window.document.getElementById("code-annotation-line-highlight");null===t&&(t=window.document.createElement("div"),t.setAttribute("id","code-annotation-line-highlight"),t.style.position="absolute",l.appendChild(t)),t.style.top=i-2+"px",t.style.height=a+4+"px",t.style.left=0;let n=window.document.getElementById("code-annotation-line-highlight-gutter");if(null===n){n=window.document.createElement("div"),n.setAttribute("id","code-annotation-line-highlight-gutter"),n.style.position="absolute";window.document.getElementById(e).querySelector(".code-annotation-gutter").appendChild(n)}n.style.top=i-2+"px",n.style.height=a+4+"px"}w=t}},p=()=>{["code-annotation-line-highlight","code-annotation-line-highlight-gutter"].forEach(t=>{const e=window.document.getElementById(t);e&&e.remove()}),w=void 0};window.addEventListener("resize",function(t,e){let n,o=!1;return(...i)=>{o?(n&&clearTimeout(n),n=setTimeout(()=>{t.apply(this,i),n=o=!1},e)):(t.apply(this,i),o=!0)}}(()=>{elRect=void 0,w&&g(w)},10));const f=window.document.querySelectorAll("dt[data-target-cell]");for(const t of f)t.addEventListener("click",t=>{const e=t.target;if(e!==w){p();const t=window.document.querySelector("dt[data-target-cell].code-annotation-active");t&&t.classList.remove("code-annotation-active"),g(e),e.classList.add("code-annotation-active")}else p(),e.classList.remove("code-annotation-active")});const b=t=>{const e=t.parentElement;if(e){const n=e.dataset.cites;return n?{el:t,cites:n.split(" ")}:b(t.parentElement)}};var y=window.document.querySelectorAll('a[role="doc-biblioref"]');for(c=0;c<y.length;c++){const t=y[c],e=b(t);e&&s(e.el,function(){var t=window.document.createElement("div");return e.cites.forEach(function(e){var n=window.document.createElement("div");n.classList.add("hanging-indent"),n.classList.add("csl-entry");var o=window.document.getElementById("ref-"+e);o&&(n.innerHTML=o.innerHTML),t.appendChild(n)}),t.innerHTML})}})</script></div></body></html>